var on=Object.defineProperty;var an=(u,e,l)=>e in u?on(u,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):u[e]=l;var yt=(u,e,l)=>(an(u,typeof e!="symbol"?e+"":e,l),l);import{d as sn,o as ne,c as le,a as f,n as Ke,t as ut,w as Dt,b as De,e as rt,m as Mt,u as Ge,r as ln,f as j,F as Je,g as mt,h as un,i as cn,j as dn,K as fn,p as hn,k as Ot}from"./index-LTXgpWqy.js";var Qt={};(function(u){(()=>{var e={541:(t,o,E)=>{var A=E(353),U=Y(A),F=E(37),x=Y(F),p=E(630),b=Y(p),m=function(){function R(N,g){for(var w=0;w<g.length;w++){var S=g[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(N,S.key,S)}}return function(N,g,w){return g&&R(N.prototype,g),w&&R(N,w),N}}(),C=E(457),M=Y(C),W=E(729),I=Y(W),i=E(702);E(303);var D=E(248),a=Y(D),J=E(249),ie=Y(J);function Y(R){return R&&R.__esModule?R:{default:R}}function we(R,N){if(!(R instanceof N))throw new TypeError("Cannot call a class as a function")}function pe(R,N){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:R}function ze(R,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);R.prototype=Object.create(N&&N.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(R,N):R.__proto__=N)}window.iFrameResizer=ie.default;var oe=function(R){ze(N,R);function N(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};we(this,N);var w=pe(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));return w.options=g,w.api=new a.default(w),w.channel=M.default.build({window:g.window||window.parent,origin:"*",scope:g.id||location.origin,postMessageObserver:function(G,X){w.emit("postMessage",G,X)},gotMessageObserver:function(G,X){w.emit("gotMessage",G,X)}}),["init","update","reload","_event"].forEach(function(S){w.channel.bind(S,function(G,X){var B=S,V=X;return S==="_event"&&(B=X.eventName,V=X.eventData),w.emit(B,V),"success"})}),w}return m(N,[{key:"request",value:function(w){var S=this;return new i.Promise(function(G,X){if(!(0,b.default)(w))throw new Error("Params must be an object");var B=w.method,V=w.endpoint,ge=w.query,ye=w.body;if(!B||!V||!(0,x.default)(B)||!(0,x.default)(V))throw new Error("Invalid method or endpoint");if(!(0,U.default)(ge)&&!(0,b.default)(ge))throw new Error("Query must be an object");if(!(0,U.default)(ye)&&!(0,b.default)(ye))throw new Error("Body must be an object");S.effectiveUser&&(w.effectiveUser=S.effectiveUser),S.channel.call({method:"request",params:w,success:function(ve){G(ve)},error:function(ve){X(ve)}})})}},{key:"setEffectiveUser",value:function(w){this.effectiveUser=w}},{key:"saveData",value:function(w){var S=this;return new i.Promise(function(G,X){if(!(0,b.default)(w))throw new Error("Data must be an object");S.channel.call({method:"saveData",params:w,success:function(){G()},error:function(V){X(V)}})})}},{key:"addTransaction",value:function(w){var S=this;return new i.Promise(function(G,X){if(!(0,U.default)(w)&&!(0,b.default)(w))throw new Error("Attrs must be an object");S.channel.call({method:"addTransaction",params:w,success:function(V){G(V)},error:function(V){X(V)}})})}},{key:"editTransaction",value:function(w){var S=this;return new i.Promise(function(G,X){if(!w||!(0,x.default)(w))throw new Error("Invalid id");S.channel.call({method:"editTransaction",params:w,success:function(V){G(V)},error:function(V){X(V)}})})}},{key:"addInstitution",value:function(w){var S=this;return new i.Promise(function(G,X){if(!(0,U.default)(w)&&!(0,b.default)(w))throw new Error("Attrs must be an object");S.channel.call({method:"addInstitution",params:w,success:function(V){G(V)},error:function(V){X(V)}})})}},{key:"addInvestment",value:function(){var w=this;return new i.Promise(function(S,G){w.channel.call({method:"addInvestment",success:function(B){S(B)},error:function(B){G(B)}})})}},{key:"editInstitution",value:function(w){var S=this;return new i.Promise(function(G,X){if(!w||!(0,x.default)(w))throw new Error("Invalid id");S.channel.call({method:"editInstitution",params:w,success:function(V){G(V)},error:function(V){X(V)}})})}},{key:"editAsset",value:function(w){var S=this;return new i.Promise(function(G,X){if(!w||!(0,x.default)(w))throw new Error("Invalid id");S.channel.call({method:"editAsset",params:w,success:function(V){G(V)},error:function(V){X(V)}})})}},{key:"editLiability",value:function(w){var S=this;return new i.Promise(function(G,X){if(!w||!(0,x.default)(w))throw new Error("Invalid id");S.channel.call({method:"editLiability",params:w,success:function(V){G(V)},error:function(V){X(V)}})})}},{key:"deleteInstitution",value:function(w){var S=this;return new i.Promise(function(G,X){if(!w||!(0,x.default)(w))throw new Error("Invalid id");S.channel.call({method:"deleteInstitution",params:w,success:function(V){G(V)},error:function(V){X(V)}})})}},{key:"deleteAsset",value:function(w){var S=this;return new i.Promise(function(G,X){if(!w||!(0,x.default)(w))throw new Error("Invalid id");S.channel.call({method:"deleteAsset",params:w,success:function(V){G(V)},error:function(V){X(V)}})})}},{key:"deleteLiability",value:function(w){var S=this;return new i.Promise(function(G,X){if(!w||!(0,x.default)(w))throw new Error("Invalid id");S.channel.call({method:"deleteLiability",params:w,success:function(V){G(V)},error:function(V){X(V)}})})}},{key:"downloadDocument",value:function(w){var S=this;return new i.Promise(function(G,X){if(!w||!(0,x.default)(w))throw new Error("Invalid id");S.channel.call({method:"downloadDocument",params:w,success:function(){G()},error:function(V){X(V)}})})}},{key:"upgradePremium",value:function(){var w=this;return new i.Promise(function(S,G){w.channel.call({method:"upgradePremium",success:function(){S()},error:function(B){G(B)}})})}},{key:"getSharings",value:function(){var w=this;return new i.Promise(function(S,G){w.channel.call({method:"getSharings",success:function(B){S(B)},error:function(B){G(B)}})})}},{key:"switchUser",value:function(w){var S=this;return new i.Promise(function(G,X){if(!w||!(0,x.default)(w))throw new Error("Invalid id");S.channel.call({method:"switchUser",params:w,success:function(){G()},error:function(V){X(V)}})})}},{key:"destroy",value:function(){this.channel.destroy()}}]),N}(I.default);t.exports=oe},248:t=>{var o=function(){function U(F,x){for(var p=0;p<x.length;p++){var b=x[p];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(F,b.key,b)}}return function(F,x,p){return x&&U(F.prototype,x),p&&U(F,p),F}}();function E(U,F){if(!(U instanceof F))throw new TypeError("Cannot call a class as a function")}var A=function(){function U(F){E(this,U),this.addon=F}return o(U,[{key:"getAssets",value:function(x){return this.addon.request({method:"GET",endpoint:"assets",query:x})}},{key:"getCurrencies",value:function(x){return this.addon.request({method:"GET",endpoint:"currencies",query:x})}},{key:"getInstitutions",value:function(x){return this.addon.request({method:"GET",endpoint:"institutions",query:x})}},{key:"getInstitution",value:function(x){return this.addon.request({method:"GET",endpoint:"institutions/"+x})}},{key:"pollInstitution",value:function(x,p){return this.addon.request({method:"GET",endpoint:"institutions/"+x+"/poll?v="+p})}},{key:"syncInstitution",value:function(x){return this.addon.request({method:"POST",endpoint:"institutions/"+x+"/sync"})}},{key:"addInstitution",value:function(x){return console.warn("DEPRECATED: `addon.api.addInstitution`. Use `addon.addInstitution instead.`"),this.addon.request({method:"POST",endpoint:"institutions",body:x})}},{key:"getLiabilities",value:function(x){return this.addon.request({method:"GET",endpoint:"liabilities",query:x})}},{key:"getPositions",value:function(x){return this.addon.request({method:"GET",endpoint:"positions",query:x})}},{key:"getTransactions",value:function(x){return this.addon.request({method:"GET",endpoint:"transactions",query:x})}},{key:"updateTransaction",value:function(x){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.addon.request({method:"PUT",endpoint:"transactions/"+x,body:p})}},{key:"getUser",value:function(){return this.addon.request({method:"GET",endpoint:"users/me"})}}]),U}();t.exports=A},249:(t,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default={heightCalculationMethod:function(){var A=document,U=A.body,F=A.documentElement;return Math.max.apply(null,[U.scrollHeight,U.offsetHeight,F.offsetHeight])}}},702:function(t,o,E){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(A,U){t.exports=U()})(this,function(){function A(c){var k=typeof c;return c!==null&&(k==="object"||k==="function")}function U(c){return typeof c=="function"}var F=void 0;Array.isArray?F=Array.isArray:F=function(c){return Object.prototype.toString.call(c)==="[object Array]"};var x=F,p=0,b=void 0,m=void 0,C=function(k,h){oe[p]=k,oe[p+1]=h,p+=2,p===2&&(m?m(R):g())};function M(c){m=c}function W(c){C=c}var I=typeof window<"u"?window:void 0,i=I||{},D=i.MutationObserver||i.WebKitMutationObserver,a=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",J=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function ie(){return function(){return process.nextTick(R)}}function Y(){return typeof b<"u"?function(){b(R)}:ze()}function we(){var c=0,k=new D(R),h=document.createTextNode("");return k.observe(h,{characterData:!0}),function(){h.data=c=++c%2}}function pe(){var c=new MessageChannel;return c.port1.onmessage=R,function(){return c.port2.postMessage(0)}}function ze(){var c=setTimeout;return function(){return c(R,1)}}var oe=new Array(1e3);function R(){for(var c=0;c<p;c+=2){var k=oe[c],h=oe[c+1];k(h),oe[c]=void 0,oe[c+1]=void 0}p=0}function N(){try{var c=Function("return this")().require("vertx");return b=c.runOnLoop||c.runOnContext,Y()}catch{return ze()}}var g=void 0;a?g=ie():D?g=we():J?g=pe():I===void 0?g=N():g=ze();function w(c,k){var h=this,O=new this.constructor(X);O[G]===void 0&&z(O);var P=h._state;if(P){var $=arguments[P-1];C(function(){return ot(P,O,$,h._result)})}else et(h,O,c,k);return O}function S(c){var k=this;if(c&&typeof c=="object"&&c.constructor===k)return c;var h=new k(X);return He(h,c),h}var G=Math.random().toString(36).substring(2);function X(){}var B=void 0,V=1,ge=2;function ye(){return new TypeError("You cannot resolve a promise with itself")}function We(){return new TypeError("A promises callback cannot return that same promise.")}function ve(c,k,h,O){try{c.call(k,h,O)}catch(P){return P}}function Oe(c,k,h){C(function(O){var P=!1,$=ve(h,k,function(Ee){P||(P=!0,k!==Ee?He(O,Ee):Ve(O,Ee))},function(Ee){P||(P=!0,Ne(O,Ee))},"Settle: "+(O._label||" unknown promise"));!P&&$&&(P=!0,Ne(O,$))},c)}function Me(c,k){k._state===V?Ve(c,k._result):k._state===ge?Ne(c,k._result):et(k,void 0,function(h){return He(c,h)},function(h){return Ne(c,h)})}function Ce(c,k,h){k.constructor===c.constructor&&h===w&&k.constructor.resolve===S?Me(c,k):h===void 0?Ve(c,k):U(h)?Oe(c,k,h):Ve(c,k)}function He(c,k){if(c===k)Ne(c,ye());else if(A(k)){var h=void 0;try{h=k.then}catch(O){Ne(c,O);return}Ce(c,k,h)}else Ve(c,k)}function Le(c){c._onerror&&c._onerror(c._result),Ze(c)}function Ve(c,k){c._state===B&&(c._result=k,c._state=V,c._subscribers.length!==0&&C(Ze,c))}function Ne(c,k){c._state===B&&(c._state=ge,c._result=k,C(Le,c))}function et(c,k,h,O){var P=c._subscribers,$=P.length;c._onerror=null,P[$]=k,P[$+V]=h,P[$+ge]=O,$===0&&c._state&&C(Ze,c)}function Ze(c){var k=c._subscribers,h=c._state;if(k.length!==0){for(var O=void 0,P=void 0,$=c._result,Ee=0;Ee<k.length;Ee+=3)O=k[Ee],P=k[Ee+h],O?ot(h,O,P,$):P($);c._subscribers.length=0}}function ot(c,k,h,O){var P=U(h),$=void 0,Ee=void 0,je=!0;if(P){try{$=h(O)}catch(tt){je=!1,Ee=tt}if(k===$){Ne(k,We());return}}else $=O;k._state!==B||(P&&je?He(k,$):je===!1?Ne(k,Ee):c===V?Ve(k,$):c===ge&&Ne(k,$))}function y(c,k){try{k(function(O){He(c,O)},function(O){Ne(c,O)})}catch(h){Ne(c,h)}}var Z=0;function d(){return Z++}function z(c){c[G]=Z++,c._state=void 0,c._result=void 0,c._subscribers=[]}function ee(){return new Error("Array Methods must be provided an Array")}var K=function(){function c(k,h){this._instanceConstructor=k,this.promise=new k(X),this.promise[G]||z(this.promise),x(h)?(this.length=h.length,this._remaining=h.length,this._result=new Array(this.length),this.length===0?Ve(this.promise,this._result):(this.length=this.length||0,this._enumerate(h),this._remaining===0&&Ve(this.promise,this._result))):Ne(this.promise,ee())}return c.prototype._enumerate=function(h){for(var O=0;this._state===B&&O<h.length;O++)this._eachEntry(h[O],O)},c.prototype._eachEntry=function(h,O){var P=this._instanceConstructor,$=P.resolve;if($===S){var Ee=void 0,je=void 0,tt=!1;try{Ee=h.then}catch(Ye){tt=!0,je=Ye}if(Ee===w&&h._state!==B)this._settledAt(h._state,O,h._result);else if(typeof Ee!="function")this._remaining--,this._result[O]=h;else if(P===v){var gt=new P(X);tt?Ne(gt,je):Ce(gt,h,Ee),this._willSettleAt(gt,O)}else this._willSettleAt(new P(function(Ye){return Ye(h)}),O)}else this._willSettleAt($(h),O)},c.prototype._settledAt=function(h,O,P){var $=this.promise;$._state===B&&(this._remaining--,h===ge?Ne($,P):this._result[O]=P),this._remaining===0&&Ve($,this._result)},c.prototype._willSettleAt=function(h,O){var P=this;et(h,void 0,function($){return P._settledAt(V,O,$)},function($){return P._settledAt(ge,O,$)})},c}();function se(c){return new K(this,c).promise}function be(c){var k=this;return x(c)?new k(function(h,O){for(var P=c.length,$=0;$<P;$++)k.resolve(c[$]).then(h,O)}):new k(function(h,O){return O(new TypeError("You must pass an array to race."))})}function $e(c){var k=this,h=new k(X);return Ne(h,c),h}function fe(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Ue(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var v=function(){function c(k){this[G]=d(),this._result=this._state=void 0,this._subscribers=[],X!==k&&(typeof k!="function"&&fe(),this instanceof c?y(this,k):Ue())}return c.prototype.catch=function(h){return this.then(null,h)},c.prototype.finally=function(h){var O=this,P=O.constructor;return U(h)?O.then(function($){return P.resolve(h()).then(function(){return $})},function($){return P.resolve(h()).then(function(){throw $})}):O.then(h,h)},c}();v.prototype.then=w,v.all=se,v.race=be,v.resolve=S,v.reject=$e,v._setScheduler=M,v._setAsap=W,v._asap=C;function q(){var c=void 0;if(typeof E.g<"u")c=E.g;else if(typeof self<"u")c=self;else try{c=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var k=c.Promise;if(k){var h=null;try{h=Object.prototype.toString.call(k.resolve())}catch{}if(h==="[object Promise]"&&!k.cast)return}c.Promise=v}return v.polyfill=q,v.Promise=v,v})},729:t=>{var o=Object.prototype.hasOwnProperty,E="~";function A(){}Object.create&&(A.prototype=Object.create(null),new A().__proto__||(E=!1));function U(b,m,C){this.fn=b,this.context=m,this.once=C||!1}function F(b,m,C,M,W){if(typeof C!="function")throw new TypeError("The listener must be a function");var I=new U(C,M||b,W),i=E?E+m:m;return b._events[i]?b._events[i].fn?b._events[i]=[b._events[i],I]:b._events[i].push(I):(b._events[i]=I,b._eventsCount++),b}function x(b,m){--b._eventsCount===0?b._events=new A:delete b._events[m]}function p(){this._events=new A,this._eventsCount=0}p.prototype.eventNames=function(){var m=[],C,M;if(this._eventsCount===0)return m;for(M in C=this._events)o.call(C,M)&&m.push(E?M.slice(1):M);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(C)):m},p.prototype.listeners=function(m){var C=E?E+m:m,M=this._events[C];if(!M)return[];if(M.fn)return[M.fn];for(var W=0,I=M.length,i=new Array(I);W<I;W++)i[W]=M[W].fn;return i},p.prototype.listenerCount=function(m){var C=E?E+m:m,M=this._events[C];return M?M.fn?1:M.length:0},p.prototype.emit=function(m,C,M,W,I,i){var D=E?E+m:m;if(!this._events[D])return!1;var a=this._events[D],J=arguments.length,ie,Y;if(a.fn){switch(a.once&&this.removeListener(m,a.fn,void 0,!0),J){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,C),!0;case 3:return a.fn.call(a.context,C,M),!0;case 4:return a.fn.call(a.context,C,M,W),!0;case 5:return a.fn.call(a.context,C,M,W,I),!0;case 6:return a.fn.call(a.context,C,M,W,I,i),!0}for(Y=1,ie=new Array(J-1);Y<J;Y++)ie[Y-1]=arguments[Y];a.fn.apply(a.context,ie)}else{var we=a.length,pe;for(Y=0;Y<we;Y++)switch(a[Y].once&&this.removeListener(m,a[Y].fn,void 0,!0),J){case 1:a[Y].fn.call(a[Y].context);break;case 2:a[Y].fn.call(a[Y].context,C);break;case 3:a[Y].fn.call(a[Y].context,C,M);break;case 4:a[Y].fn.call(a[Y].context,C,M,W);break;default:if(!ie)for(pe=1,ie=new Array(J-1);pe<J;pe++)ie[pe-1]=arguments[pe];a[Y].fn.apply(a[Y].context,ie)}}return!0},p.prototype.on=function(m,C,M){return F(this,m,C,M,!1)},p.prototype.once=function(m,C,M){return F(this,m,C,M,!0)},p.prototype.removeListener=function(m,C,M,W){var I=E?E+m:m;if(!this._events[I])return this;if(!C)return x(this,I),this;var i=this._events[I];if(i.fn)i.fn===C&&(!W||i.once)&&(!M||i.context===M)&&x(this,I);else{for(var D=0,a=[],J=i.length;D<J;D++)(i[D].fn!==C||W&&!i[D].once||M&&i[D].context!==M)&&a.push(i[D]);a.length?this._events[I]=a.length===1?a[0]:a:x(this,I)}return this},p.prototype.removeAllListeners=function(m){var C;return m?(C=E?E+m:m,this._events[C]&&x(this,C)):(this._events=new A,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prefixed=E,p.EventEmitter=p,t.exports=p},303:(t,o,E)=>{t.exports=E(683)},402:t=>{(function(o){if(typeof window>"u")return;var E=!0,A=10,U="",F=0,x="",p=null,b="",m=!1,C={resize:1,click:1},M=128,W=!0,I=1,i="bodyOffset",D=i,a=!0,J="",ie={},Y=32,we=null,pe=!1,ze="[iFrameSizer]",oe=ze.length,R="",N={max:1,min:1,bodyScroll:1,documentElementScroll:1},g="child",w=!0,S=window.parent,G="*",X=0,B=!1,V=null,ge=16,ye=1,We="scroll",ve=We,Oe=window,Me=function(){z("MessageCallback function not defined")},Ce=function(){},He=function(){},Le={height:function(){return z("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return z("Custom width calculation function not defined"),document.body.scrollWidth}},Ve={};function Ne(s,_,H){"addEventListener"in window?s.addEventListener(_,H,!1):"attachEvent"in window&&s.attachEvent("on"+_,H)}function et(s,_,H){"removeEventListener"in window?s.removeEventListener(_,H,!1):"detachEvent"in window&&s.detachEvent("on"+_,H)}function Ze(s){return s.charAt(0).toUpperCase()+s.slice(1)}function ot(s){var _,H,ae,he=null,xe=0,Fe=function(){xe=y(),he=null,ae=s.apply(_,H),he||(_=H=null)};return function(){var Ie=y();xe||(xe=Ie);var _e=ge-(Ie-xe);return _=this,H=arguments,_e<=0||_e>ge?(he&&(clearTimeout(he),he=null),xe=Ie,ae=s.apply(_,H),he||(_=H=null)):he||(he=setTimeout(Fe,_e)),ae}}var y=Date.now||function(){return new Date().getTime()};function Z(s){return ze+"["+R+"] "+s}function d(s){pe&&typeof window.console=="object"&&console.log(Z(s))}function z(s){typeof window.console=="object"&&console.warn(Z(s))}function ee(){K(),d("Initialising iFrame ("+location.href+")"),se(),fe(),$e("background",U),$e("padding",b),gt(),k(),h(),Ue(),qe(),O(),ie=Ye(),pt("init","Init message from host page"),Ce()}function K(){function s(H){return H==="true"}var _=J.substr(oe).split(":");R=_[0],F=o!==_[1]?Number(_[1]):F,m=o!==_[2]?s(_[2]):m,pe=o!==_[3]?s(_[3]):pe,Y=o!==_[4]?Number(_[4]):Y,E=o!==_[6]?s(_[6]):E,x=_[7],D=o!==_[8]?_[8]:D,U=_[9],b=_[10],X=o!==_[11]?Number(_[11]):X,ie.enable=o!==_[12]?s(_[12]):!1,g=o!==_[13]?_[13]:g,ve=o!==_[14]?_[14]:ve}function se(){function s(){var H=window.iFrameResizer;d("Reading data from page: "+JSON.stringify(H)),Me="messageCallback"in H?H.messageCallback:Me,Ce="readyCallback"in H?H.readyCallback:Ce,G="targetOrigin"in H?H.targetOrigin:G,D="heightCalculationMethod"in H?H.heightCalculationMethod:D,ve="widthCalculationMethod"in H?H.widthCalculationMethod:ve}function _(H,ae){return typeof H=="function"&&(d("Setup custom "+ae+"CalcMethod"),Le[ae]=H,H="custom"),H}"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(s(),D=_(D,"height"),ve=_(ve,"width")),d("TargetOrigin for parent set to: "+G)}function be(s,_){return _.indexOf("-")!==-1&&(z("Negative CSS value ignored for "+s),_=""),_}function $e(s,_){o!==_&&_!==""&&_!=="null"&&(document.body.style[s]=_,d("Body "+s+' set to "'+_+'"'))}function fe(){o===x&&(x=F+"px"),$e("margin",be("margin",x))}function Ue(){document.documentElement.style.height="",document.body.style.height="",d('HTML & body height set to "auto"')}function v(s){var _={add:function(H){function ae(){pt(s.eventName,s.eventType)}Ve[H]=ae,Ne(window,H,ae)},remove:function(H){var ae=Ve[H];delete Ve[H],et(window,H,ae)}};s.eventNames&&Array.prototype.map?(s.eventName=s.eventNames[0],s.eventNames.map(_[s.method])):_[s.method](s.eventName),d(Ze(s.method)+" event listener: "+s.eventType)}function q(s){v({method:s,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),v({method:s,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),v({method:s,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),v({method:s,eventType:"Input",eventName:"input"}),v({method:s,eventType:"Mouse Up",eventName:"mouseup"}),v({method:s,eventType:"Mouse Down",eventName:"mousedown"}),v({method:s,eventType:"Orientation Change",eventName:"orientationchange"}),v({method:s,eventType:"Print",eventName:["afterprint","beforeprint"]}),v({method:s,eventType:"Ready State Change",eventName:"readystatechange"}),v({method:s,eventType:"Touch Start",eventName:"touchstart"}),v({method:s,eventType:"Touch End",eventName:"touchend"}),v({method:s,eventType:"Touch Cancel",eventName:"touchcancel"}),v({method:s,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),v({method:s,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),v({method:s,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),g==="child"&&v({method:s,eventType:"IFrame Resized",eventName:"resize"})}function c(s,_,H,ae){return _!==s&&(s in H||(z(s+" is not a valid option for "+ae+"CalculationMethod."),s=_),d(ae+' calculation method set to "'+s+'"')),s}function k(){D=c(D,i,Xe,"height")}function h(){ve=c(ve,We,ct,"width")}function O(){E===!0?(q("add"),Q()):d("Auto Resize disabled")}function P(){d("Disable outgoing messages"),w=!1}function $(){d("Remove event listener: Message"),et(window,"message",T)}function Ee(){p!==null&&p.disconnect()}function je(){q("remove"),Ee(),clearInterval(we)}function tt(){P(),$(),E===!0&&je()}function gt(){var s=document.createElement("div");s.style.clear="both",s.style.display="block",document.body.appendChild(s)}function Ye(){function s(){return{x:window.pageXOffset!==o?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==o?window.pageYOffset:document.documentElement.scrollTop}}function _(_e){var me=_e.getBoundingClientRect(),Ae=s();return{x:parseInt(me.left,10)+parseInt(Ae.x,10),y:parseInt(me.top,10)+parseInt(Ae.y,10)}}function H(_e){function me(st){var bt=_(st);d("Moving to in page link (#"+Ae+") at x: "+bt.x+" y: "+bt.y),dt(bt.y,bt.x,"scrollToOffset")}var Ae=_e.split("#")[1]||_e,Te=decodeURIComponent(Ae),Qe=document.getElementById(Te)||document.getElementsByName(Te)[0];o!==Qe?me(Qe):(d("In page link (#"+Ae+") not found in iFrame, so sending to parent"),dt(0,0,"inPageLink","#"+Ae))}function ae(){location.hash!==""&&location.hash!=="#"&&H(location.href)}function he(){function _e(me){function Ae(Te){Te.preventDefault(),H(this.getAttribute("href"))}me.getAttribute("href")!=="#"&&Ne(me,"click",Ae)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),_e)}function xe(){Ne(window,"hashchange",ae)}function Fe(){setTimeout(ae,M)}function Ie(){Array.prototype.forEach&&document.querySelectorAll?(d("Setting up location.hash handlers"),he(),xe(),Fe()):z("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}return ie.enable?Ie():d("In page linking not enabled"),{findTarget:H}}function qe(){d("Enable public methods"),Oe.parentIFrame={autoResize:function(_){return _===!0&&E===!1?(E=!0,O()):_===!1&&E===!0&&(E=!1,je()),E},close:function(){dt(0,0,"close"),tt()},getId:function(){return R},getPageInfo:function(_){typeof _=="function"?(He=_,dt(0,0,"pageInfo")):(He=function(){},dt(0,0,"pageInfoStop"))},moveToAnchor:function(_){ie.findTarget(_)},reset:function(){Et("parentIFrame.reset")},scrollTo:function(_,H){dt(H,_,"scrollTo")},scrollToOffset:function(_,H){dt(H,_,"scrollToOffset")},sendMessage:function(_,H){dt(0,0,"message",JSON.stringify(_),H)},setHeightCalculationMethod:function(_){D=_,k()},setWidthCalculationMethod:function(_){ve=_,h()},setTargetOrigin:function(_){d("Set targetOrigin: "+_),G=_},size:function(_,H){var ae=""+(_||"")+(H?","+H:"");pt("size","parentIFrame.size("+ae+")",_,H)}}}function ue(){Y!==0&&(d("setInterval: "+Y+"ms"),we=setInterval(function(){pt("interval","setInterval: "+Y)},Math.abs(Y)))}function te(){function s(Te){function Qe(st){st.complete===!1&&(d("Attach listeners to "+st.src),st.addEventListener("load",he,!1),st.addEventListener("error",xe,!1),_e.push(st))}Te.type==="attributes"&&Te.attributeName==="src"?Qe(Te.target):Te.type==="childList"&&Array.prototype.forEach.call(Te.target.querySelectorAll("img"),Qe)}function _(Te){_e.splice(_e.indexOf(Te),1)}function H(Te){d("Remove listeners from "+Te.src),Te.removeEventListener("load",he,!1),Te.removeEventListener("error",xe,!1),_(Te)}function ae(Te,Qe,st){H(Te.target),pt(Qe,st+": "+Te.target.src,o,o)}function he(Te){ae(Te,"imageLoad","Image loaded")}function xe(Te){ae(Te,"imageLoadFailed","Image load failed")}function Fe(Te){pt("mutationObserver","mutationObserver: "+Te[0].target+" "+Te[0].type),Te.forEach(s)}function Ie(){var Te=document.querySelector("body"),Qe={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return Ae=new me(Fe),d("Create body MutationObserver"),Ae.observe(Te,Qe),Ae}var _e=[],me=window.MutationObserver||window.WebKitMutationObserver,Ae=Ie();return{disconnect:function(){"disconnect"in Ae&&(d("Disconnect body MutationObserver"),Ae.disconnect(),_e.forEach(H))}}}function Q(){var s=0>Y;window.MutationObserver||window.WebKitMutationObserver?s?ue():p=te():(d("MutationObserver not supported in this browser!"),ue())}function re(s,_){function H(he){var xe=/^\d+(px)?$/i;if(xe.test(he))return parseInt(he,A);var Fe=_.style.left,Ie=_.runtimeStyle.left;return _.runtimeStyle.left=_.currentStyle.left,_.style.left=he||0,he=_.style.pixelLeft,_.style.left=Fe,_.runtimeStyle.left=Ie,he}var ae=0;return _=_||document.body,"defaultView"in document&&"getComputedStyle"in document.defaultView?(ae=document.defaultView.getComputedStyle(_,null),ae=ae!==null?ae[s]:0):ae=H(_.currentStyle[s]),parseInt(ae,A)}function de(s){s>ge/2&&(ge=2*s,d("Event throttle increased to "+ge+"ms"))}function Se(s,_){for(var H=_.length,ae=0,he=0,xe=Ze(s),Fe=y(),Ie=0;Ie<H;Ie++)ae=_[Ie].getBoundingClientRect()[s]+re("margin"+xe,_[Ie]),ae>he&&(he=ae);return Fe=y()-Fe,d("Parsed "+H+" HTML elements"),d("Element position calculated in "+Fe+"ms"),de(Fe),he}function ke(s){return[s.bodyOffset(),s.bodyScroll(),s.documentElementOffset(),s.documentElementScroll()]}function Pe(s,_){function H(){return z("No tagged elements ("+_+") found on page"),document.querySelectorAll("body *")}var ae=document.querySelectorAll("["+_+"]");return ae.length===0&&H(),Se(s,ae)}function Be(){return document.querySelectorAll("body *")}var Xe={bodyOffset:function(){return document.body.offsetHeight+re("marginTop")+re("marginBottom")},offset:function(){return Xe.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return Le.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,ke(Xe))},min:function(){return Math.min.apply(null,ke(Xe))},grow:function(){return Xe.max()},lowestElement:function(){return Math.max(Xe.bodyOffset(),Se("bottom",Be()))},taggedElement:function(){return Pe("bottom","data-iframe-height")}},ct={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return Le.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(ct.bodyScroll(),ct.documentElementScroll())},max:function(){return Math.max.apply(null,ke(ct))},min:function(){return Math.min.apply(null,ke(ct))},rightMostElement:function(){return Se("right",Be())},taggedElement:function(){return Pe("right","data-iframe-width")}};function vt(s,_,H,ae){function he(){I=Ae,ye=Te,dt(I,ye,s)}function xe(){function Qe(st,bt){var rn=Math.abs(st-bt)<=X;return!rn}return Ae=o!==H?H:Xe[D](),Te=o!==ae?ae:ct[ve](),Qe(I,Ae)||m&&Qe(ye,Te)}function Fe(){return!(s in{init:1,interval:1,size:1})}function Ie(){return D in N||m&&ve in N}function _e(){d("No change in size detected")}function me(){Fe()&&Ie()?Et(_):s in{interval:1}||_e()}var Ae,Te;xe()||s==="init"?(Tt(),he()):me()}var Ct=ot(vt);function pt(s,_,H,ae){function he(){s in{reset:1,resetPage:1,init:1}||d("Trigger event: "+_)}function xe(){return B&&s in C}xe()?d("Trigger event cancelled: "+s):(he(),Ct(s,_,H,ae))}function Tt(){B||(B=!0,d("Trigger event lock on")),clearTimeout(V),V=setTimeout(function(){B=!1,d("Trigger event lock off"),d("--")},M)}function at(s){I=Xe[D](),ye=ct[ve](),dt(I,ye,s)}function Et(s){var _=D;D=i,d("Reset trigger event: "+s),Tt(),at("reset"),D=_}function dt(s,_,H,ae,he){function xe(){o===he?he=G:d("Message targetOrigin: "+he)}function Fe(){var Ie=s+":"+_,_e=R+":"+Ie+":"+H+(o!==ae?":"+ae:"");d("Sending message to host page ("+_e+")"),S.postMessage(ze+_e,he)}w===!0&&(xe(),Fe())}function T(s){var _={init:function(){function Ae(){J=s.data,S=s.source,ee(),W=!1,setTimeout(function(){a=!1},M)}document.readyState==="interactive"||document.readyState==="complete"?Ae():(d("Waiting for page ready"),Ne(window,"readystatechange",_.initFromParent))},reset:function(){a?d("Page reset ignored by init"):(d("Page size reset by host page"),at("resetPage"))},resize:function(){pt("resizeParent","Parent window requested size check")},moveToAnchor:function(){ie.findTarget(he())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var Ae=he();d("PageInfoFromParent called from parent: "+Ae),He(JSON.parse(Ae)),d(" --")},message:function(){var Ae=he();d("MessageCallback called from parent: "+Ae),Me(JSON.parse(Ae)),d(" --")}};function H(){return ze===(""+s.data).substr(0,oe)}function ae(){return s.data.split("]")[1].split(":")[0]}function he(){return s.data.substr(s.data.indexOf(":")+1)}function xe(){return!t.exports&&"iFrameResize"in window}function Fe(){return s.data.split(":")[2]in{true:1,false:1}}function Ie(){var me=ae();me in _?_[me]():!xe()&&!Fe()&&z("Unexpected message ("+s.data+")")}function _e(){W===!1?Ie():Fe()?_.init():d('Ignored message of type "'+ae()+'". Received before initialization.')}H()&&_e()}function L(){document.readyState!=="loading"&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}Ne(window,"message",T),L()})()},28:(t,o)=>{var E,A,U;(function(F){if(typeof window>"u")return;var x=0,p=!1,b=!1,m="message",C=m.length,M="[iFrameSizer]",W=M.length,I=null,i=window.requestAnimationFrame,D={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},a={},J=null,ie={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){w("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}};function Y(d,z,ee){"addEventListener"in window?d.addEventListener(z,ee,!1):"attachEvent"in window&&d.attachEvent("on"+z,ee)}function we(d,z,ee){"removeEventListener"in window?d.removeEventListener(z,ee,!1):"detachEvent"in window&&d.detachEvent("on"+z,ee)}function pe(){var d=["moz","webkit","o","ms"],z;for(z=0;z<d.length&&!i;z+=1)i=window[d[z]+"RequestAnimationFrame"];i||N("setup","RequestAnimationFrame not supported")}function ze(d){var z="Host page: "+d;return window.top!==window.self&&(window.parentIFrame&&window.parentIFrame.getId?z=window.parentIFrame.getId()+": "+d:z="Nested host page: "+d),z}function oe(d){return M+"["+ze(d)+"]"}function R(d){return a[d]?a[d].log:p}function N(d,z){S("log",d,z,R(d))}function g(d,z){S("info",d,z,R(d))}function w(d,z){S("warn",d,z,!0)}function S(d,z,ee,K){K===!0&&typeof window.console=="object"&&console[d](oe(z),ee)}function G(d){function z(){function re(){ve(te),ge(Q),je("resizedCallback",te)}K("Height"),K("Width"),Oe(re,te,"init")}function ee(){var re=ue.substr(W).split(":");return{iframe:a[re[0]]&&a[re[0]].iframe,id:re[0],height:re[1],width:re[2],type:re[3]}}function K(re){var de=Number(a[Q]["max"+re]),Se=Number(a[Q]["min"+re]),ke=re.toLowerCase(),Pe=Number(te[ke]);N(Q,"Checking "+ke+" is in range "+Se+"-"+de),Pe<Se&&(Pe=Se,N(Q,"Set "+ke+" to min value")),Pe>de&&(Pe=de,N(Q,"Set "+ke+" to max value")),te[ke]=""+Pe}function se(){function re(){function ke(){var Be=0,Xe=!1;for(N(Q,"Checking connection is from allowed list of origins: "+Se);Be<Se.length;Be++)if(Se[Be]===de){Xe=!0;break}return Xe}function Pe(){var Be=a[Q]&&a[Q].remoteHost;return N(Q,"Checking connection is from: "+Be),de===Be}return Se.constructor===Array?ke():Pe()}var de=d.origin,Se=a[Q]&&a[Q].checkOrigin;if(Se&&""+de!="null"&&!re())throw new Error("Unexpected message received from: "+de+" for "+te.iframe.id+". Message was: "+d.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function be(){return M===(""+ue).substr(0,W)&&ue.substr(W).split(":")[0]in a}function $e(){var re=te.type in{true:1,false:1,undefined:1};return re&&N(Q,"Ignoring init message from meta parent page"),re}function fe(re){return ue.substr(ue.indexOf(":")+C+re)}function Ue(re){N(Q,"MessageCallback passed: {iframe: "+te.iframe.id+", message: "+re+"}"),je("messageCallback",{iframe:te.iframe,message:JSON.parse(re)}),N(Q,"--")}function v(){var re=document.body.getBoundingClientRect(),de=te.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:de.height,iframeWidth:de.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(de.top-re.top,10),offsetLeft:parseInt(de.left-re.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset})}function q(re,de){function Se(){Me("Send Page Info","pageInfo:"+v(),re,de)}Le(Se,32)}function c(){function re(Pe,Be){function Xe(){a[ke]?q(a[ke].iframe,ke):de()}["scroll","resize"].forEach(function(ct){N(ke,Pe+ct+" listener for sendPageInfo"),Be(window,ct,Xe)})}function de(){re("Remove ",we)}function Se(){re("Add ",Y)}var ke=Q;Se(),a[ke]&&(a[ke].stopPageInfo=de)}function k(){a[Q]&&a[Q].stopPageInfo&&(a[Q].stopPageInfo(),delete a[Q].stopPageInfo)}function h(){var re=!0;return te.iframe===null&&(w(Q,"IFrame ("+te.id+") not found"),re=!1),re}function O(re){var de=re.getBoundingClientRect();return V(Q),{x:Math.floor(Number(de.left)+Number(I.x)),y:Math.floor(Number(de.top)+Number(I.y))}}function P(re){function de(){I=Be,$(),N(Q,"--")}function Se(){return{x:Number(te.width)+Pe.x,y:Number(te.height)+Pe.y}}function ke(){window.parentIFrame?window.parentIFrame["scrollTo"+(re?"Offset":"")](Be.x,Be.y):w(Q,"Unable to scroll to requested position, window.parentIFrame not found")}var Pe=re?O(te.iframe):{x:0,y:0},Be=Se();N(Q,"Reposition requested from iFrame (offset x:"+Pe.x+" y:"+Pe.y+")"),window.top!==window.self?ke():de()}function $(){je("scrollCallback",I)!==!1?ge(Q):ye()}function Ee(re){function de(){var Xe=O(Be);N(Q,"Moving to in page link (#"+ke+") at x: "+Xe.x+" y: "+Xe.y),I={x:Xe.x,y:Xe.y},$(),N(Q,"--")}function Se(){window.parentIFrame?window.parentIFrame.moveToAnchor(ke):N(Q,"In page link #"+ke+" not found and window.parentIFrame not found")}var ke=re.split("#")[1]||"",Pe=decodeURIComponent(ke),Be=document.getElementById(Pe)||document.getElementsByName(Pe)[0];Be?de():window.top!==window.self?Se():N(Q,"In page link #"+ke+" not found")}function je(re,de){return X(Q,re,de)}function tt(){switch(a[Q]&&a[Q].firstRun&&qe(),te.type){case"close":a[Q].closeRequestCallback?X(Q,"closeRequestCallback",a[Q].iframe):B(te.iframe);break;case"message":Ue(fe(6));break;case"scrollTo":P(!1);break;case"scrollToOffset":P(!0);break;case"pageInfo":q(a[Q]&&a[Q].iframe,Q),c();break;case"pageInfoStop":k();break;case"inPageLink":Ee(fe(9));break;case"reset":We(te);break;case"init":z(),je("initCallback",te.iframe);break;default:z()}}function gt(re){var de=!0;return a[re]||(de=!1,w(te.type+" No settings for "+re+". Message was: "+ue)),de}function Ye(){for(var re in a)Me("iFrame requested init",Ce(re),document.getElementById(re),re)}function qe(){a[Q]&&(a[Q].firstRun=!1)}var ue=d.data,te={},Q=null;ue==="[iFrameResizerChild]Ready"?Ye():be()?(te=ee(),Q=te.id,a[Q]&&(a[Q].loaded=!0),!$e()&&gt(Q)&&(N(Q,"Received: "+ue),h()&&se()&&tt())):g(Q,"Ignored: "+ue)}function X(d,z,ee){var K=null,se=null;if(a[d])if(K=a[d][z],typeof K=="function")se=K(ee);else throw new TypeError(z+" on iFrame["+d+"] is not a function");return se}function B(d){var z=d.id;N(z,"Removing iFrame: "+z),d.parentNode&&d.parentNode.removeChild(d),X(z,"closedCallback",z),N(z,"--"),delete a[z]}function V(d){I===null&&(I={x:window.pageXOffset!==F?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==F?window.pageYOffset:document.documentElement.scrollTop},N(d,"Get page position: "+I.x+","+I.y))}function ge(d){I!==null&&(window.scrollTo(I.x,I.y),N(d,"Set page position: "+I.x+","+I.y),ye())}function ye(){I=null}function We(d){function z(){ve(d),Me("reset","reset",d.iframe,d.id)}N(d.id,"Size reset requested by "+(d.type==="init"?"host page":"iFrame")),V(d.id),Oe(z,d,"reset")}function ve(d){function z(be){d.iframe.style[be]=d[be]+"px",N(d.id,"IFrame ("+se+") "+be+" set to "+d[be]+"px")}function ee(be){!b&&d[be]==="0"&&(b=!0,N(se,"Hidden iFrame detected, creating visibility listener"),Ve())}function K(be){z(be),ee(be)}var se=d.iframe.id;a[se]&&(a[se].sizeHeight&&K("height"),a[se].sizeWidth&&K("width"))}function Oe(d,z,ee){ee!==z.type&&i?(N(z.id,"Requesting animation frame"),i(d)):d()}function Me(d,z,ee,K,se){function be(){var q=a[K]&&a[K].targetOrigin;N(K,"["+d+"] Sending msg to iframe["+K+"] ("+z+") targetOrigin: "+q),ee.contentWindow.postMessage(M+z,q)}function $e(){w(K,"["+d+"] IFrame("+K+") not found")}function fe(){ee&&"contentWindow"in ee&&ee.contentWindow!==null?be():$e()}function Ue(){function q(){a[K]&&!a[K].loaded&&!v&&(v=!0,w(K,"IFrame has not responded within "+a[K].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ingored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}se&&a[K]&&a[K].warningTimeout&&(a[K].msgTimeout=setTimeout(q,a[K].warningTimeout))}var v=!1;K=K||ee.id,a[K]&&(fe(),Ue())}function Ce(d){return d+":"+a[d].bodyMarginV1+":"+a[d].sizeWidth+":"+a[d].log+":"+a[d].interval+":"+a[d].enablePublicMethods+":"+a[d].autoResize+":"+a[d].bodyMargin+":"+a[d].heightCalculationMethod+":"+a[d].bodyBackground+":"+a[d].bodyPadding+":"+a[d].tolerance+":"+a[d].inPageLinks+":"+a[d].resizeFrom+":"+a[d].widthCalculationMethod}function He(d,z){function ee(){function $(je){a[P][je]!==1/0&&a[P][je]!==0&&(d.style[je]=a[P][je]+"px",N(P,"Set "+je+" = "+a[P][je]+"px"))}function Ee(je){if(a[P]["min"+je]>a[P]["max"+je])throw new Error("Value for min"+je+" can not be greater than max"+je)}Ee("Height"),Ee("Width"),$("maxHeight"),$("minHeight"),$("maxWidth"),$("minWidth")}function K(){var $=z&&z.id||ie.id+x++;return document.getElementById($)!==null&&($=$+x++),$}function se($){return $===""&&(d.id=$=K(),p=(z||{}).log,N($,"Added missing iframe ID: "+$+" ("+d.src+")")),$}function be(){switch(N(P,"IFrame scrolling "+(a[P]&&a[P].scrolling?"enabled":"disabled")+" for "+P),d.style.overflow=(a[P]&&a[P].scrolling)===!1?"hidden":"auto",a[P]&&a[P].scrolling){case!0:d.scrolling="yes";break;case!1:d.scrolling="no";break;default:d.scrolling=a[P]?a[P].scrolling:"no"}}function $e(){(typeof(a[P]&&a[P].bodyMargin)=="number"||(a[P]&&a[P].bodyMargin)==="0")&&(a[P].bodyMarginV1=a[P].bodyMargin,a[P].bodyMargin=""+a[P].bodyMargin+"px")}function fe(){var $=a[P]&&a[P].firstRun,Ee=a[P]&&a[P].heightCalculationMethod in D;!$&&Ee&&We({iframe:d,height:0,width:0,type:"init"})}function Ue(){Function.prototype.bind&&a[P]&&(a[P].iframe.iFrameResizer={close:B.bind(null,a[P].iframe),resize:Me.bind(null,"Window resize","resize",a[P].iframe),moveToAnchor:function($){Me("Move to anchor","moveToAnchor:"+$,a[P].iframe,P)},sendMessage:function($){$=JSON.stringify($),Me("Send Message","message:"+$,a[P].iframe,P)}})}function v($){function Ee(){Me("iFrame.onload",$,d,F,!0),fe()}Y(d,"load",Ee),Me("init",$,d,F,!0)}function q($){if(typeof $!="object")throw new TypeError("Options is not an object")}function c($){for(var Ee in ie)ie.hasOwnProperty(Ee)&&(a[P][Ee]=$.hasOwnProperty(Ee)?$[Ee]:ie[Ee])}function k($){return $===""||$==="file://"?"*":$}function h($){$=$||{},a[P]={firstRun:!0,iframe:d,remoteHost:d.src.split("/").slice(0,3).join("/")},q($),c($),a[P]&&(a[P].targetOrigin=a[P].checkOrigin===!0?k(a[P].remoteHost):"*")}function O(){return P in a&&"iFrameResizer"in d}var P=se(d.id);O()?w(P,"Ignored iFrame, already setup."):(h(z),be(),ee(),$e(),v(Ce(P)),Ue())}function Le(d,z){J===null&&(J=setTimeout(function(){J=null,d()},z))}function Ve(){function d(){function se($e){function fe(v){return(a[$e]&&a[$e].iframe.style[v])==="0px"}function Ue(v){return v.offsetParent!==null}a[$e]&&Ue(a[$e].iframe)&&(fe("height")||fe("width"))&&Me("Visibility change","resize",a[$e].iframe,$e)}for(var be in a)se(be)}function z(se){N("window","Mutation observed: "+se[0].target+" "+se[0].type),Le(d,16)}function ee(){var se=document.querySelector("body"),be={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},$e=new K(z);$e.observe(se,be)}var K=window.MutationObserver||window.WebKitMutationObserver;K&&ee()}function Ne(d){function z(){Ze("Window "+d,"resize")}N("window","Trigger event: "+d),Le(z,16)}function et(){function d(){Ze("Tab Visable","resize")}document.visibilityState!=="hidden"&&(N("document","Trigger event: Visiblity change"),Le(d,16))}function Ze(d,z){function ee(se){return a[se]&&a[se].resizeFrom==="parent"&&a[se].autoResize&&!a[se].firstRun}for(var K in a)ee(K)&&Me(d,z,document.getElementById(K),K)}function ot(){Y(window,"message",G),Y(window,"resize",function(){Ne("resize")}),Y(document,"visibilitychange",et),Y(document,"-webkit-visibilitychange",et),Y(window,"focusin",function(){Ne("focus")}),Y(window,"focus",function(){Ne("focus")})}function y(){function d(K,se){function be(){if(se.tagName){if(se.tagName.toUpperCase()!=="IFRAME")throw new TypeError("Expected <IFRAME> tag, found <"+se.tagName+">")}else throw new TypeError("Object is not a valid DOM element")}se&&(be(),He(se,K),ee.push(se))}function z(K){K&&K.enablePublicMethods&&w("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}var ee;return pe(),ot(),function(se,be){switch(ee=[],z(se),typeof be){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(be||"iframe"),d.bind(F,se));break;case"object":d(se,be);break;default:throw new TypeError("Unexpected data type ("+typeof be+")")}return ee}}function Z(d){d.fn?d.fn.iFrameResize||(d.fn.iFrameResize=function(ee){function K(se,be){He(be,ee)}return this.filter("iframe").each(K).end()}):g("","Unable to bind to jQuery, it is not fully loaded.")}window.jQuery&&Z(window.jQuery),A=[],E=y,U=typeof E=="function"?E.apply(o,A):E,U!==F&&(t.exports=U)})()},683:(t,o,E)=>{o.iframeResizer=E(28),o.iframeResizerContentWindow=E(402)},457:t=>{var o=function(){var E=Math.floor(Math.random()*1000001),A={};function U(m,C,M,W){function I(a){for(var J=0;J<a.length;J++)if(a[J].win===m)return!0;return!1}var i=!1;if(C==="*"){for(var D in A)if(A.hasOwnProperty(D)&&D!=="*"&&typeof A[D][M]=="object"&&(i=I(A[D][M]),i))break}else A["*"]&&A["*"][M]&&(i=I(A["*"][M])),!i&&A[C]&&A[C][M]&&(i=I(A[C][M]));if(i)throw"A channel is already bound to the same window which overlaps with origin '"+C+"' and has scope '"+M+"'";typeof A[C]!="object"&&(A[C]={}),typeof A[C][M]!="object"&&(A[C][M]=[]),A[C][M].push({win:m,handler:W})}function F(m,C,M){for(var W=A[C][M],I=0;I<W.length;I++)W[I].win===m&&W.splice(I,1);A[C][M].length===0&&delete A[C][M]}function x(m){return Array.isArray?Array.isArray(m):m.constructor.toString().indexOf("Array")!=-1}var p={},b=function(m){try{var C=JSON.parse(m.data);if(typeof C!="object"||C===null)throw"malformed"}catch{return}var M=m.source,W=m.origin,I,i,D;if(typeof C.method=="string"){var a=C.method.split("::");a.length==2?(I=a[0],D=a[1]):D=C.method}if(typeof C.id<"u"&&(i=C.id),typeof D=="string"){var J=!1;if(A[W]&&A[W][I]){for(var ie=0;ie<A[W][I].length;ie++)if(A[W][I][ie].win===M){A[W][I][ie].handler(W,D,C),J=!0;break}}if(!J&&A["*"]&&A["*"][I]){for(var ie=0;ie<A["*"][I].length;ie++)if(A["*"][I][ie].win===M){A["*"][I][ie].handler(W,D,C);break}}}else typeof i<"u"&&p[i]&&p[i](W,D,C)};return window.addEventListener?window.addEventListener("message",b,!1):window.attachEvent&&window.attachEvent("onmessage",b),{build:function(m){var C=function(g){if(m.debugOutput&&window.console&&window.console.log){try{typeof g!="string"&&(g=JSON.stringify(g))}catch{}console.log("["+I+"] "+g)}};if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if(typeof m!="object")throw"Channel build invoked without a proper object argument";if(!m.window||!m.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===m.window)throw"target window is same as present window -- not allowed";var M=!1;if(typeof m.origin=="string"){var W;m.origin==="*"?M=!0:(W=m.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))!==null&&(m.origin=W[0].toLowerCase(),M=!0)}if(!M)throw"Channel.build() called with an invalid origin";if(typeof m.scope<"u"){if(typeof m.scope!="string")throw"scope, when specified, must be a string";if(m.scope.split("::").length>1)throw"scope may not contain double colons: '::'"}var I=function(){for(var g="",w="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",S=0;S<5;S++)g+=w.charAt(Math.floor(Math.random()*w.length));return g}(),i={},D={},a={},J=!1,ie=[],Y=function(g,w,S){var G=!1,X=!1;return{origin:w,invoke:function(B,V){if(!a[g])throw"attempting to invoke a callback of a nonexistent transaction: "+g;for(var ge=!1,ye=0;ye<S.length;ye++)if(B===S[ye]){ge=!0;break}if(!ge)throw"request supports no such callback '"+B+"'";oe({id:g,callback:B,params:V})},error:function(B,V){if(X=!0,!a[g])throw"error called for nonexistent message: "+g;delete a[g],oe({id:g,error:B,message:V})},complete:function(B){if(X=!0,!a[g])throw"complete called for nonexistent message: "+g;delete a[g],oe({id:g,result:B})},delayReturn:function(B){return typeof B=="boolean"&&(G=B===!0),G},completed:function(){return X}}},we=function(g,w,S){return window.setTimeout(function(){if(D[g]){var G="timeout ("+w+"ms) exceeded on method '"+S+"'";(0,D[g].error)("timeout_error",G),delete D[g],delete p[g]}},w)},pe=function(g,w,S){if(typeof m.gotMessageObserver=="function")try{m.gotMessageObserver(g,S)}catch(Ce){C("gotMessageObserver() raised an exception: "+Ce.toString())}if(S.id&&w){if(i[w]){var G=Y(S.id,g,S.callbacks?S.callbacks:[]);a[S.id]={};try{if(S.callbacks&&x(S.callbacks)&&S.callbacks.length>0)for(var X=0;X<S.callbacks.length;X++){for(var B=S.callbacks[X],V=S.params,ge=B.split("/"),ye=0;ye<ge.length-1;ye++){var We=ge[ye];typeof V[We]!="object"&&(V[We]={}),V=V[We]}V[ge[ge.length-1]]=function(){var Ce=B;return function(He){return G.invoke(Ce,He)}}()}var ve=i[w](G,S.params);!G.delayReturn()&&!G.completed()&&G.complete(ve)}catch(Ce){var Oe="runtime_error",Me=null;if(typeof Ce=="string"?Me=Ce:typeof Ce=="object"&&(Ce&&x(Ce)&&Ce.length==2?(Oe=Ce[0],Me=Ce[1]):typeof Ce.error=="string"&&(Oe=Ce.error,Ce.message?typeof Ce.message=="string"?Me=Ce.message:Ce=Ce.message:Me="")),Me===null)try{Me=JSON.stringify(Ce),typeof Me>"u"&&(Me=Ce.toString())}catch{Me=Ce.toString()}G.error(Oe,Me)}}}else S.id&&S.callback?!D[S.id]||!D[S.id].callbacks||!D[S.id].callbacks[S.callback]?C("ignoring invalid callback, id:"+S.id+" ("+S.callback+")"):D[S.id].callbacks[S.callback](S.params):S.id?D[S.id]?(S.error?(0,D[S.id].error)(S.error,S.message):S.result!==void 0?(0,D[S.id].success)(S.result):(0,D[S.id].success)(),delete D[S.id],delete p[S.id]):C("ignoring invalid response: "+S.id):w&&i[w]&&i[w]({origin:g},S.params)};U(m.window,m.origin,typeof m.scope=="string"?m.scope:"",pe);var ze=function(g){return typeof m.scope=="string"&&m.scope.length&&(g=[m.scope,g].join("::")),g},oe=function(g,w){if(!g)throw"postMessage called with null message";var S=J?"post  ":"queue ";if(C(S+" message: "+JSON.stringify(g)),!w&&!J)ie.push(g);else{if(typeof m.postMessageObserver=="function")try{m.postMessageObserver(m.origin,g)}catch(G){C("postMessageObserver() raised an exception: "+G.toString())}m.window.postMessage(JSON.stringify(g),m.origin)}},R=function(g,w){if(C("ready msg received"),J)throw"received ready message while in ready state.  help!";for(w==="ping"?I+="-R":I+="-L",N.unbind("__ready"),J=!0,C("ready msg accepted."),w==="ping"&&N.notify({method:"__ready",params:"pong"});ie.length;)oe(ie.pop());typeof m.onReady=="function"&&m.onReady(N)},N={unbind:function(g){if(i[g]){if(!delete i[g])throw"can't delete method: "+g;return!0}return!1},bind:function(g,w){if(!g||typeof g!="string")throw"'method' argument to bind must be string";if(!w||typeof w!="function")throw"callback missing from bind params";if(i[g])throw"method '"+g+"' is already bound!";return i[g]=w,this},call:function(g){if(!g)throw"missing arguments to call function";if(!g.method||typeof g.method!="string")throw"'method' argument to call must be string";if(!g.success||typeof g.success!="function")throw"'success' callback missing from call";var w={},S=[],G=[],X=function(V,ge){if(G.indexOf(ge)>=0)throw"params cannot be a recursive data structure";if(G.push(ge),typeof ge=="object"){for(var ye in ge)if(ge.hasOwnProperty(ye)){var We=V+(V.length?"/":"")+ye;typeof ge[ye]=="function"?(w[We]=ge[ye],S.push(We),delete ge[ye]):typeof ge[ye]=="object"&&ge[ye]!==null&&X(We,ge[ye])}}};X("",g.params);var B={id:E,method:ze(g.method),params:g.params};S.length&&(B.callbacks=S),g.timeout&&we(E,g.timeout,ze(g.method)),D[E]={callbacks:w,error:g.error,success:g.success},p[E]=pe,E++,oe(B)},notify:function(g){if(!g)throw"missing arguments to notify function";if(!g.method||typeof g.method!="string")throw"'method' argument to notify must be string";oe({method:ze(g.method),params:g.params})},destroy:function(){F(m.window,m.origin,typeof m.scope=="string"?m.scope:""),window.removeEventListener?window.removeEventListener("message",pe,!1):window.detachEvent&&window.detachEvent("onmessage",pe),J=!1,i={},a={},D={},m.origin=null,ie=[],C("channel destroyed"),I=""}};return N.bind("__ready",R),setTimeout(function(){oe({method:ze("__ready"),params:"ping"},!0)},0),N}}}();t.exports=o},705:(t,o,E)=>{var A=E(639),U=A.Symbol;t.exports=U},239:(t,o,E)=>{var A=E(705),U=E(607),F=E(333),x="[object Null]",p="[object Undefined]",b=A?A.toStringTag:void 0;function m(C){return C==null?C===void 0?p:x:b&&b in Object(C)?U(C):F(C)}t.exports=m},957:(t,o,E)=>{var A=typeof E.g=="object"&&E.g&&E.g.Object===Object&&E.g;t.exports=A},924:(t,o,E)=>{var A=E(569),U=A(Object.getPrototypeOf,Object);t.exports=U},607:(t,o,E)=>{var A=E(705),U=Object.prototype,F=U.hasOwnProperty,x=U.toString,p=A?A.toStringTag:void 0;function b(m){var C=F.call(m,p),M=m[p];try{m[p]=void 0;var W=!0}catch{}var I=x.call(m);return W&&(C?m[p]=M:delete m[p]),I}t.exports=b},333:t=>{var o=Object.prototype,E=o.toString;function A(U){return E.call(U)}t.exports=A},569:t=>{function o(E,A){return function(U){return E(A(U))}}t.exports=o},639:(t,o,E)=>{var A=E(957),U=typeof self=="object"&&self&&self.Object===Object&&self,F=A||U||Function("return this")();t.exports=F},469:t=>{var o=Array.isArray;t.exports=o},5:t=>{function o(E){return E!=null&&typeof E=="object"}t.exports=o},630:(t,o,E)=>{var A=E(239),U=E(924),F=E(5),x="[object Object]",p=Function.prototype,b=Object.prototype,m=p.toString,C=b.hasOwnProperty,M=m.call(Object);function W(I){if(!F(I)||A(I)!=x)return!1;var i=U(I);if(i===null)return!0;var D=C.call(i,"constructor")&&i.constructor;return typeof D=="function"&&D instanceof D&&m.call(D)==M}t.exports=W},37:(t,o,E)=>{var A=E(239),U=E(469),F=E(5),x="[object String]";function p(b){return typeof b=="string"||!U(b)&&F(b)&&A(b)==x}t.exports=p},353:t=>{function o(E){return E===void 0}t.exports=o}},l={};function r(t){var o=l[t];if(o!==void 0)return o.exports;var E=l[t]={exports:{}};return e[t].call(E.exports,E,E.exports,r),E.exports}r.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var n=r(541);u.Addon=n})()})(Qt);(()=>{var u={669:(r,n,t)=>{var o=t(218),E=C(o),A=function(){function D(a,J){for(var ie=0;ie<J.length;ie++){var Y=J[ie];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(a,Y.key,Y)}}return function(a,J,ie){return J&&D(a.prototype,J),ie&&D(a,ie),a}}(),U=t(457),F=C(U),x=t(729),p=C(x),b=t(702),m=t(303);function C(D){return D&&D.__esModule?D:{default:D}}function M(D,a){if(!(D instanceof a))throw new TypeError("Cannot call a class as a function")}function W(D,a){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:D}function I(D,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);D.prototype=Object.create(a&&a.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(D,a):D.__proto__=a)}var i=function(D){I(a,D);function a(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};M(this,a);var ie=W(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));if(ie.options=J,!J.iframe)throw new Error("Iframe not defined");return(0,m.iframeResizer)({checkOrigin:!0,heightCalculationMethod:window.ieVersion<=10?"max":"lowestElement",resizeFrom:"child",resizedCallback:function(we){ie.emit("iframeResized",we)}},J.iframe),ie.channel=F.default.build({window:J.iframe.contentWindow,origin:J.origin||"*",scope:J.id||J.iframe.contentWindow.location.origin,postMessageObserver:function(we,pe){ie.emit("postMessage",we,pe)},gotMessageObserver:function(we,pe){ie.emit("gotMessage",we,pe)}}),["saveData","request","addTransaction","editTransaction","addInstitution","addInvestment","editInstitution","editAsset","editLiability","deleteInstitution","deleteAsset","deleteLiability","downloadDocument","upgradePremium","getSharings","switchUser"].forEach(function(Y){ie.channel.bind(Y,function(we,pe){var ze=Y,oe=pe;we.delayReturn(!0);var R=function(g,w){return g?we.error(g):we.complete(w)};ie.emit(ze,oe||R,oe?R:void 0)})}),ie.channel.call({method:"init",params:J.options,success:function(we){ie.emit("init",we)}}),ie}return A(a,[{key:"trigger",value:function(ie,Y){var we=this,pe={eventName:ie};return Y&&(pe.eventData=Y),new b.Promise(function(ze,oe){we.channel.call({method:"_event",params:pe,success:ze,error:oe})})}},{key:"update",value:function(ie){var Y=this;return new b.Promise(function(we,pe){if(!(0,E.default)(ie))throw new Error("Data must be an object");Y.channel.call({method:"update",params:ie,success:we,error:pe})})}},{key:"reload",value:function(){var ie=this;return new b.Promise(function(Y,we){ie.channel.call({method:"reload",success:Y,error:we})})}},{key:"destroy",value:function(){this.channel.destroy()}}]),a}(p.default);r.exports=i},702:function(r,n,t){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(o,E){r.exports=E()})(this,function(){function o(v){var q=typeof v;return v!==null&&(q==="object"||q==="function")}function E(v){return typeof v=="function"}var A=void 0;Array.isArray?A=Array.isArray:A=function(v){return Object.prototype.toString.call(v)==="[object Array]"};var U=A,F=0,x=void 0,p=void 0,b=function(q,c){pe[F]=q,pe[F+1]=c,F+=2,F===2&&(p?p(ze):R())};function m(v){p=v}function C(v){b=v}var M=typeof window<"u"?window:void 0,W=M||{},I=W.MutationObserver||W.WebKitMutationObserver,i=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",D=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function a(){return function(){return process.nextTick(ze)}}function J(){return typeof x<"u"?function(){x(ze)}:we()}function ie(){var v=0,q=new I(ze),c=document.createTextNode("");return q.observe(c,{characterData:!0}),function(){c.data=v=++v%2}}function Y(){var v=new MessageChannel;return v.port1.onmessage=ze,function(){return v.port2.postMessage(0)}}function we(){var v=setTimeout;return function(){return v(ze,1)}}var pe=new Array(1e3);function ze(){for(var v=0;v<F;v+=2){var q=pe[v],c=pe[v+1];q(c),pe[v]=void 0,pe[v+1]=void 0}F=0}function oe(){try{var v=Function("return this")().require("vertx");return x=v.runOnLoop||v.runOnContext,J()}catch{return we()}}var R=void 0;i?R=a():I?R=ie():D?R=Y():M===void 0?R=oe():R=we();function N(v,q){var c=this,k=new this.constructor(S);k[w]===void 0&&Z(k);var h=c._state;if(h){var O=arguments[h-1];b(function(){return et(h,k,O,c._result)})}else Ve(c,k,v,q);return k}function g(v){var q=this;if(v&&typeof v=="object"&&v.constructor===q)return v;var c=new q(S);return Me(c,v),c}var w=Math.random().toString(36).substring(2);function S(){}var G=void 0,X=1,B=2;function V(){return new TypeError("You cannot resolve a promise with itself")}function ge(){return new TypeError("A promises callback cannot return that same promise.")}function ye(v,q,c,k){try{v.call(q,c,k)}catch(h){return h}}function We(v,q,c){b(function(k){var h=!1,O=ye(c,q,function(P){h||(h=!0,q!==P?Me(k,P):He(k,P))},function(P){h||(h=!0,Le(k,P))},"Settle: "+(k._label||" unknown promise"));!h&&O&&(h=!0,Le(k,O))},v)}function ve(v,q){q._state===X?He(v,q._result):q._state===B?Le(v,q._result):Ve(q,void 0,function(c){return Me(v,c)},function(c){return Le(v,c)})}function Oe(v,q,c){q.constructor===v.constructor&&c===N&&q.constructor.resolve===g?ve(v,q):c===void 0?He(v,q):E(c)?We(v,q,c):He(v,q)}function Me(v,q){if(v===q)Le(v,V());else if(o(q)){var c=void 0;try{c=q.then}catch(k){Le(v,k);return}Oe(v,q,c)}else He(v,q)}function Ce(v){v._onerror&&v._onerror(v._result),Ne(v)}function He(v,q){v._state===G&&(v._result=q,v._state=X,v._subscribers.length!==0&&b(Ne,v))}function Le(v,q){v._state===G&&(v._state=B,v._result=q,b(Ce,v))}function Ve(v,q,c,k){var h=v._subscribers,O=h.length;v._onerror=null,h[O]=q,h[O+X]=c,h[O+B]=k,O===0&&v._state&&b(Ne,v)}function Ne(v){var q=v._subscribers,c=v._state;if(q.length!==0){for(var k=void 0,h=void 0,O=v._result,P=0;P<q.length;P+=3)k=q[P],h=q[P+c],k?et(c,k,h,O):h(O);v._subscribers.length=0}}function et(v,q,c,k){var h=E(c),O=void 0,P=void 0,$=!0;if(h){try{O=c(k)}catch(Ee){$=!1,P=Ee}if(q===O){Le(q,ge());return}}else O=k;q._state!==G||(h&&$?Me(q,O):$===!1?Le(q,P):v===X?He(q,O):v===B&&Le(q,O))}function Ze(v,q){try{q(function(k){Me(v,k)},function(k){Le(v,k)})}catch(c){Le(v,c)}}var ot=0;function y(){return ot++}function Z(v){v[w]=ot++,v._state=void 0,v._result=void 0,v._subscribers=[]}function d(){return new Error("Array Methods must be provided an Array")}var z=function(){function v(q,c){this._instanceConstructor=q,this.promise=new q(S),this.promise[w]||Z(this.promise),U(c)?(this.length=c.length,this._remaining=c.length,this._result=new Array(this.length),this.length===0?He(this.promise,this._result):(this.length=this.length||0,this._enumerate(c),this._remaining===0&&He(this.promise,this._result))):Le(this.promise,d())}return v.prototype._enumerate=function(c){for(var k=0;this._state===G&&k<c.length;k++)this._eachEntry(c[k],k)},v.prototype._eachEntry=function(c,k){var h=this._instanceConstructor,O=h.resolve;if(O===g){var P=void 0,$=void 0,Ee=!1;try{P=c.then}catch(tt){Ee=!0,$=tt}if(P===N&&c._state!==G)this._settledAt(c._state,k,c._result);else if(typeof P!="function")this._remaining--,this._result[k]=c;else if(h===fe){var je=new h(S);Ee?Le(je,$):Oe(je,c,P),this._willSettleAt(je,k)}else this._willSettleAt(new h(function(tt){return tt(c)}),k)}else this._willSettleAt(O(c),k)},v.prototype._settledAt=function(c,k,h){var O=this.promise;O._state===G&&(this._remaining--,c===B?Le(O,h):this._result[k]=h),this._remaining===0&&He(O,this._result)},v.prototype._willSettleAt=function(c,k){var h=this;Ve(c,void 0,function(O){return h._settledAt(X,k,O)},function(O){return h._settledAt(B,k,O)})},v}();function ee(v){return new z(this,v).promise}function K(v){var q=this;return U(v)?new q(function(c,k){for(var h=v.length,O=0;O<h;O++)q.resolve(v[O]).then(c,k)}):new q(function(c,k){return k(new TypeError("You must pass an array to race."))})}function se(v){var q=this,c=new q(S);return Le(c,v),c}function be(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function $e(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var fe=function(){function v(q){this[w]=y(),this._result=this._state=void 0,this._subscribers=[],S!==q&&(typeof q!="function"&&be(),this instanceof v?Ze(this,q):$e())}return v.prototype.catch=function(c){return this.then(null,c)},v.prototype.finally=function(c){var k=this,h=k.constructor;return E(c)?k.then(function(O){return h.resolve(c()).then(function(){return O})},function(O){return h.resolve(c()).then(function(){throw O})}):k.then(c,c)},v}();fe.prototype.then=N,fe.all=ee,fe.race=K,fe.resolve=g,fe.reject=se,fe._setScheduler=m,fe._setAsap=C,fe._asap=b;function Ue(){var v=void 0;if(typeof t.g<"u")v=t.g;else if(typeof self<"u")v=self;else try{v=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var q=v.Promise;if(q){var c=null;try{c=Object.prototype.toString.call(q.resolve())}catch{}if(c==="[object Promise]"&&!q.cast)return}v.Promise=fe}return fe.polyfill=Ue,fe.Promise=fe,fe})},729:r=>{var n=Object.prototype.hasOwnProperty,t="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(t=!1));function E(x,p,b){this.fn=x,this.context=p,this.once=b||!1}function A(x,p,b,m,C){if(typeof b!="function")throw new TypeError("The listener must be a function");var M=new E(b,m||x,C),W=t?t+p:p;return x._events[W]?x._events[W].fn?x._events[W]=[x._events[W],M]:x._events[W].push(M):(x._events[W]=M,x._eventsCount++),x}function U(x,p){--x._eventsCount===0?x._events=new o:delete x._events[p]}function F(){this._events=new o,this._eventsCount=0}F.prototype.eventNames=function(){var p=[],b,m;if(this._eventsCount===0)return p;for(m in b=this._events)n.call(b,m)&&p.push(t?m.slice(1):m);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(b)):p},F.prototype.listeners=function(p){var b=t?t+p:p,m=this._events[b];if(!m)return[];if(m.fn)return[m.fn];for(var C=0,M=m.length,W=new Array(M);C<M;C++)W[C]=m[C].fn;return W},F.prototype.listenerCount=function(p){var b=t?t+p:p,m=this._events[b];return m?m.fn?1:m.length:0},F.prototype.emit=function(p,b,m,C,M,W){var I=t?t+p:p;if(!this._events[I])return!1;var i=this._events[I],D=arguments.length,a,J;if(i.fn){switch(i.once&&this.removeListener(p,i.fn,void 0,!0),D){case 1:return i.fn.call(i.context),!0;case 2:return i.fn.call(i.context,b),!0;case 3:return i.fn.call(i.context,b,m),!0;case 4:return i.fn.call(i.context,b,m,C),!0;case 5:return i.fn.call(i.context,b,m,C,M),!0;case 6:return i.fn.call(i.context,b,m,C,M,W),!0}for(J=1,a=new Array(D-1);J<D;J++)a[J-1]=arguments[J];i.fn.apply(i.context,a)}else{var ie=i.length,Y;for(J=0;J<ie;J++)switch(i[J].once&&this.removeListener(p,i[J].fn,void 0,!0),D){case 1:i[J].fn.call(i[J].context);break;case 2:i[J].fn.call(i[J].context,b);break;case 3:i[J].fn.call(i[J].context,b,m);break;case 4:i[J].fn.call(i[J].context,b,m,C);break;default:if(!a)for(Y=1,a=new Array(D-1);Y<D;Y++)a[Y-1]=arguments[Y];i[J].fn.apply(i[J].context,a)}}return!0},F.prototype.on=function(p,b,m){return A(this,p,b,m,!1)},F.prototype.once=function(p,b,m){return A(this,p,b,m,!0)},F.prototype.removeListener=function(p,b,m,C){var M=t?t+p:p;if(!this._events[M])return this;if(!b)return U(this,M),this;var W=this._events[M];if(W.fn)W.fn===b&&(!C||W.once)&&(!m||W.context===m)&&U(this,M);else{for(var I=0,i=[],D=W.length;I<D;I++)(W[I].fn!==b||C&&!W[I].once||m&&W[I].context!==m)&&i.push(W[I]);i.length?this._events[M]=i.length===1?i[0]:i:U(this,M)}return this},F.prototype.removeAllListeners=function(p){var b;return p?(b=t?t+p:p,this._events[b]&&U(this,b)):(this._events=new o,this._eventsCount=0),this},F.prototype.off=F.prototype.removeListener,F.prototype.addListener=F.prototype.on,F.prefixed=t,F.EventEmitter=F,r.exports=F},303:(r,n,t)=>{r.exports=t(683)},402:r=>{(function(n){if(typeof window>"u")return;var t=!0,o=10,E="",A=0,U="",F=null,x="",p=!1,b={resize:1,click:1},m=128,C=!0,M=1,W="bodyOffset",I=W,i=!0,D="",a={},J=32,ie=null,Y=!1,we="[iFrameSizer]",pe=we.length,ze="",oe={max:1,min:1,bodyScroll:1,documentElementScroll:1},R="child",N=!0,g=window.parent,w="*",S=0,G=!1,X=null,B=16,V=1,ge="scroll",ye=ge,We=window,ve=function(){Z("MessageCallback function not defined")},Oe=function(){},Me=function(){},Ce={height:function(){return Z("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return Z("Custom width calculation function not defined"),document.body.scrollWidth}},He={};function Le(T,L,s){"addEventListener"in window?T.addEventListener(L,s,!1):"attachEvent"in window&&T.attachEvent("on"+L,s)}function Ve(T,L,s){"removeEventListener"in window?T.removeEventListener(L,s,!1):"detachEvent"in window&&T.detachEvent("on"+L,s)}function Ne(T){return T.charAt(0).toUpperCase()+T.slice(1)}function et(T){var L,s,_,H=null,ae=0,he=function(){ae=Ze(),H=null,_=T.apply(L,s),H||(L=s=null)};return function(){var xe=Ze();ae||(ae=xe);var Fe=B-(xe-ae);return L=this,s=arguments,Fe<=0||Fe>B?(H&&(clearTimeout(H),H=null),ae=xe,_=T.apply(L,s),H||(L=s=null)):H||(H=setTimeout(he,Fe)),_}}var Ze=Date.now||function(){return new Date().getTime()};function ot(T){return we+"["+ze+"] "+T}function y(T){Y&&typeof window.console=="object"&&console.log(ot(T))}function Z(T){typeof window.console=="object"&&console.warn(ot(T))}function d(){z(),y("Initialising iFrame ("+location.href+")"),ee(),be(),se("background",E),se("padding",x),je(),q(),c(),$e(),gt(),k(),a=tt(),vt("init","Init message from host page"),Oe()}function z(){function T(s){return s==="true"}var L=D.substr(pe).split(":");ze=L[0],A=n!==L[1]?Number(L[1]):A,p=n!==L[2]?T(L[2]):p,Y=n!==L[3]?T(L[3]):Y,J=n!==L[4]?Number(L[4]):J,t=n!==L[6]?T(L[6]):t,U=L[7],I=n!==L[8]?L[8]:I,E=L[9],x=L[10],S=n!==L[11]?Number(L[11]):S,a.enable=n!==L[12]?T(L[12]):!1,R=n!==L[13]?L[13]:R,ye=n!==L[14]?L[14]:ye}function ee(){function T(){var s=window.iFrameResizer;y("Reading data from page: "+JSON.stringify(s)),ve="messageCallback"in s?s.messageCallback:ve,Oe="readyCallback"in s?s.readyCallback:Oe,w="targetOrigin"in s?s.targetOrigin:w,I="heightCalculationMethod"in s?s.heightCalculationMethod:I,ye="widthCalculationMethod"in s?s.widthCalculationMethod:ye}function L(s,_){return typeof s=="function"&&(y("Setup custom "+_+"CalcMethod"),Ce[_]=s,s="custom"),s}"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(T(),I=L(I,"height"),ye=L(ye,"width")),y("TargetOrigin for parent set to: "+w)}function K(T,L){return L.indexOf("-")!==-1&&(Z("Negative CSS value ignored for "+T),L=""),L}function se(T,L){n!==L&&L!==""&&L!=="null"&&(document.body.style[T]=L,y("Body "+T+' set to "'+L+'"'))}function be(){n===U&&(U=A+"px"),se("margin",K("margin",U))}function $e(){document.documentElement.style.height="",document.body.style.height="",y('HTML & body height set to "auto"')}function fe(T){var L={add:function(s){function _(){vt(T.eventName,T.eventType)}He[s]=_,Le(window,s,_)},remove:function(s){var _=He[s];delete He[s],Ve(window,s,_)}};T.eventNames&&Array.prototype.map?(T.eventName=T.eventNames[0],T.eventNames.map(L[T.method])):L[T.method](T.eventName),y(Ne(T.method)+" event listener: "+T.eventType)}function Ue(T){fe({method:T,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),fe({method:T,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),fe({method:T,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),fe({method:T,eventType:"Input",eventName:"input"}),fe({method:T,eventType:"Mouse Up",eventName:"mouseup"}),fe({method:T,eventType:"Mouse Down",eventName:"mousedown"}),fe({method:T,eventType:"Orientation Change",eventName:"orientationchange"}),fe({method:T,eventType:"Print",eventName:["afterprint","beforeprint"]}),fe({method:T,eventType:"Ready State Change",eventName:"readystatechange"}),fe({method:T,eventType:"Touch Start",eventName:"touchstart"}),fe({method:T,eventType:"Touch End",eventName:"touchend"}),fe({method:T,eventType:"Touch Cancel",eventName:"touchcancel"}),fe({method:T,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),fe({method:T,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),fe({method:T,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),R==="child"&&fe({method:T,eventType:"IFrame Resized",eventName:"resize"})}function v(T,L,s,_){return L!==T&&(T in s||(Z(T+" is not a valid option for "+_+"CalculationMethod."),T=L),y(_+' calculation method set to "'+T+'"')),T}function q(){I=v(I,W,Pe,"height")}function c(){ye=v(ye,ge,Be,"width")}function k(){t===!0?(Ue("add"),ue()):y("Auto Resize disabled")}function h(){y("Disable outgoing messages"),N=!1}function O(){y("Remove event listener: Message"),Ve(window,"message",Et)}function P(){F!==null&&F.disconnect()}function $(){Ue("remove"),P(),clearInterval(ie)}function Ee(){h(),O(),t===!0&&$()}function je(){var T=document.createElement("div");T.style.clear="both",T.style.display="block",document.body.appendChild(T)}function tt(){function T(){return{x:window.pageXOffset!==n?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==n?window.pageYOffset:document.documentElement.scrollTop}}function L(Fe){var Ie=Fe.getBoundingClientRect(),_e=T();return{x:parseInt(Ie.left,10)+parseInt(_e.x,10),y:parseInt(Ie.top,10)+parseInt(_e.y,10)}}function s(Fe){function Ie(Te){var Qe=L(Te);y("Moving to in page link (#"+_e+") at x: "+Qe.x+" y: "+Qe.y),at(Qe.y,Qe.x,"scrollToOffset")}var _e=Fe.split("#")[1]||Fe,me=decodeURIComponent(_e),Ae=document.getElementById(me)||document.getElementsByName(me)[0];n!==Ae?Ie(Ae):(y("In page link (#"+_e+") not found in iFrame, so sending to parent"),at(0,0,"inPageLink","#"+_e))}function _(){location.hash!==""&&location.hash!=="#"&&s(location.href)}function H(){function Fe(Ie){function _e(me){me.preventDefault(),s(this.getAttribute("href"))}Ie.getAttribute("href")!=="#"&&Le(Ie,"click",_e)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),Fe)}function ae(){Le(window,"hashchange",_)}function he(){setTimeout(_,m)}function xe(){Array.prototype.forEach&&document.querySelectorAll?(y("Setting up location.hash handlers"),H(),ae(),he()):Z("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}return a.enable?xe():y("In page linking not enabled"),{findTarget:s}}function gt(){y("Enable public methods"),We.parentIFrame={autoResize:function(L){return L===!0&&t===!1?(t=!0,k()):L===!1&&t===!0&&(t=!1,$()),t},close:function(){at(0,0,"close"),Ee()},getId:function(){return ze},getPageInfo:function(L){typeof L=="function"?(Me=L,at(0,0,"pageInfo")):(Me=function(){},at(0,0,"pageInfoStop"))},moveToAnchor:function(L){a.findTarget(L)},reset:function(){Tt("parentIFrame.reset")},scrollTo:function(L,s){at(s,L,"scrollTo")},scrollToOffset:function(L,s){at(s,L,"scrollToOffset")},sendMessage:function(L,s){at(0,0,"message",JSON.stringify(L),s)},setHeightCalculationMethod:function(L){I=L,q()},setWidthCalculationMethod:function(L){ye=L,c()},setTargetOrigin:function(L){y("Set targetOrigin: "+L),w=L},size:function(L,s){var _=""+(L||"")+(s?","+s:"");vt("size","parentIFrame.size("+_+")",L,s)}}}function Ye(){J!==0&&(y("setInterval: "+J+"ms"),ie=setInterval(function(){vt("interval","setInterval: "+J)},Math.abs(J)))}function qe(){function T(me){function Ae(Te){Te.complete===!1&&(y("Attach listeners to "+Te.src),Te.addEventListener("load",H,!1),Te.addEventListener("error",ae,!1),Fe.push(Te))}me.type==="attributes"&&me.attributeName==="src"?Ae(me.target):me.type==="childList"&&Array.prototype.forEach.call(me.target.querySelectorAll("img"),Ae)}function L(me){Fe.splice(Fe.indexOf(me),1)}function s(me){y("Remove listeners from "+me.src),me.removeEventListener("load",H,!1),me.removeEventListener("error",ae,!1),L(me)}function _(me,Ae,Te){s(me.target),vt(Ae,Te+": "+me.target.src,n,n)}function H(me){_(me,"imageLoad","Image loaded")}function ae(me){_(me,"imageLoadFailed","Image load failed")}function he(me){vt("mutationObserver","mutationObserver: "+me[0].target+" "+me[0].type),me.forEach(T)}function xe(){var me=document.querySelector("body"),Ae={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return _e=new Ie(he),y("Create body MutationObserver"),_e.observe(me,Ae),_e}var Fe=[],Ie=window.MutationObserver||window.WebKitMutationObserver,_e=xe();return{disconnect:function(){"disconnect"in _e&&(y("Disconnect body MutationObserver"),_e.disconnect(),Fe.forEach(s))}}}function ue(){var T=0>J;window.MutationObserver||window.WebKitMutationObserver?T?Ye():F=qe():(y("MutationObserver not supported in this browser!"),Ye())}function te(T,L){function s(H){var ae=/^\d+(px)?$/i;if(ae.test(H))return parseInt(H,o);var he=L.style.left,xe=L.runtimeStyle.left;return L.runtimeStyle.left=L.currentStyle.left,L.style.left=H||0,H=L.style.pixelLeft,L.style.left=he,L.runtimeStyle.left=xe,H}var _=0;return L=L||document.body,"defaultView"in document&&"getComputedStyle"in document.defaultView?(_=document.defaultView.getComputedStyle(L,null),_=_!==null?_[T]:0):_=s(L.currentStyle[T]),parseInt(_,o)}function Q(T){T>B/2&&(B=2*T,y("Event throttle increased to "+B+"ms"))}function re(T,L){for(var s=L.length,_=0,H=0,ae=Ne(T),he=Ze(),xe=0;xe<s;xe++)_=L[xe].getBoundingClientRect()[T]+te("margin"+ae,L[xe]),_>H&&(H=_);return he=Ze()-he,y("Parsed "+s+" HTML elements"),y("Element position calculated in "+he+"ms"),Q(he),H}function de(T){return[T.bodyOffset(),T.bodyScroll(),T.documentElementOffset(),T.documentElementScroll()]}function Se(T,L){function s(){return Z("No tagged elements ("+L+") found on page"),document.querySelectorAll("body *")}var _=document.querySelectorAll("["+L+"]");return _.length===0&&s(),re(T,_)}function ke(){return document.querySelectorAll("body *")}var Pe={bodyOffset:function(){return document.body.offsetHeight+te("marginTop")+te("marginBottom")},offset:function(){return Pe.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return Ce.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,de(Pe))},min:function(){return Math.min.apply(null,de(Pe))},grow:function(){return Pe.max()},lowestElement:function(){return Math.max(Pe.bodyOffset(),re("bottom",ke()))},taggedElement:function(){return Se("bottom","data-iframe-height")}},Be={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return Ce.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(Be.bodyScroll(),Be.documentElementScroll())},max:function(){return Math.max.apply(null,de(Be))},min:function(){return Math.min.apply(null,de(Be))},rightMostElement:function(){return re("right",ke())},taggedElement:function(){return Se("right","data-iframe-width")}};function Xe(T,L,s,_){function H(){M=_e,V=me,at(M,V,T)}function ae(){function Ae(Te,Qe){var st=Math.abs(Te-Qe)<=S;return!st}return _e=n!==s?s:Pe[I](),me=n!==_?_:Be[ye](),Ae(M,_e)||p&&Ae(V,me)}function he(){return!(T in{init:1,interval:1,size:1})}function xe(){return I in oe||p&&ye in oe}function Fe(){y("No change in size detected")}function Ie(){he()&&xe()?Tt(L):T in{interval:1}||Fe()}var _e,me;ae()||T==="init"?(Ct(),H()):Ie()}var ct=et(Xe);function vt(T,L,s,_){function H(){T in{reset:1,resetPage:1,init:1}||y("Trigger event: "+L)}function ae(){return G&&T in b}ae()?y("Trigger event cancelled: "+T):(H(),ct(T,L,s,_))}function Ct(){G||(G=!0,y("Trigger event lock on")),clearTimeout(X),X=setTimeout(function(){G=!1,y("Trigger event lock off"),y("--")},m)}function pt(T){M=Pe[I](),V=Be[ye](),at(M,V,T)}function Tt(T){var L=I;I=W,y("Reset trigger event: "+T),Ct(),pt("reset"),I=L}function at(T,L,s,_,H){function ae(){n===H?H=w:y("Message targetOrigin: "+H)}function he(){var xe=T+":"+L,Fe=ze+":"+xe+":"+s+(n!==_?":"+_:"");y("Sending message to host page ("+Fe+")"),g.postMessage(we+Fe,H)}N===!0&&(ae(),he())}function Et(T){var L={init:function(){function _e(){D=T.data,g=T.source,d(),C=!1,setTimeout(function(){i=!1},m)}document.readyState==="interactive"||document.readyState==="complete"?_e():(y("Waiting for page ready"),Le(window,"readystatechange",L.initFromParent))},reset:function(){i?y("Page reset ignored by init"):(y("Page size reset by host page"),pt("resetPage"))},resize:function(){vt("resizeParent","Parent window requested size check")},moveToAnchor:function(){a.findTarget(H())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var _e=H();y("PageInfoFromParent called from parent: "+_e),Me(JSON.parse(_e)),y(" --")},message:function(){var _e=H();y("MessageCallback called from parent: "+_e),ve(JSON.parse(_e)),y(" --")}};function s(){return we===(""+T.data).substr(0,pe)}function _(){return T.data.split("]")[1].split(":")[0]}function H(){return T.data.substr(T.data.indexOf(":")+1)}function ae(){return!r.exports&&"iFrameResize"in window}function he(){return T.data.split(":")[2]in{true:1,false:1}}function xe(){var Ie=_();Ie in L?L[Ie]():!ae()&&!he()&&Z("Unexpected message ("+T.data+")")}function Fe(){C===!1?xe():he()?L.init():y('Ignored message of type "'+_()+'". Received before initialization.')}s()&&Fe()}function dt(){document.readyState!=="loading"&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}Le(window,"message",Et),dt()})()},28:(r,n)=>{var t,o,E;(function(A){if(typeof window>"u")return;var U=0,F=!1,x=!1,p="message",b=p.length,m="[iFrameSizer]",C=m.length,M=null,W=window.requestAnimationFrame,I={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},i={},D=null,a={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){N("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}};function J(y,Z,d){"addEventListener"in window?y.addEventListener(Z,d,!1):"attachEvent"in window&&y.attachEvent("on"+Z,d)}function ie(y,Z,d){"removeEventListener"in window?y.removeEventListener(Z,d,!1):"detachEvent"in window&&y.detachEvent("on"+Z,d)}function Y(){var y=["moz","webkit","o","ms"],Z;for(Z=0;Z<y.length&&!W;Z+=1)W=window[y[Z]+"RequestAnimationFrame"];W||oe("setup","RequestAnimationFrame not supported")}function we(y){var Z="Host page: "+y;return window.top!==window.self&&(window.parentIFrame&&window.parentIFrame.getId?Z=window.parentIFrame.getId()+": "+y:Z="Nested host page: "+y),Z}function pe(y){return m+"["+we(y)+"]"}function ze(y){return i[y]?i[y].log:F}function oe(y,Z){g("log",y,Z,ze(y))}function R(y,Z){g("info",y,Z,ze(y))}function N(y,Z){g("warn",y,Z,!0)}function g(y,Z,d,z){z===!0&&typeof window.console=="object"&&console[y](pe(Z),d)}function w(y){function Z(){function te(){ye(qe),B(ue),$("resizedCallback",qe)}z("Height"),z("Width"),We(te,qe,"init")}function d(){var te=Ye.substr(C).split(":");return{iframe:i[te[0]]&&i[te[0]].iframe,id:te[0],height:te[1],width:te[2],type:te[3]}}function z(te){var Q=Number(i[ue]["max"+te]),re=Number(i[ue]["min"+te]),de=te.toLowerCase(),Se=Number(qe[de]);oe(ue,"Checking "+de+" is in range "+re+"-"+Q),Se<re&&(Se=re,oe(ue,"Set "+de+" to min value")),Se>Q&&(Se=Q,oe(ue,"Set "+de+" to max value")),qe[de]=""+Se}function ee(){function te(){function de(){var ke=0,Pe=!1;for(oe(ue,"Checking connection is from allowed list of origins: "+re);ke<re.length;ke++)if(re[ke]===Q){Pe=!0;break}return Pe}function Se(){var ke=i[ue]&&i[ue].remoteHost;return oe(ue,"Checking connection is from: "+ke),Q===ke}return re.constructor===Array?de():Se()}var Q=y.origin,re=i[ue]&&i[ue].checkOrigin;if(re&&""+Q!="null"&&!te())throw new Error("Unexpected message received from: "+Q+" for "+qe.iframe.id+". Message was: "+y.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function K(){return m===(""+Ye).substr(0,C)&&Ye.substr(C).split(":")[0]in i}function se(){var te=qe.type in{true:1,false:1,undefined:1};return te&&oe(ue,"Ignoring init message from meta parent page"),te}function be(te){return Ye.substr(Ye.indexOf(":")+b+te)}function $e(te){oe(ue,"MessageCallback passed: {iframe: "+qe.iframe.id+", message: "+te+"}"),$("messageCallback",{iframe:qe.iframe,message:JSON.parse(te)}),oe(ue,"--")}function fe(){var te=document.body.getBoundingClientRect(),Q=qe.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:Q.height,iframeWidth:Q.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(Q.top-te.top,10),offsetLeft:parseInt(Q.left-te.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset})}function Ue(te,Q){function re(){ve("Send Page Info","pageInfo:"+fe(),te,Q)}Ce(re,32)}function v(){function te(Se,ke){function Pe(){i[de]?Ue(i[de].iframe,de):Q()}["scroll","resize"].forEach(function(Be){oe(de,Se+Be+" listener for sendPageInfo"),ke(window,Be,Pe)})}function Q(){te("Remove ",ie)}function re(){te("Add ",J)}var de=ue;re(),i[de]&&(i[de].stopPageInfo=Q)}function q(){i[ue]&&i[ue].stopPageInfo&&(i[ue].stopPageInfo(),delete i[ue].stopPageInfo)}function c(){var te=!0;return qe.iframe===null&&(N(ue,"IFrame ("+qe.id+") not found"),te=!1),te}function k(te){var Q=te.getBoundingClientRect();return X(ue),{x:Math.floor(Number(Q.left)+Number(M.x)),y:Math.floor(Number(Q.top)+Number(M.y))}}function h(te){function Q(){M=ke,O(),oe(ue,"--")}function re(){return{x:Number(qe.width)+Se.x,y:Number(qe.height)+Se.y}}function de(){window.parentIFrame?window.parentIFrame["scrollTo"+(te?"Offset":"")](ke.x,ke.y):N(ue,"Unable to scroll to requested position, window.parentIFrame not found")}var Se=te?k(qe.iframe):{x:0,y:0},ke=re();oe(ue,"Reposition requested from iFrame (offset x:"+Se.x+" y:"+Se.y+")"),window.top!==window.self?de():Q()}function O(){$("scrollCallback",M)!==!1?B(ue):V()}function P(te){function Q(){var Pe=k(ke);oe(ue,"Moving to in page link (#"+de+") at x: "+Pe.x+" y: "+Pe.y),M={x:Pe.x,y:Pe.y},O(),oe(ue,"--")}function re(){window.parentIFrame?window.parentIFrame.moveToAnchor(de):oe(ue,"In page link #"+de+" not found and window.parentIFrame not found")}var de=te.split("#")[1]||"",Se=decodeURIComponent(de),ke=document.getElementById(Se)||document.getElementsByName(Se)[0];ke?Q():window.top!==window.self?re():oe(ue,"In page link #"+de+" not found")}function $(te,Q){return S(ue,te,Q)}function Ee(){switch(i[ue]&&i[ue].firstRun&&gt(),qe.type){case"close":i[ue].closeRequestCallback?S(ue,"closeRequestCallback",i[ue].iframe):G(qe.iframe);break;case"message":$e(be(6));break;case"scrollTo":h(!1);break;case"scrollToOffset":h(!0);break;case"pageInfo":Ue(i[ue]&&i[ue].iframe,ue),v();break;case"pageInfoStop":q();break;case"inPageLink":P(be(9));break;case"reset":ge(qe);break;case"init":Z(),$("initCallback",qe.iframe);break;default:Z()}}function je(te){var Q=!0;return i[te]||(Q=!1,N(qe.type+" No settings for "+te+". Message was: "+Ye)),Q}function tt(){for(var te in i)ve("iFrame requested init",Oe(te),document.getElementById(te),te)}function gt(){i[ue]&&(i[ue].firstRun=!1)}var Ye=y.data,qe={},ue=null;Ye==="[iFrameResizerChild]Ready"?tt():K()?(qe=d(),ue=qe.id,i[ue]&&(i[ue].loaded=!0),!se()&&je(ue)&&(oe(ue,"Received: "+Ye),c()&&ee()&&Ee())):R(ue,"Ignored: "+Ye)}function S(y,Z,d){var z=null,ee=null;if(i[y])if(z=i[y][Z],typeof z=="function")ee=z(d);else throw new TypeError(Z+" on iFrame["+y+"] is not a function");return ee}function G(y){var Z=y.id;oe(Z,"Removing iFrame: "+Z),y.parentNode&&y.parentNode.removeChild(y),S(Z,"closedCallback",Z),oe(Z,"--"),delete i[Z]}function X(y){M===null&&(M={x:window.pageXOffset!==A?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==A?window.pageYOffset:document.documentElement.scrollTop},oe(y,"Get page position: "+M.x+","+M.y))}function B(y){M!==null&&(window.scrollTo(M.x,M.y),oe(y,"Set page position: "+M.x+","+M.y),V())}function V(){M=null}function ge(y){function Z(){ye(y),ve("reset","reset",y.iframe,y.id)}oe(y.id,"Size reset requested by "+(y.type==="init"?"host page":"iFrame")),X(y.id),We(Z,y,"reset")}function ye(y){function Z(K){y.iframe.style[K]=y[K]+"px",oe(y.id,"IFrame ("+ee+") "+K+" set to "+y[K]+"px")}function d(K){!x&&y[K]==="0"&&(x=!0,oe(ee,"Hidden iFrame detected, creating visibility listener"),He())}function z(K){Z(K),d(K)}var ee=y.iframe.id;i[ee]&&(i[ee].sizeHeight&&z("height"),i[ee].sizeWidth&&z("width"))}function We(y,Z,d){d!==Z.type&&W?(oe(Z.id,"Requesting animation frame"),W(y)):y()}function ve(y,Z,d,z,ee){function K(){var Ue=i[z]&&i[z].targetOrigin;oe(z,"["+y+"] Sending msg to iframe["+z+"] ("+Z+") targetOrigin: "+Ue),d.contentWindow.postMessage(m+Z,Ue)}function se(){N(z,"["+y+"] IFrame("+z+") not found")}function be(){d&&"contentWindow"in d&&d.contentWindow!==null?K():se()}function $e(){function Ue(){i[z]&&!i[z].loaded&&!fe&&(fe=!0,N(z,"IFrame has not responded within "+i[z].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ingored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}ee&&i[z]&&i[z].warningTimeout&&(i[z].msgTimeout=setTimeout(Ue,i[z].warningTimeout))}var fe=!1;z=z||d.id,i[z]&&(be(),$e())}function Oe(y){return y+":"+i[y].bodyMarginV1+":"+i[y].sizeWidth+":"+i[y].log+":"+i[y].interval+":"+i[y].enablePublicMethods+":"+i[y].autoResize+":"+i[y].bodyMargin+":"+i[y].heightCalculationMethod+":"+i[y].bodyBackground+":"+i[y].bodyPadding+":"+i[y].tolerance+":"+i[y].inPageLinks+":"+i[y].resizeFrom+":"+i[y].widthCalculationMethod}function Me(y,Z){function d(){function O($){i[h][$]!==1/0&&i[h][$]!==0&&(y.style[$]=i[h][$]+"px",oe(h,"Set "+$+" = "+i[h][$]+"px"))}function P($){if(i[h]["min"+$]>i[h]["max"+$])throw new Error("Value for min"+$+" can not be greater than max"+$)}P("Height"),P("Width"),O("maxHeight"),O("minHeight"),O("maxWidth"),O("minWidth")}function z(){var O=Z&&Z.id||a.id+U++;return document.getElementById(O)!==null&&(O=O+U++),O}function ee(O){return O===""&&(y.id=O=z(),F=(Z||{}).log,oe(O,"Added missing iframe ID: "+O+" ("+y.src+")")),O}function K(){switch(oe(h,"IFrame scrolling "+(i[h]&&i[h].scrolling?"enabled":"disabled")+" for "+h),y.style.overflow=(i[h]&&i[h].scrolling)===!1?"hidden":"auto",i[h]&&i[h].scrolling){case!0:y.scrolling="yes";break;case!1:y.scrolling="no";break;default:y.scrolling=i[h]?i[h].scrolling:"no"}}function se(){(typeof(i[h]&&i[h].bodyMargin)=="number"||(i[h]&&i[h].bodyMargin)==="0")&&(i[h].bodyMarginV1=i[h].bodyMargin,i[h].bodyMargin=""+i[h].bodyMargin+"px")}function be(){var O=i[h]&&i[h].firstRun,P=i[h]&&i[h].heightCalculationMethod in I;!O&&P&&ge({iframe:y,height:0,width:0,type:"init"})}function $e(){Function.prototype.bind&&i[h]&&(i[h].iframe.iFrameResizer={close:G.bind(null,i[h].iframe),resize:ve.bind(null,"Window resize","resize",i[h].iframe),moveToAnchor:function(O){ve("Move to anchor","moveToAnchor:"+O,i[h].iframe,h)},sendMessage:function(O){O=JSON.stringify(O),ve("Send Message","message:"+O,i[h].iframe,h)}})}function fe(O){function P(){ve("iFrame.onload",O,y,A,!0),be()}J(y,"load",P),ve("init",O,y,A,!0)}function Ue(O){if(typeof O!="object")throw new TypeError("Options is not an object")}function v(O){for(var P in a)a.hasOwnProperty(P)&&(i[h][P]=O.hasOwnProperty(P)?O[P]:a[P])}function q(O){return O===""||O==="file://"?"*":O}function c(O){O=O||{},i[h]={firstRun:!0,iframe:y,remoteHost:y.src.split("/").slice(0,3).join("/")},Ue(O),v(O),i[h]&&(i[h].targetOrigin=i[h].checkOrigin===!0?q(i[h].remoteHost):"*")}function k(){return h in i&&"iFrameResizer"in y}var h=ee(y.id);k()?N(h,"Ignored iFrame, already setup."):(c(Z),K(),d(),se(),fe(Oe(h)),$e())}function Ce(y,Z){D===null&&(D=setTimeout(function(){D=null,y()},Z))}function He(){function y(){function ee(se){function be(fe){return(i[se]&&i[se].iframe.style[fe])==="0px"}function $e(fe){return fe.offsetParent!==null}i[se]&&$e(i[se].iframe)&&(be("height")||be("width"))&&ve("Visibility change","resize",i[se].iframe,se)}for(var K in i)ee(K)}function Z(ee){oe("window","Mutation observed: "+ee[0].target+" "+ee[0].type),Ce(y,16)}function d(){var ee=document.querySelector("body"),K={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},se=new z(Z);se.observe(ee,K)}var z=window.MutationObserver||window.WebKitMutationObserver;z&&d()}function Le(y){function Z(){Ne("Window "+y,"resize")}oe("window","Trigger event: "+y),Ce(Z,16)}function Ve(){function y(){Ne("Tab Visable","resize")}document.visibilityState!=="hidden"&&(oe("document","Trigger event: Visiblity change"),Ce(y,16))}function Ne(y,Z){function d(ee){return i[ee]&&i[ee].resizeFrom==="parent"&&i[ee].autoResize&&!i[ee].firstRun}for(var z in i)d(z)&&ve(y,Z,document.getElementById(z),z)}function et(){J(window,"message",w),J(window,"resize",function(){Le("resize")}),J(document,"visibilitychange",Ve),J(document,"-webkit-visibilitychange",Ve),J(window,"focusin",function(){Le("focus")}),J(window,"focus",function(){Le("focus")})}function Ze(){function y(z,ee){function K(){if(ee.tagName){if(ee.tagName.toUpperCase()!=="IFRAME")throw new TypeError("Expected <IFRAME> tag, found <"+ee.tagName+">")}else throw new TypeError("Object is not a valid DOM element")}ee&&(K(),Me(ee,z),d.push(ee))}function Z(z){z&&z.enablePublicMethods&&N("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}var d;return Y(),et(),function(ee,K){switch(d=[],Z(ee),typeof K){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(K||"iframe"),y.bind(A,ee));break;case"object":y(ee,K);break;default:throw new TypeError("Unexpected data type ("+typeof K+")")}return d}}function ot(y){y.fn?y.fn.iFrameResize||(y.fn.iFrameResize=function(d){function z(ee,K){Me(K,d)}return this.filter("iframe").each(z).end()}):R("","Unable to bind to jQuery, it is not fully loaded.")}window.jQuery&&ot(window.jQuery),o=[],t=Ze,E=typeof t=="function"?t.apply(n,o):t,E!==A&&(r.exports=E)})()},683:(r,n,t)=>{n.iframeResizer=t(28),n.iframeResizerContentWindow=t(402)},457:r=>{var n=function(){var t=Math.floor(Math.random()*1000001),o={};function E(p,b,m,C){function M(i){for(var D=0;D<i.length;D++)if(i[D].win===p)return!0;return!1}var W=!1;if(b==="*"){for(var I in o)if(o.hasOwnProperty(I)&&I!=="*"&&typeof o[I][m]=="object"&&(W=M(o[I][m]),W))break}else o["*"]&&o["*"][m]&&(W=M(o["*"][m])),!W&&o[b]&&o[b][m]&&(W=M(o[b][m]));if(W)throw"A channel is already bound to the same window which overlaps with origin '"+b+"' and has scope '"+m+"'";typeof o[b]!="object"&&(o[b]={}),typeof o[b][m]!="object"&&(o[b][m]=[]),o[b][m].push({win:p,handler:C})}function A(p,b,m){for(var C=o[b][m],M=0;M<C.length;M++)C[M].win===p&&C.splice(M,1);o[b][m].length===0&&delete o[b][m]}function U(p){return Array.isArray?Array.isArray(p):p.constructor.toString().indexOf("Array")!=-1}var F={},x=function(p){try{var b=JSON.parse(p.data);if(typeof b!="object"||b===null)throw"malformed"}catch{return}var m=p.source,C=p.origin,M,W,I;if(typeof b.method=="string"){var i=b.method.split("::");i.length==2?(M=i[0],I=i[1]):I=b.method}if(typeof b.id<"u"&&(W=b.id),typeof I=="string"){var D=!1;if(o[C]&&o[C][M]){for(var a=0;a<o[C][M].length;a++)if(o[C][M][a].win===m){o[C][M][a].handler(C,I,b),D=!0;break}}if(!D&&o["*"]&&o["*"][M]){for(var a=0;a<o["*"][M].length;a++)if(o["*"][M][a].win===m){o["*"][M][a].handler(C,I,b);break}}}else typeof W<"u"&&F[W]&&F[W](C,I,b)};return window.addEventListener?window.addEventListener("message",x,!1):window.attachEvent&&window.attachEvent("onmessage",x),{build:function(p){var b=function(R){if(p.debugOutput&&window.console&&window.console.log){try{typeof R!="string"&&(R=JSON.stringify(R))}catch{}console.log("["+M+"] "+R)}};if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if(typeof p!="object")throw"Channel build invoked without a proper object argument";if(!p.window||!p.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===p.window)throw"target window is same as present window -- not allowed";var m=!1;if(typeof p.origin=="string"){var C;p.origin==="*"?m=!0:(C=p.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))!==null&&(p.origin=C[0].toLowerCase(),m=!0)}if(!m)throw"Channel.build() called with an invalid origin";if(typeof p.scope<"u"){if(typeof p.scope!="string")throw"scope, when specified, must be a string";if(p.scope.split("::").length>1)throw"scope may not contain double colons: '::'"}var M=function(){for(var R="",N="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",g=0;g<5;g++)R+=N.charAt(Math.floor(Math.random()*N.length));return R}(),W={},I={},i={},D=!1,a=[],J=function(R,N,g){var w=!1,S=!1;return{origin:N,invoke:function(G,X){if(!i[R])throw"attempting to invoke a callback of a nonexistent transaction: "+R;for(var B=!1,V=0;V<g.length;V++)if(G===g[V]){B=!0;break}if(!B)throw"request supports no such callback '"+G+"'";pe({id:R,callback:G,params:X})},error:function(G,X){if(S=!0,!i[R])throw"error called for nonexistent message: "+R;delete i[R],pe({id:R,error:G,message:X})},complete:function(G){if(S=!0,!i[R])throw"complete called for nonexistent message: "+R;delete i[R],pe({id:R,result:G})},delayReturn:function(G){return typeof G=="boolean"&&(w=G===!0),w},completed:function(){return S}}},ie=function(R,N,g){return window.setTimeout(function(){if(I[R]){var w="timeout ("+N+"ms) exceeded on method '"+g+"'";(0,I[R].error)("timeout_error",w),delete I[R],delete F[R]}},N)},Y=function(R,N,g){if(typeof p.gotMessageObserver=="function")try{p.gotMessageObserver(R,g)}catch(Oe){b("gotMessageObserver() raised an exception: "+Oe.toString())}if(g.id&&N){if(W[N]){var w=J(g.id,R,g.callbacks?g.callbacks:[]);i[g.id]={};try{if(g.callbacks&&U(g.callbacks)&&g.callbacks.length>0)for(var S=0;S<g.callbacks.length;S++){for(var G=g.callbacks[S],X=g.params,B=G.split("/"),V=0;V<B.length-1;V++){var ge=B[V];typeof X[ge]!="object"&&(X[ge]={}),X=X[ge]}X[B[B.length-1]]=function(){var Oe=G;return function(Me){return w.invoke(Oe,Me)}}()}var ye=W[N](w,g.params);!w.delayReturn()&&!w.completed()&&w.complete(ye)}catch(Oe){var We="runtime_error",ve=null;if(typeof Oe=="string"?ve=Oe:typeof Oe=="object"&&(Oe&&U(Oe)&&Oe.length==2?(We=Oe[0],ve=Oe[1]):typeof Oe.error=="string"&&(We=Oe.error,Oe.message?typeof Oe.message=="string"?ve=Oe.message:Oe=Oe.message:ve="")),ve===null)try{ve=JSON.stringify(Oe),typeof ve>"u"&&(ve=Oe.toString())}catch{ve=Oe.toString()}w.error(We,ve)}}}else g.id&&g.callback?!I[g.id]||!I[g.id].callbacks||!I[g.id].callbacks[g.callback]?b("ignoring invalid callback, id:"+g.id+" ("+g.callback+")"):I[g.id].callbacks[g.callback](g.params):g.id?I[g.id]?(g.error?(0,I[g.id].error)(g.error,g.message):g.result!==void 0?(0,I[g.id].success)(g.result):(0,I[g.id].success)(),delete I[g.id],delete F[g.id]):b("ignoring invalid response: "+g.id):N&&W[N]&&W[N]({origin:R},g.params)};E(p.window,p.origin,typeof p.scope=="string"?p.scope:"",Y);var we=function(R){return typeof p.scope=="string"&&p.scope.length&&(R=[p.scope,R].join("::")),R},pe=function(R,N){if(!R)throw"postMessage called with null message";var g=D?"post  ":"queue ";if(b(g+" message: "+JSON.stringify(R)),!N&&!D)a.push(R);else{if(typeof p.postMessageObserver=="function")try{p.postMessageObserver(p.origin,R)}catch(w){b("postMessageObserver() raised an exception: "+w.toString())}p.window.postMessage(JSON.stringify(R),p.origin)}},ze=function(R,N){if(b("ready msg received"),D)throw"received ready message while in ready state.  help!";for(N==="ping"?M+="-R":M+="-L",oe.unbind("__ready"),D=!0,b("ready msg accepted."),N==="ping"&&oe.notify({method:"__ready",params:"pong"});a.length;)pe(a.pop());typeof p.onReady=="function"&&p.onReady(oe)},oe={unbind:function(R){if(W[R]){if(!delete W[R])throw"can't delete method: "+R;return!0}return!1},bind:function(R,N){if(!R||typeof R!="string")throw"'method' argument to bind must be string";if(!N||typeof N!="function")throw"callback missing from bind params";if(W[R])throw"method '"+R+"' is already bound!";return W[R]=N,this},call:function(R){if(!R)throw"missing arguments to call function";if(!R.method||typeof R.method!="string")throw"'method' argument to call must be string";if(!R.success||typeof R.success!="function")throw"'success' callback missing from call";var N={},g=[],w=[],S=function(X,B){if(w.indexOf(B)>=0)throw"params cannot be a recursive data structure";if(w.push(B),typeof B=="object"){for(var V in B)if(B.hasOwnProperty(V)){var ge=X+(X.length?"/":"")+V;typeof B[V]=="function"?(N[ge]=B[V],g.push(ge),delete B[V]):typeof B[V]=="object"&&B[V]!==null&&S(ge,B[V])}}};S("",R.params);var G={id:t,method:we(R.method),params:R.params};g.length&&(G.callbacks=g),R.timeout&&ie(t,R.timeout,we(R.method)),I[t]={callbacks:N,error:R.error,success:R.success},F[t]=Y,t++,pe(G)},notify:function(R){if(!R)throw"missing arguments to notify function";if(!R.method||typeof R.method!="string")throw"'method' argument to notify must be string";pe({method:we(R.method),params:R.params})},destroy:function(){A(p.window,p.origin,typeof p.scope=="string"?p.scope:""),window.removeEventListener?window.removeEventListener("message",Y,!1):window.detachEvent&&window.detachEvent("onmessage",Y),D=!1,W={},i={},I={},p.origin=null,a=[],b("channel destroyed"),M=""}};return oe.bind("__ready",ze),setTimeout(function(){pe({method:we("__ready"),params:"ping"},!0)},0),oe}}}();r.exports=n},218:r=>{function n(t){var o=typeof t;return t!=null&&(o=="object"||o=="function")}r.exports=n}},e={};function l(r){var n=e[r];if(n!==void 0)return n.exports;var t=e[r]={exports:{}};return u[r].call(t.exports,t,t.exports,l),t.exports}l.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),l(669)})();var mn=Qt.Addon;const It="2017-01-01",Zt="https://app.wealthica.com",gn=Zt+"/img",jt=gn+"/arrow_down.f6ca09b2.svg",pn=Zt+"/images/institutions",vn="https://data.wealthica.com/api",yn=vn+"/streams",_n="https://data.wealthica.com/api/securities",$t="https://portfoliotech.github.io/investify/static/img",Bt=$t+"/default_company_logo.png",wn=$t+"/cash.png";function lt(u){return`${$t}/${u}`}class bn{constructor(){this.addon=new mn,this.addon.on("init",e=>{this.addon.options={...e,fromDate:It,toDate:this.today(),dateRangeFilter:[It,this.today()],datePeriod:"all"}})}today(){return new Date().toISOString().split("T")[0]}options_query(){return{from:this.addon.options.fromDate,to:this.addon.options.toDate,groups:this.addon.options.groupsFilter,institutions:this.addon.options.institutionsFilter,investments:this.addon.options.investmentsFilter}}fetch_user(){try{return this.addon.api.getUser()}catch(e){throw e}}fetch_currencies(){try{return this.addon.request({method:"GET",endpoint:"currencies"})}catch(e){throw e}}fetch_currency(e,l){try{return this.addon.request({method:"GET",endpoint:`currencies/${l}/history`,query:{from:It,to:this.today(),base:e}})}catch(r){throw r}}fetch_institutions(){try{return this.addon.api.getInstitutions(this.options_query())}catch(e){throw e}}fetch_positions(){try{return this.addon.api.getPositions(this.options_query())}catch(e){throw e}}fetch_transactions(){try{const e=new Date("2000-01-01").toISOString().split("T")[0],l=new Date().toISOString().split("T")[0],r={from:e,to:l,deleted:!1};return this.addon.api.getTransactions(r).then(n=>n.map(t=>{var p,b,m;const o={symbol:(p=t.security)==null?void 0:p.symbol,market:(b=t.security)==null?void 0:b.currency.substring(0,2).toUpperCase()},E=((m=t.investment)==null?void 0:m.split(":")[2])||"",A=new Date(t.settlement_date),U=A.getUTCFullYear(),F=A.getUTCMonth()+1,x=`${U}-${("0"+F).slice(-2)}`;return{...t,subaccount_id:t.investment,symbolMX:`${o.market}:${o.symbol}`,symbol:o.symbol,market:o.market,currency:E,settlement_dt:A,year:U,month:F,year_month:x,amount:t.currency_amount,price:Math.abs(t.currency_amount/t.quantity),total:t.currency_amount-(t.fee||0)}}))}catch(e){throw e}}fetch_quotes(e){const l={user:this.addon.options.authUser.email,symbols:e};return fetch(yn,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(r=>r.json()).then(r=>({...r,securities:r.securities.map(n=>({...n,symbolMX:`${n.market}:${n.symbol.split(":")[1]}`}))})).catch(r=>{throw r})}fetch_history(e){try{return this.addon.request({method:"GET",endpoint:`securities/${e}/history`,query:this.options_query()})}catch(l){throw l}}async delete_transaction(e){const l={deleted:!0};return await this.addon.api.updateTransaction(e,l)}async update_transaction(e,l){return await this.addon.api.updateTransaction(e,l)}}const _t=sn(),St=[{name:"INVESTOR - CELI",account_number:"22981483",order:1,type:null,no_holdings:!1,exluded:!1},{name:"INVESTOR - RESP",account_number:"21921430",order:2,type:null,no_holdings:!1,exluded:!1},{name:"NESBITT - NON-ENRG",account_number:"31015145",order:3,type:null,no_holdings:!1,exluded:!0},{name:"NESBITT - BELSKI",account_number:"31107566",order:4,type:null,no_holdings:!1,exluded:_t},{name:"NESBITT - FONDS",account_number:"31107567",order:5,type:null,no_holdings:!1,exluded:_t},{name:"NESBITT - ACTIONS (REER)",account_number:"31107798",order:6,type:null,no_holdings:!1,exluded:_t},{name:"NESBITT - ACTIONS (CELI)",account_number:"78124230",order:7,type:null,no_holdings:!1,exluded:_t},{name:"CGI - ACTIONS (REER)",account_number:"197287703264",order:8,type:null,no_holdings:!0,exluded:_t},{name:"CGI - ACTIONS (NON-ENRG)",account_number:"197287499339",order:8,type:"NRG",no_holdings:!0,exluded:_t},{name:"FTQ - REER",account_number:"107935800-01R",order:9,type:"RRSP",no_holdings:!0,exluded:_t},{name:"BMO - INVEST",account_number:"XXXX6679",order:10,type:"CASH",no_holdings:!0,exluded:_t}];function kn(u,e){const l=St.find(r=>r.account_number===u);return l?l.type||e.toUpperCase():""}function Tn(u){var e=St.find(l=>l.account_number===u);return e?e.exluded:!0}function En(u){var e=St.find(l=>l.account_number===u);return e?e.order:999}function On(u){var e=St.find(l=>l.account_number===u);return e?e.no_holdings:!1}function Mn(u={}){var e;return{id:{account_number:u.investment.split(":")[0],subaccount_id:u.investment,symbolMX:u.symbolMX,symbol:u.symbol,name:(e=u.security)==null?void 0:e.name,currency:u.currency,date:u.settlement_dt,lot:u.quantity,quantity:u.quantity,active:!1},data:{cost:{date:void 0,price:0,amount:0},close:{date:void 0,price:0,amount:0},weeks52:{low:{date:void 0,price:0},high:{date:void 0,price:0}},market:{date:void 0,price:0,value:0,price_CAD:0,value_CAD:0},return:{dividend:0,interest:0,fees:0,taxes:0,total:0,gain:{realized:0,unrealized:{daily:{change:0,percent:0,amount:0},overall:{change:0,percent:0,amount:0}}}}},stock:{},security:u.security,transactions:[]}}function At(){return{cost_amount:0,close_amount:0,market_value:0,market_value_USD:0,market_value_CAD:0,market_total_CAD:0,gain_unrealized_daily_amount:0,gain_unrealized_daily_percent:0,gain_unrealized_overall_amount:0,gain_unrealized_overall_percent:0}}function Wt(u){return{currency:u,activities:{all:Pt(),year:Pt(),month:Pt()},total:{balance:0,cash:0,holdings:0,cost:0,cost_active:0,unrealized_gain_value:0,unrealized_gain_percent:0},transactions:[],holdings:[]}}function Pt(){return{deposit:0,withdrawal:0,transfer:0,buy:0,sell:0,dividend:0,interest:0,income:0,fees:0,taxes:0,cash:0,total:0}}function Lt(u){return{year:u.getUTCFullYear(),month:u.getUTCMonth()+1}}function Cn(u,e){return u.reduce((l,r)=>l+xn(r,e),0)}function xn(u,e){return e.split(".").reduce((l,r)=>l[r],u)}function qt(...u){return u.reduce((e,l)=>e+l,0)}function Nt(u,e,l){const r=n=>n&&typeof n=="object";return Object.keys(u).forEach(n=>{u[n]=r(u[n])&&r(e[n])?Nt(u[n],e[n],l):u[n]+=e[n]*l}),u}function Sn(u,e){return Math.abs(u)>e}function Fn(u,e){return Math.abs(u)<e}function Ut(u,e){const l=new Date(u);return l.setDate(l.getDate()+e),l}class In{constructor(){yt(this,"initialized",!1);yt(this,"user",null);yt(this,"currencies",null);yt(this,"accounts",null);yt(this,"transactions",null);yt(this,"stocks",null);yt(this,"today",null);yt(this,"weeks52",null);this.wealthica=new bn}async initialize(){this.initialized||(this.today=new Date(new Date().setHours(0,0,0,0)),this.weeks52=new Date(new Date(this.today)),this.weeks52.setDate(this.today.getDate()-364),[this.user,this.currencies]=await Promise.all([this.load_user(),this.load_currencies()]),[this.accounts,this.transactions]=await Promise.all([this.load_accounts(),this.load_transactions()]),this.stocks=await this.load_stocks()),this.initialized=!0}load_user(){return this.wealthica.fetch_user()}load_currencies(){return this.wealthica.fetch_currencies().then(e=>{const l=e.find(({preferred:r})=>r);return Promise.all(e.filter(({_id:r})=>r!==l._id).map(r=>this.wealthica.fetch_currency(l._id,r._id).then(n=>{r.history=n.data.map((t,o)=>({date:Ut(n.from,o),rate:t}))}))).then(()=>e)})}load_accounts(){return this.wealthica.fetch_institutions().then(e=>e.flatMap(l=>Array.from(l.investments.reduce((r,n)=>{let t=(n.account_number??n.id).toUpperCase();if(!n.ignored&&!Tn(t)){let o=r.get(t)??{institution:{name:l.name,type:l.type},number:t,name:n.name,type:kn(t,n.type),order:En(t),no_holdings:On(t),subaccounts:[]};o.subaccounts.push({id:n._id,name:n.name,currency:n.currency,no_holdings:o.no_holdings}),r.set(t,o)}return r},new Map).values())).sort((l,r)=>l.order-r.order))}load_transactions(){return this.wealthica.fetch_transactions().then(e=>{const l={};return e.sort((r,n)=>r.settlement_dt-n.settlement_dt).map((r,n)=>(l[r.subaccount_id]=(l[r.subaccount_id]||0)+r.total,{...r,balance:l[r.subaccount_id],index:n})).sort((r,n)=>n.settlement_dt-r.settlement_dt||n.index-r.index)})}load_stocks(){const e={},l=this.transactions.filter(r=>{var n;return(n=r.security)==null?void 0:n.symbol}).reduce((r,{symbolMX:n,security:t})=>(r[n]??(r[n]={security_id:t==null?void 0:t.id,currency:t==null?void 0:t.currency}),r),{});return this.wealthica.fetch_quotes(Object.keys(l)).then(r=>Promise.all(Object.keys(l).map(n=>this.wealthica.fetch_history(l[n].security_id).then(t=>{const o=r.securities.find(F=>F.symbolMX===n),E=t.data.map((F,x)=>({date:Ut(t.from,x),price:F})),A=E.filter(({date:F})=>new Date(F)<=this.today&&new Date(F)>=this.weeks52).reduce((F,x)=>({high:!F.high||x.price>F.high.price?x:F.high,low:!F.low||x.price<F.low.price?x:F.low}),{high:null,low:null}),U=t.last.value-t.change;e[n]={currency:l[n].currency,close:{date:void 0,price:U},change:{value:t.change,percent:t.change/U},current:{date:t.last.date,price:t.last.value},data:{history:t,security:o},history:E,weeks52:A},e[n]=this.update_realtime_quote(e[n],o)})))).then(()=>e)}update_realtime_quote(e,l){return l&&(e.change.value=l.change,e.change.percent=l.change/(l.price-l.change),e.current.date=l.date,e.current.price=l.price),e}get_currency(e,l=null){var t;const r=this.currencies.find(({_id:o})=>o===e),n=l&&((t=r.history)==null?void 0:t.filter(o=>o.date<=l).sort((o,E)=>E.date-o.date)[0])||null;return{id:r._id,date:l?(n==null?void 0:n.date)||l:r.update_date,rate:l?(n==null?void 0:n.rate)||1:r.rate}}get_xrate(e,l,r){var n,t;return(((n=this.get_currency(l,r))==null?void 0:n.rate)??1)/(((t=this.get_currency(e,r))==null?void 0:t.rate)??1)}get_quote(e,l=null){const r=l&&e.history.filter(n=>n.date<=l).sort((n,t)=>t.date-n.date)[0]||null;return{currency:e.currency,date:l?(r==null?void 0:r.date)||null:e.current.date,value:l?(r==null?void 0:r.price)||null:e.current.price}}get_accounts(){return this.accounts}get_transactions(e=null,l=null){return this.transactions.filter(r=>(!e||r.subaccount_id==e)&&(!l||r.settlement_dt<=l))}get_holdings(e=null,l=null,r=!0){let n=this.get_transactions(e,l).filter(t=>{var o;return(o=t.security)==null?void 0:o.symbol}).sort((t,o)=>t.settlement_dt-o.settlement_dt||t.index-o.index).reduce((t,o)=>(this.find_or_initialize_holdings(t,o).forEach(E=>{if(t.includes(E)||t.push(E),o){let A=null;if(o.type=="sell"&&Fn(o.quantity,E.id.quantity)){let U=t.findIndex(x=>x===E),F=this.split_holding(E,o.quantity);E=F.holding_1,t[U]=F.holding_1,t.push(F.holding_2)}else if(o.type!="split"&&Sn(o.quantity,E.id.quantity)){let U=this.split_transaction(o,E.id.quantity);o=U.transaction_1,A=U.transaction_2}this.update_holding_with_transaction_data(E,o),E.transactions.push(o),o=A}}),t),[]);return n.filter(t=>t.id.active).forEach(t=>this.update_holding_with_stock_data(t,l)),n.sort((t,o)=>t.id.subaccount_id.localeCompare(o.id.subaccount_id)||t.id.symbol.localeCompare(o.id.symbol)),n.forEach(t=>t.transactions.sort((o,E)=>new Date(E.settlement_date)-new Date(o.settlement_date))),n=n.filter(t=>t.id.active||r),n}find_or_initialize_holdings(e,l){let r=[];return l.type!=="buy"&&(r=e.filter(n=>n.id.subaccount_id===l.subaccount_id&&n.id.symbolMX===l.symbolMX&&n.id.active===!0),r.length===0&&(r=e.filter(n=>n.id.subaccount_id===l.subaccount_id&&n.id.symbolMX===l.symbolMX&&n.id.lot===l.quantity&&n.id.active===!1))),r.length!==0?r:[Mn(l)]}split_holding(e,l){const r=Math.abs(l)/e.id.quantity,n=t=>{const o=structuredClone(e);return o.id.lot=e.id.lot*t,o.id.quantity=e.id.quantity*t,o.data.cost.value=e.data.cost.value*t,o.data.market.value=e.data.market.value*t,o.data.market.value_CAD=e.data.market.value_CAD*t,o.data.return.dividend=e.data.return.dividend*t,o.data.return.interest=e.data.return.interest*t,o.data.return.fees=e.data.return.fees*t,o.data.return.taxes=e.data.return.taxes*t,o.data.return.total=e.data.return.total*t,o.data.return.gain.realized=e.data.return.gain.realized*t,o};return{holding_1:n(r),holding_2:n(1-r)}}split_transaction(e,l){const r=l/Math.abs(e.quantity),n=t=>Object.assign({},e,{quantity:e.quantity*t,fee:e.fee*t,amount:e.amount*t,total:e.total*t,balance:e.balance-e.amount+e.amount*t});return{transaction_1:n(r),transaction_2:n(1-r)}}update_holding_with_transaction_data(e,l){var o;const r=e.data,n=e.data.return,t={buy:()=>{e.id.quantity=l.quantity,e.id.active=!0,r.cost.value=-l.amount,r.cost.price=r.cost.value/e.id.quantity,r.cost.date=l.settlement_dt},sell:()=>{e.id.quantity+=l.quantity,e.id.active=e.id.quantity>0,r.market.price=l.price,r.market.price_CAD=l.price,r.market.value=l.amount,r.market.value_CAD=l.amount,r.market.date=l.settlement_dt,n.gain.realized+=(l.price-r.cost.price)*Math.abs(l.quantity)},split:()=>{e.id.lot+=l.quantity,e.id.quantity+=l.quantity,r.cost.price=r.cost.value/e.id.quantity},dividend:()=>{n.dividend+=l.amount},interest:()=>{n.interest+=l.amount},tax:()=>{n.taxes-=l.amount}};(o=t[l.type])==null||o.call(t),n.fees+=l.fee||0,n.total=qt(n.dividend,n.interest,-n.taxes,-n.fees,n.gain.realized,n.gain.unrealized.overall.amount)}update_holding_with_stock_data(e,l){const r=e.data,n=e.data.return,t=this.stocks[e.id.symbolMX],o=this.get_quote(t,l),E=this.get_xrate(e.id.currency,"cad",l),A=this.get_xrate(o.currency,e.id.currency,l),U=o.value*A,F=U*e.id.quantity,x=U-r.cost.price;e.stock=t,r.close.price=t.close.price,r.close.value=t.close.price*e.id.quantity,r.weeks52.low.date=t.weeks52.low.date,r.weeks52.low.price=t.weeks52.low.price*A,r.weeks52.high.date=t.weeks52.high.date,r.weeks52.high.price=t.weeks52.high.price*A,r.market.date=o.date,r.market.price=U,r.market.value=F,r.market.price_CAD=U*E,r.market.value_CAD=F*E,n.gain.unrealized.daily.change=t.change.value,n.gain.unrealized.daily.percent=t.change.percent,n.gain.unrealized.daily.amount=t.change.value*e.id.quantity,n.gain.unrealized.overall.change=x,n.gain.unrealized.overall.percent=x/r.cost.price,n.gain.unrealized.overall.amount=x*e.id.quantity,n.total=qt(n.dividend,n.interest,-n.taxes,-n.fees,n.gain.realized,n.gain.unrealized.overall.amount)}get_account_summary(e,l){var n;let r=Wt();return(n=this.accounts.find(t=>t.number===e))==null||n.subaccounts.forEach(({id:t,currency:o})=>{const E=this.get_xrate(o,"cad",l),A=this.get_subaccount_summary(t,o,l);r.subaccounts[t]=A,r.activities=Nt(r.activities,A.activities,E),r.total=Nt(r.total,A.total,E)}),r.total.unrealized_gain_percent=(r.total.holdings-r.total.cost)/r.total.cost,r}get_subaccount_summary(e,l,r){const{year:n,month:t}=Lt(r),o=Wt(l),{activities:E}=o;return this.get_transactions(e,r).forEach(A=>{this.update_subaccount_summary(E.all,A)&&A.year==n&&this.update_subaccount_summary(E.year,A)&&A.month==t&&this.update_subaccount_summary(E.month,A),o.transactions.push(A)}),o.holdings=this.get_holdings(e,r),o.holdings.forEach(A=>{o.total.holdings+=A.id.active?A.data.market.value:0,o.total.cost+=A.id.active?A.data.cost.value:0,o.total.unrealized_gain_value+=A.data.return.gain.unrealized.overall.amount}),o.total.cash=o.activities.all.cash,o.total.unrealized_gain_percent=o.total.unrealized_gain_value/o.total.cost,o.total.balance=o.total.cash+o.total.holdings,o}update_subaccount_summary(e,l){var o;const r=e,n=l,t={deposit:()=>r.deposit+=n.amount,withdrawal:()=>r.withdrawal+=n.amount,transfer:()=>r.transfer+=n.amount,transfer_in:()=>r.transfer+=n.amount,transfer_out:()=>r.transfer+=n.amount,buy:()=>r.buy+=n.amount,sell:()=>r.sell+=n.amount,dividend:()=>r.dividend+=n.amount,interest:()=>r.interest+=n.amount,income:()=>r.income+=n.amount,fee:()=>r.fees+=n.amount,tax:()=>r.taxes+=n.amount};return(o=t[n.type])==null||o.call(t),r.fees-=n.fee||0,r.cash+=n.total,r.total=r.deposit+r.withdrawal+r.transfer+r.buy+r.sell+r.dividend+r.interest+r.income+r.fees+r.taxes,!0}calc_portfolio_totals(e,l){return e.reduce((n,t)=>{var b,m,C,M;const{data:o,id:E}=t,{return:A}=o;t.id.currency;const U=this.get_xrate(t.id.currency,l);let F=n.portfolio,x=(b=n.accounts)[m=E.account_number]??(b[m]={...At(),subaccounts:{}}),p=(C=x.subaccounts)[M=E.subaccount_id]??(C[M]=At());return F.cost_amount+=o.cost.amount*U,F.close_amount+=o.close.amount*U,F.gain_unrealized_daily_amount+=A.gain.unrealized.daily.amount*U,F.gain_unrealized_overall_amount+=A.gain.unrealized.overall.amount*U,F.market_value+=o.market.value*U,F.market_value_USD+=usd?o.market.value:0,F.market_value_CAD+=usd?o.market.value:0,F.market_total_CAD+=o.market.value_CAD,F.gain_unrealized_daily_percent=F.market_value/(F.market_value-F.gain_unrealized_daily_amount)-1,F.gain_unrealized_overall_percent=F.market_value/(F.market_value-F.gain_unrealized_overall_amount)-1,x.cost_amount+=o.cost.amount*U,x.close_amount+=o.close.amount*U,x.gain_unrealized_daily_amount+=A.gain.unrealized.daily.amount*U,x.gain_unrealized_overall_amount+=A.gain.unrealized.overall.amount*U,x.market_value+=o.market.value*U,x.market_value_USD+=usd?o.market.value:0,x.market_value_CAD+=usd?o.market.value:0,x.market_total_CAD+=o.market.value_CAD,x.gain_unrealized_daily_percent=x.market_value/(x.market_value-x.gain_unrealized_daily_amount)-1,x.gain_unrealized_overall_percent=x.market_value/(x.market_value-x.gain_unrealized_overall_amount)-1,p.cost_amount+=o.cost.amount,p.close_amount+=o.close.amount,p.gain_unrealized_daily_amount+=A.gain.unrealized.daily.amount,p.gain_unrealized_overall_amount+=A.gain.unrealized.overall.amount,p.market_value+=o.market.value,p.market_value_USD+=usd?o.market.value:0,p.market_value_CAD+=usd?o.market.value:0,p.market_total_CAD+=o.market.value_CAD,p.gain_unrealized_daily_percent=p.market_value/(p.market_value-p.gain_unrealized_daily_amount)-1,p.gain_unrealized_overall_percent=p.market_value/(p.market_value-p.gain_unrealized_overall_amount)-1,n},{portfolio:{...At(),accounts:{}}})}}const An={class:"tab-container"},Pn={class:"tab-logo-container"},zn=["src"],Rn={name:"tab_dashboard"},Vt=Object.assign(Rn,{setup(u){return(e,l)=>(ne(),le("div",An,[f("div",Pn,[f("img",{src:lt("tab_dashboard_icon.png"),alt:"Under Construction",class:"tab-logo-centered"},null,8,zn)])]))}}),Ft=(u,e)=>{const l=u.__vccOpts||u;for(const[r,n]of e)l[r]=n;return l},Ln={props:{span:{type:Number,default:1},value:{type:String,default:""},background:{type:Boolean,default:!1}}},Nn=["colspan"],Dn={class:"header-centered"};function jn(u,e,l,r,n,t){return ne(),le("th",{colspan:l.span},[f("div",Dn,[f("div",{class:Ke(["header-value",[{background:l.background}]])},ut(l.value),3)])],8,Nn)}const ht=Ft(Ln,[["render",jn]]),$n=["colspan"],Hn={class:"account-data-wraper"},Bn={class:"account-identifier"},Wn=["src"],qn={class:"account-name"},Un={key:0,class:"toggle-arrow"},Vn=["src"],Gn={class:"account-details"},Jn={class:"account-number"},Yn={class:"account-type"},Xn={props:{span:{type:Number,default:1},institution:{type:String,default:""},name:{type:String,default:""},number:{type:String,default:""},type:{type:String,default:""},currency:{type:String,default:""},show_expand:{type:Boolean,default:!0},expanded:{type:Boolean,default:!1}},emits:["update:expanded"],methods:{toggle(u){this.$emit("update:expanded",u)}},computed:{institution_icon(){if(this.institution=="--")switch(this.currency){case"cad":return lt("currency_cad.png");case"usd":return lt("currency_usd.png");default:return lt("section_expanded.png")}else return`${pn}/${this.institution}.png`}}},xt=Object.assign(Xn,{__name:"td_account",setup(u){return(e,l)=>(ne(),le("td",{class:"account-cell",colspan:u.span},[f("div",Hn,[f("div",Bn,[f("div",null,[f("img",{src:e.institution_icon,class:"institution-icon"},null,8,Wn)]),f("div",qn,ut(u.name),1),u.show_expand?(ne(),le("div",Un,[f("img",{src:jt,width:"13",height:"8",class:Ke({expanded:u.expanded}),onClick:l[0]||(l[0]=Dt(r=>e.toggle(!u.expanded),["stop"]))},null,10,Vn)])):De("",!0)]),f("div",Gn,[f("div",Jn,ut(u.number),1),f("div",Yn,ut(u.type),1)])])],8,$n))}}),Kn=["title"],Qn={class:"company-data-wraper"},Zn={class:""},er=["src"],tr={class:"company-data"},nr={class:"company-symbol"},rr={class:"company-name"},ir={key:0,class:"toggle-arrow"},or=["src"],ar={props:{holding:{default:null},show_expand:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1}},emits:["update:expanded"],data(){return{logo:Bt,error:!1}},methods:{toggle(u){this.$emit("update:expanded",u)},load_logo(){this.logo=this.error?this.logo:this.logo_path()},logo_path(){return this.cash?wn:`${_n}/${this.holding.symbolMX}/logo`},reset_logo(){this.error=!0,this.logo=Bt}},computed:{cash(){return this.holding.symbol=="REALCASH"},company_symbol(){return this.cash?"CASH":this.holding.symbol},company_name(){return this.cash?"CASH BALANCE":this.holding.name},tooltip(){return this.cash?"CASH BALANCE":this.holding.symbolMX}}},en=Object.assign(ar,{__name:"td_company",setup(u){return(e,l)=>(ne(),le("td",{class:"company-cell",title:e.tooltip},[f("div",Qn,[f("div",Zn,[f("img",{src:e.logo,onLoad:l[0]||(l[0]=(...r)=>e.load_logo&&e.load_logo(...r)),onError:l[1]||(l[1]=(...r)=>e.reset_logo&&e.reset_logo(...r)),alt:"company_symbol",class:"company-logo"},null,40,er)]),f("div",tr,[f("div",nr,ut(e.company_symbol),1),f("div",rr,ut(e.company_name),1)]),u.show_expand?(ne(),le("div",ir,[f("img",{src:jt,width:"13",height:"8",class:Ke({expanded:u.expanded}),onClick:l[2]||(l[2]=Dt(r=>e.toggle(!u.expanded),["stop"]))},null,10,or)])):De("",!0)])],8,Kn))}}),sr={props:{value:{default:null},formatter:{type:Function,default:null},align:{type:String,validator:function(u){return["left","center","right"].includes(u)},default:"left"},bold:{type:Boolean,default:!1},inactive:{type:Boolean,default:!1},colored:{type:Boolean,default:!1},highlighted:{type:Boolean,default:!1},arrow:{type:Boolean,default:!1},span:{type:Number,default:1},tooltip:{default:null},visible:{type:Boolean,default:!0},show_zero:{type:Boolean,default:!0},show_null:{type:Boolean,default:!0}},computed:{formatted_value(){return!this.show_null&&!this.value||typeof this.value=="number"&&!this.show_zero&&this.value==0?"":this.formatter?this.formatter(this.value):this.value},font_color(){return this.inactive?"inactive":this.colored&&typeof this.value=="number"?this.value>0?"green":this.value<0?"red":"black":"black"},show_arrow(){return this.arrow&&typeof this.value=="number"&&this.value!=0}}},lr=["colspan","title"],ur=f("path",{"data-v-ae951afa":"",d:"M5.79 15.013H3.778V7.806H.813L4.808.398l4.004 7.408H5.791v7.207z",fill:"currentColor"},null,-1),cr=[ur];function dr(u,e,l,r,n,t){return ne(),le("td",{class:Ke(["cell-custom",[l.align]]),colspan:l.span,title:l.tooltip},[l.visible?(ne(),le("div",{key:0,class:Ke(["cell-content",[l.align]])},[f("span",{class:Ke(["cell-value text-color",[t.font_color,{highlighted:l.highlighted,bold:l.bold}]])},ut(t.formatted_value),3),t.show_arrow?(ne(),le("svg",{key:0,viewBox:"0 0 9 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:Ke(["arrow-icon",[t.font_color]])},cr,2)):De("",!0)],2)):De("",!0)],10,lr)}const it=Ft(sr,[["render",dr]]),nt={number:new Intl.NumberFormat("en-US"),money:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),price:new Intl.NumberFormat("en-US",{minimumFractionDigits:4,maximumFractionDigits:4}),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2}),xrate:new Intl.NumberFormat("en-US",{minimumFractionDigits:4,maximumFractionDigits:4}),date:new Intl.DateTimeFormat("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",timeZone:"UTC"}),local_date:new Intl.DateTimeFormat("en-CA",{year:"numeric",month:"2-digit",day:"2-digit"}),long_date:new Intl.DateTimeFormat("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",timeZone:"UTC"}),long_datetime:new Intl.DateTimeFormat("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"UTC"}),month_year:new Intl.DateTimeFormat("default",{month:"long",year:"numeric"})},Re={number(u){return nt.number.format(u)},money(u){return nt.money.format(u)},money_plus(u){return(u>0?"+":"")+nt.money.format(u)},money_currency(u,e){return`${nt.money.format(u)} ${e.toUpperCase()}`},price(u,e=null){return`${nt.price.format(u)}`+(e?` ${e.toUpperCase()}`:"")},percent(u){return nt.percent.format(u)},percent_plus(u){return(u>0?"+":"")+nt.percent.format(u)},date(u){let e=new Date(u);return isNaN(e.getTime())?"Invalid":nt.date.format(e)},date(u){let e=new Date(u);return isNaN(e.getTime())?"Invalid":nt.date.format(e)},local_date(u){let e=new Date(u);return isNaN(e.getTime())?"Invalid":nt.local_date.format(e)},long_date(u){let e=new Date(u);return isNaN(e.getTime())?"Invalid":nt.long_date.format(e)},long_datetime(u){let e=new Date(u);return isNaN(e.getTime())?"Invalid":nt.long_datetime.format(e)},month_year(u){let e=new Date(`${u}-01T12:00`);return isNaN(e.getTime())?"Invalid":nt.month_year.format(e)},month_year_ym(u,e){let l=new Date(u,e-1,1);return isNaN(l.getTime())?"Invalid":nt.month_year.format(l)},xrate_cad(u){return`1 USD = ${nt.xrate.format(u)} CAD`},tip_price(u,e,l,r,n){return`${Re.price(u,e)}
`+(l&&e!==r?`${Re.price(l,r)}
`:"")+`${Re.long_date(n)}`},currency_info(u,e){return u===""?"":`1 ${u.toUpperCase()} = ${(1/e).toFixed(4)} CAD, 1 CAD = ${e.toFixed(4)} ${u.toUpperCase()}`},tip_daily_change(u,e){return Re.money_plus(u)+" on "+Re.long_datetime(e)},tip_xrate(u,e){return u==="usd"?`1 USD = ${Re.xrate_cad(e)} CAD`:null}},fr={components:{td_base:it},props:{...it.props,formatter:{type:Function,default:Re.number},align:{default:"right"}}},Ht=Object.assign(fr,{__name:"td_number",setup(u){return(e,l)=>(ne(),rt(it,Mt(e.$props,{formatter:u.formatter,align:u.align}),null,16,["formatter","align"]))}}),hr={components:{td_base:it},props:{...it.props,formatter:{type:Function,default:Re.money},align:{default:"right"}}},ce=Object.assign(hr,{__name:"td_money",setup(u){return(e,l)=>(ne(),rt(it,Mt(e.$props,{formatter:u.formatter,align:u.align}),null,16,["formatter","align"]))}}),mr={components:{td_base:it},props:{...it.props,align:{default:"right"}}},ft=Object.assign(mr,{__name:"td_percent",setup(u){return(e,l)=>(ne(),rt(it,Mt(e.$props,{formatter:Ge(Re).percent,align:u.align}),null,16,["formatter","align"]))}}),gr={key:0,id:"listing"},pr={class:"listing portfolio"},vr=f("th",{colspan:"5"},null,-1),yr=f("th",{colspan:"7"},null,-1),_r=f("tr",{class:"bottom-line"},[f("th",{colspan:"5",class:"justify-left"},"Accounts"),f("th",null,"Gain $"),f("th",null,"Gain %"),f("th",null,"Gain $"),f("th",null,"Gain %"),f("th",{colspan:"2"},"CAD"),f("th",{colspan:"2"},"USD"),f("th",{colspan:"2"},"Total CAD"),f("th",null,"Portfolio")],-1),wr={class:"subaccount toggle-row"},br=f("th",null,null,-1),kr=f("th",null,null,-1),Tr=f("th",null,null,-1),Er=f("th",null,null,-1),Or=f("tr",{class:"justify-right bottom-line"},[f("th",{class:"justify-left"},"Company"),f("th"),f("th",{class:"justify-center"},"Qty"),f("th",null,"Price"),f("th",null,"Value"),f("th",null,"Gain $"),f("th",null,"Gain %"),f("th",null,"Gain $"),f("th",null,"Gain %"),f("th",null,"low"),f("th",null,"high"),f("th",null,"Price"),f("th",null,"Value"),f("th",null,"Price"),f("th",null,"Value"),f("th",null,"Weigth")],-1),Mr={class:"holdings"},Cr=f("td",{class:"fill-space"},null,-1),xr={class:"total-line"},Sr=f("td",{colspan:"4",class:"justify-left"},"Total",-1),Fr=f("td",null,null,-1),Ir=f("td",null,null,-1),Ar=f("td",null,null,-1),Pr=f("td",null,null,-1),zr={inject:["data","state"],data(){return{initialized:void 0,x_usd:null,accounts:null,holdings:null,totals:null,expanded:{}}},created(){this.initialized=this.data.initialize().then(()=>this.load_data())},methods:{load_data(){this.state.loading=!0,this.initialize_expanded(),this.initialized.then(()=>{console.log("socks_data",this.data.stocks),this.x_usd=this.data.get_currency("usd"),this.accounts=this.data.get_accounts(),this.holdings=this.data.get_holdings(),this.totals=this.data.calc_portfolio_totals(this.holdings,"cad"),console.log("holdings",this.holdings),this.state.loading=!1})},initialize_expanded(){this.expanded={accounts:{},subaccounts:{},holdings:{}}},holdings(u){return this.holdings.filter(e=>e.subaccount_id===u)},get_market_price_tooltip(u){var e,l;return Re.tip_price(u.data.market.price,u.id.currency,(e=u.security)==null?void 0:e.price,(l=u.security)==null?void 0:l.currency,u.data.market.date)}}},Gt=Object.assign(zr,{__name:"portfolio",setup(u){return(e,l)=>{const r=ln("tr_spacer");return e.accounts&&e.accounts.length?(ne(),le("div",gr,[f("table",pr,[f("thead",null,[f("tr",null,[vr,j(ht,{span:2,value:"Daily CAD",background:!0}),j(ht,{span:2,value:"Overall CAD",background:!0}),yr]),_r]),e.accounts?(ne(!0),le(Je,{key:0},mt(e.accounts,n=>(ne(),le("tbody",{key:n.number},[f("tr",{class:Ke(["account toggle-row",[{expanded:e.expanded.accounts[n.number]}]])},[j(xt,{span:5,institution:n.institution.type,name:n.name,number:n.number,type:n.type,expanded:e.expanded.accounts[n.number],"onUpdate:expanded":t=>e.expanded.accounts[n.number]=t},null,8,["institution","name","number","type","expanded","onUpdate:expanded"]),j(ce,{value:1.1,colored:!0,highlighted:!0}),j(ft,{value:1.1,colored:!0,arrow:!0}),j(ce,{value:1.1,colored:!0,highlighted:!0}),j(ft,{v:"",colored:!0,arrow:!0}),j(ce,{span:2,value:1.1}),j(ce,{span:2,value:1.1}),j(ce,{span:2,value:1.1,colored:!0}),j(ft,{value:1.1})],2),e.expanded.accounts[n.number]?(ne(!0),le(Je,{key:0},mt(n.subaccounts,t=>(ne(),le(Je,{key:t.id},[f("tr",wr,[j(xt,{span:5,institution:"--",name:t.name,currency:t.currency,expanded:e.expanded.subaccounts[t.id],"onUpdate:expanded":o=>e.expanded.subaccounts[t.id]=o},null,8,["name","currency","expanded","onUpdate:expanded"]),j(ce,{value:1.1,colored:!0,highlighted:!0,visible:!e.expanded.subaccounts[t.id]},null,8,["visible"]),j(ft,{value:1.1,colored:!0,arrow:!0,visible:!e.expanded.subaccounts[t.id]},null,8,["visible"]),j(ce,{value:1.1,colored:!0,highlighted:!0,visible:!e.expanded.subaccounts[t.id]},null,8,["visible"]),j(ft,{value:1.1,colored:!0,arrow:!0,visible:!e.expanded.subaccounts[t.id]},null,8,["visible"]),j(ce,{span:2,value:1.1,visible:!e.expanded.subaccounts[t.id]},null,8,["visible"]),j(ce,{span:2,value:1.1,visible:!e.expanded.subaccounts[t.id]},null,8,["visible"]),j(ce,{span:2,value:1.1,colored:!0,visible:!e.expanded.subaccounts[t.id]},null,8,["visible"]),j(ft,{value:1.1,visible:!e.expanded.subaccounts[t.id]},null,8,["visible"])]),e.expanded.subaccounts[t.id]?(ne(),le(Je,{key:0},[f("tr",null,[br,kr,Tr,j(ht,{span:2,value:"Cost",background:!0}),j(ht,{span:2,value:"Daily",background:!0}),j(ht,{span:2,value:"Overall",background:!0}),j(ht,{span:2,value:"52 weeks",background:!0}),j(ht,{span:2,value:"Market",background:!0}),j(ht,{span:2,value:"Market CAD",background:!0}),Er]),Or,(ne(!0),le(Je,null,mt(e.holdings[t.id],o=>(ne(),le("tr",Mr,[j(en,{holding:o.id},null,8,["holding"]),Cr,j(Ht,{value:o.id.lot,tooltip:Ge(Re).long_date(o.data.cost.date),align:"center"},null,8,["value","tooltip"]),j(ce,{value:o.data.cost.price,tooltip:Ge(Re).long_date(o.data.cost.date)},null,8,["value","tooltip"]),j(ce,{value:o.data.cost.value,tooltip:Ge(Re).long_date(o.data.cost.date)},null,8,["value","tooltip"]),j(ce,{value:o.data.return.gain.unrealized.daily.amount,colored:!0,highlighted:!0},null,8,["value"]),j(ft,{value:o.data.return.gain.unrealized.daily.percent,colored:!0,arrow:!0},null,8,["value"]),j(ce,{value:o.data.return.gain.unrealized.overall.amount,colored:!0,highlighted:!0,arrow:!0},null,8,["value"]),j(ft,{value:o.data.return.gain.unrealized.overall.percent,colored:!0,highlighted:!0,arrow:!0},null,8,["value"]),j(ce,{value:o.stock.weeks52.low.price},null,8,["value"]),j(ce,{value:o.stock.weeks52.high.price},null,8,["value"]),j(ce,{value:o.data.market.price,tooltip:e.get_market_price_tooltip(o)},null,8,["value","tooltip"]),j(ce,{value:o.data.market.value,tooltip:Ge(Re).long_date(o.data.market.date)},null,8,["value","tooltip"]),j(ce,{value:o.data.market.price_CAD,colored:!0,tooltip:e.get_market_price_tooltip(o)},null,8,["value","tooltip"]),j(ce,{value:o.data.market.value_CAD,colored:!0,tooltip:Ge(Re).long_date(o.data.market.date)},null,8,["value","tooltip"]),j(ft,{value:.1})]))),256)),f("tr",xr,[Sr,j(ce,{value:e.holdings_totals.accounts[n.number][t.id].book_value},null,8,["value"]),j(ce,{value:e.holdings_totals.accounts[n.number][t.id].gain_daily_amount,colored:!0,highlighted:!0},null,8,["value"]),j(ft,{value:e.holdings_totals.accounts[n.number][t.id].gain_daily_percent,colored:!0,arrow:!0},null,8,["value"]),j(ce,{value:e.holdings_totals.accounts[n.number][t.id].gain_overall_amount,colored:!0,highlighted:!0},null,8,["value"]),j(ft,{value:e.holdings_totals.accounts[n.number][t.id].gain_overall_percent,colored:!0,arrow:!0},null,8,["value"]),Fr,Ir,Ar,j(ce,{value:e.holdings_totals.accounts[n.number][t.id].market_value},null,8,["value"]),Pr,j(ce,{value:e.holdings_totals.accounts[n.number][t.id].market_total_CAD,colored:!0},null,8,["value"]),j(ft,{value:e.holdings_totals.accounts[n.number][t.id].weight_account,colored:!1},null,8,["value"])]),j(r)],64)):De("",!0)],64))),128)):De("",!0)]))),128)):De("",!0)])])):De("",!0)}}}),Rr={class:"tab-container"},Lr={class:"tab-logo-container"},Nr=["src"],Dr={name:"tab_performance"},Jt=Object.assign(Dr,{setup(u){return(e,l)=>(ne(),le("div",Rr,[f("div",Lr,[f("img",{src:lt("tab_performance_icon.png"),alt:"Under Construction",class:"tab-logo-centered"},null,8,Nr)])]))}}),jr={class:"tab-container"},$r={class:"tab-logo-container"},Hr=["src"],Br={name:"tab_wealth"},Yt=Object.assign(Br,{setup(u){return(e,l)=>(ne(),le("div",jr,[f("div",$r,[f("img",{src:lt("tab_wealth_icon.png"),alt:"Under Construction",class:"tab-logo-centered"},null,8,Hr)])]))}}),Wr=["colspan"],qr={class:"section-identifier"},Ur=["src"],Vr={class:"section-name"},Gr={key:0,class:"toggle-arrow"},Jr=["src"],Yr={props:{span:{type:Number,default:1},icon:{type:String,default:""},name:{type:String,default:""},show_expand:{type:Boolean,default:!0},expanded:{type:Boolean,default:!1},fix_width:{type:String,default:""}},emits:["update:expanded"],methods:{toggle(u){this.$emit("update:expanded",u)}},computed:{section_icon(){return lt(`section_${this.icon||"default"}.png`)},get_width(){return!this.fix_width==""?this.fix_width:"auto"}}},tn=Object.assign(Yr,{__name:"td_section",setup(u){return(e,l)=>(ne(),le("td",{class:"section-cell",colspan:u.span},[f("div",{class:"section-data-wraper",style:un({width:e.get_width})},[f("div",qr,[f("div",null,[f("img",{src:e.section_icon,class:"section-icon"},null,8,Ur)]),f("div",Vr,ut(u.name),1)]),f("div",null,[u.show_expand?(ne(),le("div",Gr,[f("img",{src:jt,width:"13",height:"8",class:Ke({expanded:u.expanded}),onClick:l[0]||(l[0]=Dt(r=>e.toggle(!u.expanded),["stop"]))},null,10,Jr)])):De("",!0)])],4)],8,Wr))}}),Xr={class:"template-section"},Kr={props:["name","icon","expanded","span"],emits:["update:expanded"],methods:{toggle(u){this.$emit("update:expanded",u)}}},zt=Object.assign(Kr,{__name:"tr_section",setup(u){return(e,l)=>(ne(),le("tr",Xr,[j(tn,{span:u.span,name:u.name,icon:u.icon,expanded:u.expanded,"onUpdate:expanded":l[0]||(l[0]=r=>e.toggle(r))},null,8,["span","name","icon","expanded"])]))}}),Qr={},Zr={class:"spacer"},ei=f("td",null,null,-1),ti=[ei];function ni(u,e){return ne(),le("tr",Zr,ti)}const kt=Ft(Qr,[["render",ni]]),ri={props:{value:{default:null},value_display:{default:null},formatter:{type:Function,default:null},align:{type:String,validator:function(u){return["left","center","right"].includes(u)},default:"left"},bold:{type:Boolean,default:!1},colored:{type:Boolean,default:!1},highlighted:{type:Boolean,default:!1},arrow:{type:Boolean,default:!1},tooltip:{default:null},visible:{type:Boolean,default:!0},show_zero:{type:Boolean,default:!0},show_null:{type:Boolean,default:!0}},computed:{formatted_value(){return this.value_display?this.value_display:!this.show_null&&!this.value||typeof this.value=="number"&&!this.show_zero&&this.value==0?"":this.formatter?this.formatter(this.value):this.value},font_color(){return this.colored&&typeof this.value=="number"?this.value>0?"green":this.value<0?"red":"black":"black"},show_arrow(){return this.arrow&&typeof this.value=="number"&&this.value!=0}}},ii=["title"],oi=f("path",{"data-v-ae951afa":"",d:"M5.79 15.013H3.778V7.806H.813L4.808.398l4.004 7.408H5.791v7.207z",fill:"currentColor"},null,-1),ai=[oi];function si(u,e,l,r,n,t){return ne(),le("div",{class:Ke(["div-custom",[l.align]]),title:l.tooltip},[l.visible?(ne(),le("div",{key:0,class:Ke(["div-custom-content",[l.align]])},[f("span",{class:Ke(["div-custom-value text-color",[t.font_color,{highlighted:l.highlighted,bold:l.bold}]])},ut(t.formatted_value),3),t.show_arrow?(ne(),le("svg",{key:0,viewBox:"0 0 9 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:Ke(["div-custom-arrow-icon",[t.font_color]])},ai,2)):De("",!0)],2)):De("",!0)],10,ii)}const wt=Ft(ri,[["render",si]]),li={key:0,class:"account-summary"},ui={id:"details-section",class:"section left details-section"},ci=cn('<div class="details-column left bold"><div></div><div>Deposit</div><div>Withdrawal</div><div>Transfer</div><div>Buy</div><div>Sell</div><div>Dividend</div><div>Interest</div><div>Income</div><div>Taxes</div><div>Fees</div><div>Total</div></div>',1),di={class:"details-column right"},fi={class:"details-column right"},hi={class:"details-column right"},mi=f("div",{class:"end"},"All Time",-1),gi={id:"summary-section",class:"section right center"},pi={class:"summary-section"},vi=f("div",{class:"balance-label"},"Account Balance",-1),yi={class:"value-container"},_i=f("div",{class:"summary-label"},"Cash",-1),wi={class:"value-container"},bi=f("div",{class:"summary-label"},"Holdings",-1),ki={class:"value-container"},Ti=f("div",{class:"unrealized-label"},"Unrealized gain",-1),Ei={props:["summary","period","currency"],computed:{keys(){return["deposit","withdrawal","transfer","buy","sell","dividend","interest","income","taxes","fees","total"]},total(){return this.summary.total},unrealized_gain(){return`(${Re.percent_plus(this.summary.total.unrealized_gain_percent)}) ${Re.money(this.summary.total.unrealized_gain_value)}`}}},Xt=Object.assign(Ei,{__name:"ls_summary",setup(u){return(e,l)=>u.summary?(ne(),le("div",li,[f("div",ui,[ci,f("div",di,[f("div",null,ut(Ge(Re).month_year_ym(u.period.year,u.period.month)),1),(ne(!0),le(Je,null,mt(e.keys,r=>(ne(),rt(wt,{value:u.summary.activities.month[r],formatter:Ge(Re).money,align:"right",colored:!0},null,8,["value","formatter"]))),256))]),f("div",fi,[f("div",null,ut(u.period.year),1),(ne(!0),le(Je,null,mt(e.keys,r=>(ne(),rt(wt,{value:u.summary.activities.year[r],formatter:Ge(Re).money,align:"right",colored:!0},null,8,["value","formatter"]))),256))]),f("div",hi,[mi,(ne(!0),le(Je,null,mt(e.keys,r=>(ne(),rt(wt,{value:u.summary.activities.all[r],formatter:Ge(Re).money,align:"right",colored:!0},null,8,["value","formatter"]))),256))])]),f("div",gi,[f("div",pi,[f("div",null,[j(wt,{value:e.total.balance,value_display:Ge(Re).money_currency(e.total.balance,u.currency),align:"left",colored:!0,class:"balance-value"},null,8,["value","value_display"]),vi]),f("div",yi,[_i,j(wt,{value:e.total.cash,formatter:Ge(Re).money,align:"right",class:"summary-value"},null,8,["value","formatter"])]),f("div",wi,[bi,j(wt,{value:e.total.holdings,formatter:Ge(Re).money,align:"right",class:"summary-value"},null,8,["value","formatter"])]),f("div",ki,[Ti,j(wt,{value:e.total.unrealized_gain_value,value_display:e.unrealized_gain,tooltip:`Cost: ${Ge(Re).money(e.total.cost)}`,align:"right",colored:!0,class:"unrealized-value"},null,8,["value","value_display","tooltip"])])])])])):De("",!0)}}),Oi={components:{td_base:it},props:{...it.props,align:{default:"left"}}},Mi=Object.assign(Oi,{__name:"td_date",setup(u){return(e,l)=>(ne(),rt(it,Mt(e.$props,{formatter:Ge(Re).date,align:u.align}),null,16,["formatter","align"]))}}),Ci={components:{td_base:it},props:{...it.props,align:{default:"left"}}},Rt=Object.assign(Ci,{__name:"td_text",setup(u){return(e,l)=>(ne(),rt(it,Mt(e.$props,{formatter:null,align:u.align}),null,16,["align"]))}}),xi={class:"transactions-table"},Si={class:"transactions-header bottom-line"},Fi=f("th",{class:"justify-left"},"Date",-1),Ii=f("th",{class:"justify-left"},"Description",-1),Ai={key:0,class:"justify-left"},Pi=f("th",{class:"justify-left"},"Type",-1),zi=f("th",{class:"justify-center"},"Qte",-1),Ri=f("th",null,"Price",-1),Li=f("th",null,"Amount",-1),Ni=f("th",null,"Fee",-1),Di=f("th",null,"Total",-1),ji={key:1},$i={class:"transactions-month"},Hi={colspan:"8",class:"justify-left"},Bi={key:0},Wi={key:1},qi={class:"spacer top-line"},Ui=f("td",{colspan:"8"},null,-1),Vi={key:0},Gi={key:1},Ji={props:{transactions:{type:Array},show_symbol:{type:Boolean,default:!0},show_balance:{type:Boolean,default:!0}},methods:{tooltip_transaction_date(u){return`trade: ${Re.date(u.date)}
settlement: ${Re.date(u.settlement_date)}`}},computed:{transactions_by_month(){return this.transactions.sort((u,e)=>e.settlement_dt-u.settlement_dt||e.index-u.index).reduce((u,e)=>{var l;return(u[l=e.year_month]??(u[l]=[])).push(e),u},{})}}},nn=Object.assign(Ji,{__name:"ls_transactions",setup(u){return(e,l)=>(ne(),le("table",xi,[f("thead",null,[f("tr",Si,[Fi,Ii,u.show_symbol?(ne(),le("th",Ai,"Company")):De("",!0),Pi,zi,Ri,Li,Ni,Di,u.show_balance?(ne(),le("th",ji,"Balance")):De("",!0)])]),f("tbody",null,[(ne(!0),le(Je,null,mt(e.transactions_by_month,(r,n)=>(ne(),le(Je,{key:n},[f("tr",$i,[f("td",Hi,ut(Ge(Re).month_year(n)),1),u.show_symbol?(ne(),le("td",Bi)):De("",!0),u.show_balance?(ne(),le("td",Wi)):De("",!0)]),(ne(!0),le(Je,null,mt(r,t=>(ne(),le("tr",null,[j(Mi,{value:t.settlement_date,tooltip:e.tooltip_transaction_date(t)},null,8,["value","tooltip"]),j(Rt,{value:t.description,class:"transaction-description",tooltip:t.description},null,8,["value","tooltip"]),u.show_symbol?(ne(),rt(Rt,{key:0,value:t.symbol},null,8,["value"])):De("",!0),j(Rt,{value:t.type.toUpperCase()},null,8,["value"]),j(Ht,{value:t.quantity,align:"center",show_zero:!1,show_null:!1},null,8,["value"]),j(ce,{value:t.price,formatter:Ge(Re).price,show_zero:!1,show_null:!1},null,8,["value","formatter"]),j(ce,{value:t.amount},null,8,["value"]),j(ce,{value:-t.fee,show_zero:!1,show_null:!1},null,8,["value"]),j(ce,{value:t.total,colored:!0},null,8,["value"]),u.show_balance?(ne(),rt(ce,{key:1,value:t.balance,bold:!0},null,8,["value"])):De("",!0)]))),256))],64))),128))]),f("tfoot",null,[f("tr",qi,[Ui,u.show_symbol?(ne(),le("td",Vi)):De("",!0),u.show_balance?(ne(),le("td",Gi)):De("",!0)])])]))}}),Yi={class:"holdings_table"},Xi=f("th",{colspan:"2"},null,-1),Ki=f("th",null,null,-1),Qi=f("tr",{class:"justify-right bottom-line"},[f("th",{class:"justify-left"},"Company"),f("th",{class:"justify-center"},"Qty"),f("th",null,"Price"),f("th",null,"Value"),f("th",null,"Price"),f("th",null,"Value"),f("th",null,"Realized"),f("th",null,"Unrealized"),f("th",null,"Dividend"),f("th",null,"Interest"),f("th",null,"Fees"),f("th",null,"Taxes"),f("th",null,"Return")],-1),Zi={key:0,class:"state"},eo={key:0},to={colspan:" 13"},no={class:"total-line"},ro=f("td",{colspan:"3",class:"justify-left"},"Total",-1),io=f("td",null,null,-1),oo={key:0,class:"total-line"},ao=f("td",{colspan:"3",class:"justify-left"},"Total",-1),so=f("td",null,null,-1),lo={props:["holdings"],data(){return{expanded:{states:{},holdings:{}},grouped_holdings:{}}},methods:{get_grouped_holdings(u){return this.grouped_holdings[u]=this.grouped_holdings[u]||this.holdings.filter(e=>u==="active"?e.id.active:!e.id.active)},show_footer_total(){return this.get_grouped_holdings("active").length&&this.get_grouped_holdings("inactive").lenght},total(u,e){return Cn(e?this.get_grouped_holdings(e):this.holdings,u)},get_holding_index(u){return this.holdings.findIndex(e=>e===u)},get_market_price_tooltip(u){var e,l;return Re.tip_price(u.data.market.price,u.id.currency,(e=u.security)==null?void 0:e.price,(l=u.security)==null?void 0:l.currency,u.data.market.date)}}},uo=Object.assign(lo,{__name:"ls_holdings",setup(u){return(e,l)=>(ne(),le("table",Yi,[f("thead",null,[j(kt),f("tr",null,[Xi,j(ht,{span:2,value:"Cost",background:!0}),j(ht,{span:2,value:"Market",background:!0}),j(ht,{span:4,value:"Gain",background:!0}),j(ht,{span:2,value:"Charges",background:!0}),Ki]),Qi]),(ne(),le(Je,null,mt(["active","inactive"],r=>f("tbody",null,[r!="active"&&e.get_grouped_holdings(r).length?(ne(),le("tr",Zi,[j(tn,{span:13,name:r.charAt(0).toUpperCase()+r.slice(1)+" Holdings",icon:"inactive",expanded:e.expanded.states[r],"onUpdate:expanded":n=>e.expanded.states[r]=n},null,8,["name","expanded","onUpdate:expanded"])])):De("",!0),e.expanded.states[r]||r=="active"?(ne(),le(Je,{key:1},[j(kt),(ne(!0),le(Je,null,mt(e.get_grouped_holdings(r),n=>(ne(),le(Je,null,[f("tr",{class:Ke(["holding",[{expanded:e.expanded.holdings[e.get_holding_index(n)]}]])},[j(en,{holding:n.id,show_expand:!0,expanded:e.expanded.holdings[e.get_holding_index(n)],"onUpdate:expanded":t=>e.expanded.holdings[e.get_holding_index(n)]=t},null,8,["holding","expanded","onUpdate:expanded"]),j(Ht,{value:n.id.lot,tooltip:Ge(Re).long_date(n.data.cost.date),align:"center"},null,8,["value","tooltip"]),j(ce,{value:n.data.cost.price,tooltip:Ge(Re).long_date(n.data.cost.date)},null,8,["value","tooltip"]),j(ce,{value:n.data.cost.value,tooltip:Ge(Re).long_date(n.data.cost.date)},null,8,["value","tooltip"]),j(ce,{value:n.data.market.price,tooltip:e.get_market_price_tooltip(n),inactive:!n.id.active},null,8,["value","tooltip","inactive"]),j(ce,{value:n.data.market.value,tooltip:Ge(Re).long_date(n.data.market.date),inactive:!n.id.active},null,8,["value","tooltip","inactive"]),j(ce,{value:n.data.return.gain.realized,colored:!0,arrow:!0},null,8,["value"]),j(ce,{value:n.data.return.gain.unrealized.overall.amount,colored:!0,arrow:!0},null,8,["value"]),j(ce,{value:n.data.return.dividend},null,8,["value"]),j(ce,{value:n.data.return.interest},null,8,["value"]),j(ce,{value:n.data.return.fees},null,8,["value"]),j(ce,{value:n.data.return.taxes},null,8,["value"]),j(ce,{value:n.data.return.total,colored:!0},null,8,["value"])],2),e.expanded.holdings[e.get_holding_index(n)]?(ne(),le("tr",eo,[f("td",to,[j(nn,{transactions:n.transactions,show_symbol:!1,show_balance:!1},null,8,["transactions"])])])):De("",!0)],64))),256)),f("tr",no,[ro,j(ce,{value:e.total("data.cost.value",r)},null,8,["value"]),io,j(ce,{value:e.total("data.market.value",r)},null,8,["value"]),j(ce,{value:e.total("data.return.gain.realized",r)},null,8,["value"]),j(ce,{value:e.total("data.return.gain.unrealized.overall.amount",r)},null,8,["value"]),j(ce,{value:e.total("data.return.dividend",r)},null,8,["value"]),j(ce,{value:e.total("data.return.interest",r)},null,8,["value"]),j(ce,{value:e.total("data.return.fees",r)},null,8,["value"]),j(ce,{value:e.total("data.return.taxes",r)},null,8,["value"]),j(ce,{value:e.total("data.return.total",r)},null,8,["value"])])],64)):De("",!0),j(kt)])),64)),f("tfoot",null,[e.show_footer_total()?(ne(),le("tr",oo,[ao,j(ce,{value:e.total("data.cost.value")},null,8,["value"]),so,j(ce,{value:e.total("values.market.value")},null,8,["value"]),j(ce,{value:e.total("data.return.gain.realized")},null,8,["value"]),j(ce,{value:e.total("data.return.gain.unrealized.overall.amount")},null,8,["value"]),j(ce,{value:e.total("data.return.dividend")},null,8,["value"]),j(ce,{value:e.total("data.return.interest")},null,8,["value"]),j(ce,{value:e.total("data.return.fees")},null,8,["value"]),j(ce,{value:e.total("data.return.taxes")},null,8,["value"]),j(ce,{value:e.total("data.return.total")},null,8,["value"])])):De("",!0)])]))}}),co={key:0,id:"listing"},fo={class:"date-picker"},ho=["value"],mo={class:"listing history"},go=f("thead",null,[f("tr",{class:"bottom-line"},[f("th",{class:"justify-left"},"Accounts"),f("th",{colspan:"1",class:"justify-right"},"Total CAD")])],-1),po={colspan:"2"},vo={class:"subaccount"},yo={key:0},_o={colspan:"2"},wo={key:2},bo={colspan:"2"},ko={key:4},To={colspan:"2"},Eo=f("tr",{class:"account-footer"},[f("td",{colspan:"2"})],-1),Oo={class:"total-line"},Mo=f("td",{class:"justify-left"},"Total",-1),Co={id:"footer"},xo=f("div",{style:{height:"20px"}},null,-1),So={style:{display:"flex","justify-content":"space-between"}},Fo=["title"],Io={inject:["data","state"],data(){return{date:new Date,initialized:void 0,x_usd:null,accounts:null,account_summaries:{},expanded:{}}},created(){this.initialized=this.data.initialize().then(()=>this.load_data())},methods:{load_data(){this.state.loading=!0,this.initialize_expanded(),this.initialized.then(()=>{this.x_usd=this.data.get_currency("usd",this.date),this.accounts=this.data.get_accounts(this.date),this.accounts.forEach(u=>{this.account_summaries[u.number]=this.data.get_account_summary(u.number,this.date)}),this.state.loading=!1})},subaccount_summary(u){var e;return(e=Object.values(this.account_summaries).flatMap(l=>Object.entries(l.subaccounts)).find(([l])=>l===u))==null?void 0:e[1]},initialize_expanded(){this.expanded={accounts:{},subaccounts:{},summaries:{},holdings:{},transactions:{}}}},computed:{currency_info(){return this.x_usd?Re.currency_info(this.x_usd.id,this.x_usd.rate):"undefined"},currency_date(){return this.x_usd?Re.long_datetime(this.x_usd.date):"undefined"},accounts_total(){return Object.values(this.account_summaries).reduce((u,e)=>u+e.total.balance,0)}}},Kt=Object.assign(Io,{__name:"history",setup(u){return(e,l)=>(ne(),le(Je,null,[e.accounts&&e.accounts.length?(ne(),le("div",co,[f("div",fo,[f("input",{type:"date",value:Ge(Re).local_date(e.date),onInput:l[0]||(l[0]=r=>e.date=new Date(r.target.value)),onChange:l[1]||(l[1]=r=>e.load_data())},null,40,ho)]),f("table",mo,[go,e.accounts?(ne(!0),le(Je,{key:0},mt(e.accounts,r=>(ne(),le("tbody",{key:r.number},[f("tr",{class:Ke(["account toggle-row",[{expanded:e.expanded.accounts[r.number]}]])},[j(xt,{institution:r.institution.type,name:r.name,number:r.number,type:r.type,expanded:e.expanded.accounts[r.number],"onUpdate:expanded":n=>e.expanded.accounts[r.number]=n},null,8,["institution","name","number","type","expanded","onUpdate:expanded"]),e.account_summaries[r.number]?(ne(),rt(ce,{key:0,value:e.account_summaries[r.number].total.balance,show_zero:!0},null,8,["value"])):De("",!0)],2),e.expanded.accounts[r.number]&&e.account_summaries[r.number]?(ne(),le(Je,{key:0},[f("tr",null,[f("td",po,[j(Xt,{summary:e.account_summaries[r.number],period:Ge(Lt)(e.date),currency:"cad"},null,8,["summary","period"])])]),(ne(!0),le(Je,null,mt(r.subaccounts,n=>(ne(),le(Je,{key:n.id},[f("tr",vo,[j(xt,{span:2,institution:"--",name:n.name,currency:n.currency,show_expand:!1},null,8,["name","currency"])]),(ne(),le(Je,{key:0},[j(zt,{span:2,name:"Summary",icon:"summary",expanded:e.expanded.summaries[n.id],"onUpdate:expanded":t=>e.expanded.summaries[n.id]=t},null,8,["expanded","onUpdate:expanded"]),e.expanded.summaries[n.id]?(ne(),le("tr",yo,[f("td",_o,[j(Xt,{summary:e.subaccount_summary(n.id),period:Ge(Lt)(e.date),currency:n.currency},null,8,["summary","period","currency"])])])):De("",!0),e.expanded.summaries[n.id]?(ne(),rt(kt,{key:1})):De("",!0),j(zt,{span:2,name:"Holdings",icon:"holdings",expanded:e.expanded.holdings[n.id],"onUpdate:expanded":t=>e.expanded.holdings[n.id]=t},null,8,["expanded","onUpdate:expanded"]),e.expanded.holdings[n.id]?(ne(),le("tr",wo,[f("td",bo,[j(uo,{holdings:e.subaccount_summary(n.id).holdings},null,8,["holdings"])])])):De("",!0),e.expanded.holdings[n.id]?(ne(),rt(kt,{key:3})):De("",!0),j(zt,{span:2,name:"Transactions",icon:"transactions",expanded:e.expanded.transactions[n.id],"onUpdate:expanded":t=>e.expanded.transactions[n.id]=t},null,8,["expanded","onUpdate:expanded"]),e.expanded.transactions[n.id]?(ne(),le("tr",ko,[f("td",To,[j(nn,{transactions:e.subaccount_summary(n.id).transactions},null,8,["transactions"])])])):De("",!0),j(kt)],64))],64))),128)),Eo],64)):De("",!0)]))),128)):De("",!0),f("tfoot",null,[f("tr",Oo,[Mo,j(ce,{value:e.accounts_total,show_zero:!0},null,8,["value"])])])])])):De("",!0),f("div",Co,[xo,f("div",So,[f("div",null,[e.x_usd?(ne(),le("div",{key:0,class:"x-rate-info",title:e.currency_date},ut(e.currency_info),9,Fo)):De("",!0)])])])],64))}}),Ao={class:"tabs-container"},Po={class:"tabs"},zo=["src"],Ro=f("span",null,"Dashboard",-1),Lo=["src"],No=f("span",null,"Portfolio",-1),Do=["src"],jo=f("span",null,"Performance",-1),$o=["src"],Ho=f("span",null,"Wealth",-1),Bo=["src"],Wo=f("span",null,"History",-1),qo={class:"state"},Uo=["src"],Vo=f("div",{class:"top-space"},null,-1),Go={name:"App",components:{Dashboard:Vt,Portfolio:Gt,Performance:Jt,Wealth:Yt,History:Kt},data(){return{state:{loading:!0},active_tab:hn()?"Dashboard":"Portfolio",tabs:{Dashboard:Ot(Vt),Portfolio:Ot(Gt),Performance:Ot(Jt),Wealth:Ot(Yt),History:Ot(Kt)}}},provide(){return{data:new In,state:this.state}},computed:{get_active_tab(){return this.tabs[this.active_tab]}}},Xo=Object.assign(Go,{setup(u){return(e,l)=>(ne(),le("div",null,[f("div",Ao,[f("div",Po,[f("div",{onClick:l[0]||(l[0]=r=>e.active_tab="Dashboard"),class:Ke(["tab",{"tab-active":e.active_tab==="Dashboard"}])},[f("img",{src:lt("tab_dashboard_icon.png"),alt:"",class:"tab-img"},null,8,zo),Ro],2),f("div",{onClick:l[1]||(l[1]=r=>e.active_tab="Portfolio"),class:Ke(["tab",{"tab-active":e.active_tab==="Portfolio"}])},[f("img",{src:lt("tab_portfolio_icon.png"),alt:"",class:"tab-img"},null,8,Lo),No],2),f("div",{onClick:l[2]||(l[2]=r=>e.active_tab="Performance"),class:Ke(["tab",{"tab-active":e.active_tab==="Performance"}])},[f("img",{src:lt("tab_performance_icon.png"),alt:"",class:"tab-img"},null,8,Do),jo],2),f("div",{onClick:l[3]||(l[3]=r=>e.active_tab="Wealth"),class:Ke(["tab",{"tab-active":e.active_tab==="Wealth"}])},[f("img",{src:lt("tab_wealth_icon.png"),alt:"",class:"tab-img"},null,8,$o),Ho],2),f("div",{onClick:l[4]||(l[4]=r=>e.active_tab="History"),class:Ke(["tab",{"tab-active":e.active_tab==="History"}])},[f("img",{src:lt("tab_history_icon.png"),alt:"",class:"tab-img"},null,8,Bo),Wo],2)]),f("div",qo,[e.state.loading?(ne(),le("img",{key:0,src:lt("system_loading.gif"),alt:"Loading...",class:"loading-gif"},null,8,Uo)):De("",!0)])]),Vo,f("div",null,[(ne(),rt(fn,null,[(ne(),rt(dn(e.get_active_tab)))],1024))])]))}});export{Xo as default};
