var tn=Object.defineProperty;var nn=(l,e,u)=>e in l?tn(l,e,{enumerable:!0,configurable:!0,writable:!0,value:u}):l[e]=u;var vt=(l,e,u)=>(nn(l,typeof e!="symbol"?e+"":e,u),u);import{d as rn,o as oe,c as he,a as E,t as ut,n as Ye,w as Rt,b as $e,e as on,f as ae,g as ot,m as xt,u as Qe,F as tt,r as gt,h as an,i as sn,K as un,p as ln,j as Et}from"./index-DOG5XGIn.js";var Jt={};(function(l){(()=>{var e={541:(r,d,S)=>{var I=S(353),X=G(I),W=S(37),j=G(W),y=S(630),k=G(y),m=function(){function A(R,h){for(var _=0;_<h.length;_++){var x=h[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(R,x.key,x)}}return function(R,h,_){return h&&A(R.prototype,h),_&&A(R,_),R}}(),M=S(457),O=G(M),H=S(729),C=G(H),t=S(702);S(303);var L=S(248),o=G(L),V=S(249),ne=G(V);function G(A){return A&&A.__esModule?A:{default:A}}function _e(A,R){if(!(A instanceof R))throw new TypeError("Cannot call a class as a function")}function ge(A,R){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:A}function Ae(A,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);A.prototype=Object.create(R&&R.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(A,R):A.__proto__=R)}window.iFrameResizer=ne.default;var re=function(A){Ae(R,A);function R(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_e(this,R);var _=ge(this,(R.__proto__||Object.getPrototypeOf(R)).call(this));return _.options=h,_.api=new o.default(_),_.channel=O.default.build({window:h.window||window.parent,origin:"*",scope:h.id||location.origin,postMessageObserver:function(U,J){_.emit("postMessage",U,J)},gotMessageObserver:function(U,J){_.emit("gotMessage",U,J)}}),["init","update","reload","_event"].forEach(function(x){_.channel.bind(x,function(U,J){var $=x,q=J;return x==="_event"&&($=J.eventName,q=J.eventData),_.emit($,q),"success"})}),_}return m(R,[{key:"request",value:function(_){var x=this;return new t.Promise(function(U,J){if(!(0,k.default)(_))throw new Error("Params must be an object");var $=_.method,q=_.endpoint,me=_.query,ve=_.body;if(!$||!q||!(0,j.default)($)||!(0,j.default)(q))throw new Error("Invalid method or endpoint");if(!(0,X.default)(me)&&!(0,k.default)(me))throw new Error("Query must be an object");if(!(0,X.default)(ve)&&!(0,k.default)(ve))throw new Error("Body must be an object");x.effectiveUser&&(_.effectiveUser=x.effectiveUser),x.channel.call({method:"request",params:_,success:function(pe){U(pe)},error:function(pe){J(pe)}})})}},{key:"setEffectiveUser",value:function(_){this.effectiveUser=_}},{key:"saveData",value:function(_){var x=this;return new t.Promise(function(U,J){if(!(0,k.default)(_))throw new Error("Data must be an object");x.channel.call({method:"saveData",params:_,success:function(){U()},error:function(q){J(q)}})})}},{key:"addTransaction",value:function(_){var x=this;return new t.Promise(function(U,J){if(!(0,X.default)(_)&&!(0,k.default)(_))throw new Error("Attrs must be an object");x.channel.call({method:"addTransaction",params:_,success:function(q){U(q)},error:function(q){J(q)}})})}},{key:"editTransaction",value:function(_){var x=this;return new t.Promise(function(U,J){if(!_||!(0,j.default)(_))throw new Error("Invalid id");x.channel.call({method:"editTransaction",params:_,success:function(q){U(q)},error:function(q){J(q)}})})}},{key:"addInstitution",value:function(_){var x=this;return new t.Promise(function(U,J){if(!(0,X.default)(_)&&!(0,k.default)(_))throw new Error("Attrs must be an object");x.channel.call({method:"addInstitution",params:_,success:function(q){U(q)},error:function(q){J(q)}})})}},{key:"addInvestment",value:function(){var _=this;return new t.Promise(function(x,U){_.channel.call({method:"addInvestment",success:function($){x($)},error:function($){U($)}})})}},{key:"editInstitution",value:function(_){var x=this;return new t.Promise(function(U,J){if(!_||!(0,j.default)(_))throw new Error("Invalid id");x.channel.call({method:"editInstitution",params:_,success:function(q){U(q)},error:function(q){J(q)}})})}},{key:"editAsset",value:function(_){var x=this;return new t.Promise(function(U,J){if(!_||!(0,j.default)(_))throw new Error("Invalid id");x.channel.call({method:"editAsset",params:_,success:function(q){U(q)},error:function(q){J(q)}})})}},{key:"editLiability",value:function(_){var x=this;return new t.Promise(function(U,J){if(!_||!(0,j.default)(_))throw new Error("Invalid id");x.channel.call({method:"editLiability",params:_,success:function(q){U(q)},error:function(q){J(q)}})})}},{key:"deleteInstitution",value:function(_){var x=this;return new t.Promise(function(U,J){if(!_||!(0,j.default)(_))throw new Error("Invalid id");x.channel.call({method:"deleteInstitution",params:_,success:function(q){U(q)},error:function(q){J(q)}})})}},{key:"deleteAsset",value:function(_){var x=this;return new t.Promise(function(U,J){if(!_||!(0,j.default)(_))throw new Error("Invalid id");x.channel.call({method:"deleteAsset",params:_,success:function(q){U(q)},error:function(q){J(q)}})})}},{key:"deleteLiability",value:function(_){var x=this;return new t.Promise(function(U,J){if(!_||!(0,j.default)(_))throw new Error("Invalid id");x.channel.call({method:"deleteLiability",params:_,success:function(q){U(q)},error:function(q){J(q)}})})}},{key:"downloadDocument",value:function(_){var x=this;return new t.Promise(function(U,J){if(!_||!(0,j.default)(_))throw new Error("Invalid id");x.channel.call({method:"downloadDocument",params:_,success:function(){U()},error:function(q){J(q)}})})}},{key:"upgradePremium",value:function(){var _=this;return new t.Promise(function(x,U){_.channel.call({method:"upgradePremium",success:function(){x()},error:function($){U($)}})})}},{key:"getSharings",value:function(){var _=this;return new t.Promise(function(x,U){_.channel.call({method:"getSharings",success:function($){x($)},error:function($){U($)}})})}},{key:"switchUser",value:function(_){var x=this;return new t.Promise(function(U,J){if(!_||!(0,j.default)(_))throw new Error("Invalid id");x.channel.call({method:"switchUser",params:_,success:function(){U()},error:function(q){J(q)}})})}},{key:"destroy",value:function(){this.channel.destroy()}}]),R}(C.default);r.exports=re},248:r=>{var d=function(){function X(W,j){for(var y=0;y<j.length;y++){var k=j[y];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(W,k.key,k)}}return function(W,j,y){return j&&X(W.prototype,j),y&&X(W,y),W}}();function S(X,W){if(!(X instanceof W))throw new TypeError("Cannot call a class as a function")}var I=function(){function X(W){S(this,X),this.addon=W}return d(X,[{key:"getAssets",value:function(j){return this.addon.request({method:"GET",endpoint:"assets",query:j})}},{key:"getCurrencies",value:function(j){return this.addon.request({method:"GET",endpoint:"currencies",query:j})}},{key:"getInstitutions",value:function(j){return this.addon.request({method:"GET",endpoint:"institutions",query:j})}},{key:"getInstitution",value:function(j){return this.addon.request({method:"GET",endpoint:"institutions/"+j})}},{key:"pollInstitution",value:function(j,y){return this.addon.request({method:"GET",endpoint:"institutions/"+j+"/poll?v="+y})}},{key:"syncInstitution",value:function(j){return this.addon.request({method:"POST",endpoint:"institutions/"+j+"/sync"})}},{key:"addInstitution",value:function(j){return console.warn("DEPRECATED: `addon.api.addInstitution`. Use `addon.addInstitution instead.`"),this.addon.request({method:"POST",endpoint:"institutions",body:j})}},{key:"getLiabilities",value:function(j){return this.addon.request({method:"GET",endpoint:"liabilities",query:j})}},{key:"getPositions",value:function(j){return this.addon.request({method:"GET",endpoint:"positions",query:j})}},{key:"getTransactions",value:function(j){return this.addon.request({method:"GET",endpoint:"transactions",query:j})}},{key:"updateTransaction",value:function(j){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.addon.request({method:"PUT",endpoint:"transactions/"+j,body:y})}},{key:"getUser",value:function(){return this.addon.request({method:"GET",endpoint:"users/me"})}}]),X}();r.exports=I},249:(r,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default={heightCalculationMethod:function(){var I=document,X=I.body,W=I.documentElement;return Math.max.apply(null,[X.scrollHeight,X.offsetHeight,W.offsetHeight])}}},702:function(r,d,S){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(I,X){r.exports=X()})(this,function(){function I(s){var b=typeof s;return s!==null&&(b==="object"||b==="function")}function X(s){return typeof s=="function"}var W=void 0;Array.isArray?W=Array.isArray:W=function(s){return Object.prototype.toString.call(s)==="[object Array]"};var j=W,y=0,k=void 0,m=void 0,M=function(b,f){re[y]=b,re[y+1]=f,y+=2,y===2&&(m?m(A):h())};function O(s){m=s}function H(s){M=s}var C=typeof window<"u"?window:void 0,t=C||{},L=t.MutationObserver||t.WebKitMutationObserver,o=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",V=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function ne(){return function(){return process.nextTick(A)}}function G(){return typeof k<"u"?function(){k(A)}:Ae()}function _e(){var s=0,b=new L(A),f=document.createTextNode("");return b.observe(f,{characterData:!0}),function(){f.data=s=++s%2}}function ge(){var s=new MessageChannel;return s.port1.onmessage=A,function(){return s.port2.postMessage(0)}}function Ae(){var s=setTimeout;return function(){return s(A,1)}}var re=new Array(1e3);function A(){for(var s=0;s<y;s+=2){var b=re[s],f=re[s+1];b(f),re[s]=void 0,re[s+1]=void 0}y=0}function R(){try{var s=Function("return this")().require("vertx");return k=s.runOnLoop||s.runOnContext,G()}catch{return Ae()}}var h=void 0;o?h=ne():L?h=_e():V?h=ge():C===void 0?h=R():h=Ae();function _(s,b){var f=this,T=new this.constructor(J);T[U]===void 0&&P(T);var F=f._state;if(F){var N=arguments[F-1];M(function(){return rt(F,T,N,f._result)})}else Ze(f,T,s,b);return T}function x(s){var b=this;if(s&&typeof s=="object"&&s.constructor===b)return s;var f=new b(J);return je(f,s),f}var U=Math.random().toString(36).substring(2);function J(){}var $=void 0,q=1,me=2;function ve(){return new TypeError("You cannot resolve a promise with itself")}function We(){return new TypeError("A promises callback cannot return that same promise.")}function pe(s,b,f,T){try{s.call(b,f,T)}catch(F){return F}}function Ee(s,b,f){M(function(T){var F=!1,N=pe(f,b,function(Te){F||(F=!0,b!==Te?je(T,Te):Ve(T,Te))},function(Te){F||(F=!0,Le(T,Te))},"Settle: "+(T._label||" unknown promise"));!F&&N&&(F=!0,Le(T,N))},s)}function Oe(s,b){b._state===q?Ve(s,b._result):b._state===me?Le(s,b._result):Ze(b,void 0,function(f){return je(s,f)},function(f){return Le(s,f)})}function Me(s,b,f){b.constructor===s.constructor&&f===_&&b.constructor.resolve===x?Oe(s,b):f===void 0?Ve(s,b):X(f)?Ee(s,b,f):Ve(s,b)}function je(s,b){if(s===b)Le(s,ve());else if(I(b)){var f=void 0;try{f=b.then}catch(T){Le(s,T);return}Me(s,b,f)}else Ve(s,b)}function ze(s){s._onerror&&s._onerror(s._result),Ke(s)}function Ve(s,b){s._state===$&&(s._result=b,s._state=q,s._subscribers.length!==0&&M(Ke,s))}function Le(s,b){s._state===$&&(s._state=me,s._result=b,M(ze,s))}function Ze(s,b,f,T){var F=s._subscribers,N=F.length;s._onerror=null,F[N]=b,F[N+q]=f,F[N+me]=T,N===0&&s._state&&M(Ke,s)}function Ke(s){var b=s._subscribers,f=s._state;if(b.length!==0){for(var T=void 0,F=void 0,N=s._result,Te=0;Te<b.length;Te+=3)T=b[Te],F=b[Te+f],T?rt(f,T,F,N):F(N);s._subscribers.length=0}}function rt(s,b,f,T){var F=X(f),N=void 0,Te=void 0,Ne=!0;if(F){try{N=f(T)}catch(et){Ne=!1,Te=et}if(b===N){Le(b,We());return}}else N=T;b._state!==$||(F&&Ne?je(b,N):Ne===!1?Le(b,Te):s===q?Ve(b,N):s===me&&Le(b,N))}function p(s,b){try{b(function(T){je(s,T)},function(T){Le(s,T)})}catch(f){Le(s,f)}}var Q=0;function c(){return Q++}function P(s){s[U]=Q++,s._state=void 0,s._result=void 0,s._subscribers=[]}function Z(){return new Error("Array Methods must be provided an Array")}var Y=function(){function s(b,f){this._instanceConstructor=b,this.promise=new b(J),this.promise[U]||P(this.promise),j(f)?(this.length=f.length,this._remaining=f.length,this._result=new Array(this.length),this.length===0?Ve(this.promise,this._result):(this.length=this.length||0,this._enumerate(f),this._remaining===0&&Ve(this.promise,this._result))):Le(this.promise,Z())}return s.prototype._enumerate=function(f){for(var T=0;this._state===$&&T<f.length;T++)this._eachEntry(f[T],T)},s.prototype._eachEntry=function(f,T){var F=this._instanceConstructor,N=F.resolve;if(N===x){var Te=void 0,Ne=void 0,et=!1;try{Te=f.then}catch(Ge){et=!0,Ne=Ge}if(Te===_&&f._state!==$)this._settledAt(f._state,T,f._result);else if(typeof Te!="function")this._remaining--,this._result[T]=f;else if(F===g){var ft=new F(J);et?Le(ft,Ne):Me(ft,f,Te),this._willSettleAt(ft,T)}else this._willSettleAt(new F(function(Ge){return Ge(f)}),T)}else this._willSettleAt(N(f),T)},s.prototype._settledAt=function(f,T,F){var N=this.promise;N._state===$&&(this._remaining--,f===me?Le(N,F):this._result[T]=F),this._remaining===0&&Ve(N,this._result)},s.prototype._willSettleAt=function(f,T){var F=this;Ze(f,void 0,function(N){return F._settledAt(q,T,N)},function(N){return F._settledAt(me,T,N)})},s}();function se(s){return new Y(this,s).promise}function be(s){var b=this;return j(s)?new b(function(f,T){for(var F=s.length,N=0;N<F;N++)b.resolve(s[N]).then(f,T)}):new b(function(f,T){return T(new TypeError("You must pass an array to race."))})}function De(s){var b=this,f=new b(J);return Le(f,s),f}function ce(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Ue(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var g=function(){function s(b){this[U]=c(),this._result=this._state=void 0,this._subscribers=[],J!==b&&(typeof b!="function"&&ce(),this instanceof s?p(this,b):Ue())}return s.prototype.catch=function(f){return this.then(null,f)},s.prototype.finally=function(f){var T=this,F=T.constructor;return X(f)?T.then(function(N){return F.resolve(f()).then(function(){return N})},function(N){return F.resolve(f()).then(function(){throw N})}):T.then(f,f)},s}();g.prototype.then=_,g.all=se,g.race=be,g.resolve=x,g.reject=De,g._setScheduler=O,g._setAsap=H,g._asap=M;function B(){var s=void 0;if(typeof S.g<"u")s=S.g;else if(typeof self<"u")s=self;else try{s=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var b=s.Promise;if(b){var f=null;try{f=Object.prototype.toString.call(b.resolve())}catch{}if(f==="[object Promise]"&&!b.cast)return}s.Promise=g}return g.polyfill=B,g.Promise=g,g})},729:r=>{var d=Object.prototype.hasOwnProperty,S="~";function I(){}Object.create&&(I.prototype=Object.create(null),new I().__proto__||(S=!1));function X(k,m,M){this.fn=k,this.context=m,this.once=M||!1}function W(k,m,M,O,H){if(typeof M!="function")throw new TypeError("The listener must be a function");var C=new X(M,O||k,H),t=S?S+m:m;return k._events[t]?k._events[t].fn?k._events[t]=[k._events[t],C]:k._events[t].push(C):(k._events[t]=C,k._eventsCount++),k}function j(k,m){--k._eventsCount===0?k._events=new I:delete k._events[m]}function y(){this._events=new I,this._eventsCount=0}y.prototype.eventNames=function(){var m=[],M,O;if(this._eventsCount===0)return m;for(O in M=this._events)d.call(M,O)&&m.push(S?O.slice(1):O);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(M)):m},y.prototype.listeners=function(m){var M=S?S+m:m,O=this._events[M];if(!O)return[];if(O.fn)return[O.fn];for(var H=0,C=O.length,t=new Array(C);H<C;H++)t[H]=O[H].fn;return t},y.prototype.listenerCount=function(m){var M=S?S+m:m,O=this._events[M];return O?O.fn?1:O.length:0},y.prototype.emit=function(m,M,O,H,C,t){var L=S?S+m:m;if(!this._events[L])return!1;var o=this._events[L],V=arguments.length,ne,G;if(o.fn){switch(o.once&&this.removeListener(m,o.fn,void 0,!0),V){case 1:return o.fn.call(o.context),!0;case 2:return o.fn.call(o.context,M),!0;case 3:return o.fn.call(o.context,M,O),!0;case 4:return o.fn.call(o.context,M,O,H),!0;case 5:return o.fn.call(o.context,M,O,H,C),!0;case 6:return o.fn.call(o.context,M,O,H,C,t),!0}for(G=1,ne=new Array(V-1);G<V;G++)ne[G-1]=arguments[G];o.fn.apply(o.context,ne)}else{var _e=o.length,ge;for(G=0;G<_e;G++)switch(o[G].once&&this.removeListener(m,o[G].fn,void 0,!0),V){case 1:o[G].fn.call(o[G].context);break;case 2:o[G].fn.call(o[G].context,M);break;case 3:o[G].fn.call(o[G].context,M,O);break;case 4:o[G].fn.call(o[G].context,M,O,H);break;default:if(!ne)for(ge=1,ne=new Array(V-1);ge<V;ge++)ne[ge-1]=arguments[ge];o[G].fn.apply(o[G].context,ne)}}return!0},y.prototype.on=function(m,M,O){return W(this,m,M,O,!1)},y.prototype.once=function(m,M,O){return W(this,m,M,O,!0)},y.prototype.removeListener=function(m,M,O,H){var C=S?S+m:m;if(!this._events[C])return this;if(!M)return j(this,C),this;var t=this._events[C];if(t.fn)t.fn===M&&(!H||t.once)&&(!O||t.context===O)&&j(this,C);else{for(var L=0,o=[],V=t.length;L<V;L++)(t[L].fn!==M||H&&!t[L].once||O&&t[L].context!==O)&&o.push(t[L]);o.length?this._events[C]=o.length===1?o[0]:o:j(this,C)}return this},y.prototype.removeAllListeners=function(m){var M;return m?(M=S?S+m:m,this._events[M]&&j(this,M)):(this._events=new I,this._eventsCount=0),this},y.prototype.off=y.prototype.removeListener,y.prototype.addListener=y.prototype.on,y.prefixed=S,y.EventEmitter=y,r.exports=y},303:(r,d,S)=>{r.exports=S(683)},402:r=>{(function(d){if(typeof window>"u")return;var S=!0,I=10,X="",W=0,j="",y=null,k="",m=!1,M={resize:1,click:1},O=128,H=!0,C=1,t="bodyOffset",L=t,o=!0,V="",ne={},G=32,_e=null,ge=!1,Ae="[iFrameSizer]",re=Ae.length,A="",R={max:1,min:1,bodyScroll:1,documentElementScroll:1},h="child",_=!0,x=window.parent,U="*",J=0,$=!1,q=null,me=16,ve=1,We="scroll",pe=We,Ee=window,Oe=function(){P("MessageCallback function not defined")},Me=function(){},je=function(){},ze={height:function(){return P("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return P("Custom width calculation function not defined"),document.body.scrollWidth}},Ve={};function Le(a,v,D){"addEventListener"in window?a.addEventListener(v,D,!1):"attachEvent"in window&&a.attachEvent("on"+v,D)}function Ze(a,v,D){"removeEventListener"in window?a.removeEventListener(v,D,!1):"detachEvent"in window&&a.detachEvent("on"+v,D)}function Ke(a){return a.charAt(0).toUpperCase()+a.slice(1)}function rt(a){var v,D,ie,de=null,xe=0,Ce=function(){xe=p(),de=null,ie=a.apply(v,D),de||(v=D=null)};return function(){var Fe=p();xe||(xe=Fe);var ye=me-(Fe-xe);return v=this,D=arguments,ye<=0||ye>me?(de&&(clearTimeout(de),de=null),xe=Fe,ie=a.apply(v,D),de||(v=D=null)):de||(de=setTimeout(Ce,ye)),ie}}var p=Date.now||function(){return new Date().getTime()};function Q(a){return Ae+"["+A+"] "+a}function c(a){ge&&typeof window.console=="object"&&console.log(Q(a))}function P(a){typeof window.console=="object"&&console.warn(Q(a))}function Z(){Y(),c("Initialising iFrame ("+location.href+")"),se(),ce(),De("background",X),De("padding",k),ft(),b(),f(),Ue(),qe(),T(),ne=Ge(),ht("init","Init message from host page"),Me()}function Y(){function a(D){return D==="true"}var v=V.substr(re).split(":");A=v[0],W=d!==v[1]?Number(v[1]):W,m=d!==v[2]?a(v[2]):m,ge=d!==v[3]?a(v[3]):ge,G=d!==v[4]?Number(v[4]):G,S=d!==v[6]?a(v[6]):S,j=v[7],L=d!==v[8]?v[8]:L,X=v[9],k=v[10],J=d!==v[11]?Number(v[11]):J,ne.enable=d!==v[12]?a(v[12]):!1,h=d!==v[13]?v[13]:h,pe=d!==v[14]?v[14]:pe}function se(){function a(){var D=window.iFrameResizer;c("Reading data from page: "+JSON.stringify(D)),Oe="messageCallback"in D?D.messageCallback:Oe,Me="readyCallback"in D?D.readyCallback:Me,U="targetOrigin"in D?D.targetOrigin:U,L="heightCalculationMethod"in D?D.heightCalculationMethod:L,pe="widthCalculationMethod"in D?D.widthCalculationMethod:pe}function v(D,ie){return typeof D=="function"&&(c("Setup custom "+ie+"CalcMethod"),ze[ie]=D,D="custom"),D}"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(a(),L=v(L,"height"),pe=v(pe,"width")),c("TargetOrigin for parent set to: "+U)}function be(a,v){return v.indexOf("-")!==-1&&(P("Negative CSS value ignored for "+a),v=""),v}function De(a,v){d!==v&&v!==""&&v!=="null"&&(document.body.style[a]=v,c("Body "+a+' set to "'+v+'"'))}function ce(){d===j&&(j=W+"px"),De("margin",be("margin",j))}function Ue(){document.documentElement.style.height="",document.body.style.height="",c('HTML & body height set to "auto"')}function g(a){var v={add:function(D){function ie(){ht(a.eventName,a.eventType)}Ve[D]=ie,Le(window,D,ie)},remove:function(D){var ie=Ve[D];delete Ve[D],Ze(window,D,ie)}};a.eventNames&&Array.prototype.map?(a.eventName=a.eventNames[0],a.eventNames.map(v[a.method])):v[a.method](a.eventName),c(Ke(a.method)+" event listener: "+a.eventType)}function B(a){g({method:a,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),g({method:a,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),g({method:a,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),g({method:a,eventType:"Input",eventName:"input"}),g({method:a,eventType:"Mouse Up",eventName:"mouseup"}),g({method:a,eventType:"Mouse Down",eventName:"mousedown"}),g({method:a,eventType:"Orientation Change",eventName:"orientationchange"}),g({method:a,eventType:"Print",eventName:["afterprint","beforeprint"]}),g({method:a,eventType:"Ready State Change",eventName:"readystatechange"}),g({method:a,eventType:"Touch Start",eventName:"touchstart"}),g({method:a,eventType:"Touch End",eventName:"touchend"}),g({method:a,eventType:"Touch Cancel",eventName:"touchcancel"}),g({method:a,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),g({method:a,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),g({method:a,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),h==="child"&&g({method:a,eventType:"IFrame Resized",eventName:"resize"})}function s(a,v,D,ie){return v!==a&&(a in D||(P(a+" is not a valid option for "+ie+"CalculationMethod."),a=v),c(ie+' calculation method set to "'+a+'"')),a}function b(){L=s(L,t,Je,"height")}function f(){pe=s(pe,We,lt,"width")}function T(){S===!0?(B("add"),K()):c("Auto Resize disabled")}function F(){c("Disable outgoing messages"),_=!1}function N(){c("Remove event listener: Message"),Ze(window,"message",w)}function Te(){y!==null&&y.disconnect()}function Ne(){B("remove"),Te(),clearInterval(_e)}function et(){F(),N(),S===!0&&Ne()}function ft(){var a=document.createElement("div");a.style.clear="both",a.style.display="block",document.body.appendChild(a)}function Ge(){function a(){return{x:window.pageXOffset!==d?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==d?window.pageYOffset:document.documentElement.scrollTop}}function v(ye){var fe=ye.getBoundingClientRect(),Ie=a();return{x:parseInt(fe.left,10)+parseInt(Ie.x,10),y:parseInt(fe.top,10)+parseInt(Ie.y,10)}}function D(ye){function fe(st){var _t=v(st);c("Moving to in page link (#"+Ie+") at x: "+_t.x+" y: "+_t.y),ct(_t.y,_t.x,"scrollToOffset")}var Ie=ye.split("#")[1]||ye,ke=decodeURIComponent(Ie),Xe=document.getElementById(ke)||document.getElementsByName(ke)[0];d!==Xe?fe(Xe):(c("In page link (#"+Ie+") not found in iFrame, so sending to parent"),ct(0,0,"inPageLink","#"+Ie))}function ie(){location.hash!==""&&location.hash!=="#"&&D(location.href)}function de(){function ye(fe){function Ie(ke){ke.preventDefault(),D(this.getAttribute("href"))}fe.getAttribute("href")!=="#"&&Le(fe,"click",Ie)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),ye)}function xe(){Le(window,"hashchange",ie)}function Ce(){setTimeout(ie,O)}function Fe(){Array.prototype.forEach&&document.querySelectorAll?(c("Setting up location.hash handlers"),de(),xe(),Ce()):P("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}return ne.enable?Fe():c("In page linking not enabled"),{findTarget:D}}function qe(){c("Enable public methods"),Ee.parentIFrame={autoResize:function(v){return v===!0&&S===!1?(S=!0,T()):v===!1&&S===!0&&(S=!1,Ne()),S},close:function(){ct(0,0,"close"),et()},getId:function(){return A},getPageInfo:function(v){typeof v=="function"?(je=v,ct(0,0,"pageInfo")):(je=function(){},ct(0,0,"pageInfoStop"))},moveToAnchor:function(v){ne.findTarget(v)},reset:function(){Tt("parentIFrame.reset")},scrollTo:function(v,D){ct(D,v,"scrollTo")},scrollToOffset:function(v,D){ct(D,v,"scrollToOffset")},sendMessage:function(v,D){ct(0,0,"message",JSON.stringify(v),D)},setHeightCalculationMethod:function(v){L=v,b()},setWidthCalculationMethod:function(v){pe=v,f()},setTargetOrigin:function(v){c("Set targetOrigin: "+v),U=v},size:function(v,D){var ie=""+(v||"")+(D?","+D:"");ht("size","parentIFrame.size("+ie+")",v,D)}}}function ue(){G!==0&&(c("setInterval: "+G+"ms"),_e=setInterval(function(){ht("interval","setInterval: "+G)},Math.abs(G)))}function ee(){function a(ke){function Xe(st){st.complete===!1&&(c("Attach listeners to "+st.src),st.addEventListener("load",de,!1),st.addEventListener("error",xe,!1),ye.push(st))}ke.type==="attributes"&&ke.attributeName==="src"?Xe(ke.target):ke.type==="childList"&&Array.prototype.forEach.call(ke.target.querySelectorAll("img"),Xe)}function v(ke){ye.splice(ye.indexOf(ke),1)}function D(ke){c("Remove listeners from "+ke.src),ke.removeEventListener("load",de,!1),ke.removeEventListener("error",xe,!1),v(ke)}function ie(ke,Xe,st){D(ke.target),ht(Xe,st+": "+ke.target.src,d,d)}function de(ke){ie(ke,"imageLoad","Image loaded")}function xe(ke){ie(ke,"imageLoadFailed","Image load failed")}function Ce(ke){ht("mutationObserver","mutationObserver: "+ke[0].target+" "+ke[0].type),ke.forEach(a)}function Fe(){var ke=document.querySelector("body"),Xe={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return Ie=new fe(Ce),c("Create body MutationObserver"),Ie.observe(ke,Xe),Ie}var ye=[],fe=window.MutationObserver||window.WebKitMutationObserver,Ie=Fe();return{disconnect:function(){"disconnect"in Ie&&(c("Disconnect body MutationObserver"),Ie.disconnect(),ye.forEach(D))}}}function K(){var a=0>G;window.MutationObserver||window.WebKitMutationObserver?a?ue():y=ee():(c("MutationObserver not supported in this browser!"),ue())}function te(a,v){function D(de){var xe=/^\d+(px)?$/i;if(xe.test(de))return parseInt(de,I);var Ce=v.style.left,Fe=v.runtimeStyle.left;return v.runtimeStyle.left=v.currentStyle.left,v.style.left=de||0,de=v.style.pixelLeft,v.style.left=Ce,v.runtimeStyle.left=Fe,de}var ie=0;return v=v||document.body,"defaultView"in document&&"getComputedStyle"in document.defaultView?(ie=document.defaultView.getComputedStyle(v,null),ie=ie!==null?ie[a]:0):ie=D(v.currentStyle[a]),parseInt(ie,I)}function le(a){a>me/2&&(me=2*a,c("Event throttle increased to "+me+"ms"))}function Se(a,v){for(var D=v.length,ie=0,de=0,xe=Ke(a),Ce=p(),Fe=0;Fe<D;Fe++)ie=v[Fe].getBoundingClientRect()[a]+te("margin"+xe,v[Fe]),ie>de&&(de=ie);return Ce=p()-Ce,c("Parsed "+D+" HTML elements"),c("Element position calculated in "+Ce+"ms"),le(Ce),de}function we(a){return[a.bodyOffset(),a.bodyScroll(),a.documentElementOffset(),a.documentElementScroll()]}function Pe(a,v){function D(){return P("No tagged elements ("+v+") found on page"),document.querySelectorAll("body *")}var ie=document.querySelectorAll("["+v+"]");return ie.length===0&&D(),Se(a,ie)}function Be(){return document.querySelectorAll("body *")}var Je={bodyOffset:function(){return document.body.offsetHeight+te("marginTop")+te("marginBottom")},offset:function(){return Je.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return ze.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,we(Je))},min:function(){return Math.min.apply(null,we(Je))},grow:function(){return Je.max()},lowestElement:function(){return Math.max(Je.bodyOffset(),Se("bottom",Be()))},taggedElement:function(){return Pe("bottom","data-iframe-height")}},lt={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return ze.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(lt.bodyScroll(),lt.documentElementScroll())},max:function(){return Math.max.apply(null,we(lt))},min:function(){return Math.min.apply(null,we(lt))},rightMostElement:function(){return Se("right",Be())},taggedElement:function(){return Pe("right","data-iframe-width")}};function mt(a,v,D,ie){function de(){C=Ie,ve=ke,ct(C,ve,a)}function xe(){function Xe(st,_t){var en=Math.abs(st-_t)<=J;return!en}return Ie=d!==D?D:Je[L](),ke=d!==ie?ie:lt[pe](),Xe(C,Ie)||m&&Xe(ve,ke)}function Ce(){return!(a in{init:1,interval:1,size:1})}function Fe(){return L in R||m&&pe in R}function ye(){c("No change in size detected")}function fe(){Ce()&&Fe()?Tt(v):a in{interval:1}||ye()}var Ie,ke;xe()||a==="init"?(kt(),de()):fe()}var Ot=rt(mt);function ht(a,v,D,ie){function de(){a in{reset:1,resetPage:1,init:1}||c("Trigger event: "+v)}function xe(){return $&&a in M}xe()?c("Trigger event cancelled: "+a):(de(),Ot(a,v,D,ie))}function kt(){$||($=!0,c("Trigger event lock on")),clearTimeout(q),q=setTimeout(function(){$=!1,c("Trigger event lock off"),c("--")},O)}function at(a){C=Je[L](),ve=lt[pe](),ct(C,ve,a)}function Tt(a){var v=L;L=t,c("Reset trigger event: "+a),kt(),at("reset"),L=v}function ct(a,v,D,ie,de){function xe(){d===de?de=U:c("Message targetOrigin: "+de)}function Ce(){var Fe=a+":"+v,ye=A+":"+Fe+":"+D+(d!==ie?":"+ie:"");c("Sending message to host page ("+ye+")"),x.postMessage(Ae+ye,de)}_===!0&&(xe(),Ce())}function w(a){var v={init:function(){function Ie(){V=a.data,x=a.source,Z(),H=!1,setTimeout(function(){o=!1},O)}document.readyState==="interactive"||document.readyState==="complete"?Ie():(c("Waiting for page ready"),Le(window,"readystatechange",v.initFromParent))},reset:function(){o?c("Page reset ignored by init"):(c("Page size reset by host page"),at("resetPage"))},resize:function(){ht("resizeParent","Parent window requested size check")},moveToAnchor:function(){ne.findTarget(de())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var Ie=de();c("PageInfoFromParent called from parent: "+Ie),je(JSON.parse(Ie)),c(" --")},message:function(){var Ie=de();c("MessageCallback called from parent: "+Ie),Oe(JSON.parse(Ie)),c(" --")}};function D(){return Ae===(""+a.data).substr(0,re)}function ie(){return a.data.split("]")[1].split(":")[0]}function de(){return a.data.substr(a.data.indexOf(":")+1)}function xe(){return!r.exports&&"iFrameResize"in window}function Ce(){return a.data.split(":")[2]in{true:1,false:1}}function Fe(){var fe=ie();fe in v?v[fe]():!xe()&&!Ce()&&P("Unexpected message ("+a.data+")")}function ye(){H===!1?Fe():Ce()?v.init():c('Ignored message of type "'+ie()+'". Received before initialization.')}D()&&ye()}function z(){document.readyState!=="loading"&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}Le(window,"message",w),z()})()},28:(r,d)=>{var S,I,X;(function(W){if(typeof window>"u")return;var j=0,y=!1,k=!1,m="message",M=m.length,O="[iFrameSizer]",H=O.length,C=null,t=window.requestAnimationFrame,L={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},o={},V=null,ne={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){_("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}};function G(c,P,Z){"addEventListener"in window?c.addEventListener(P,Z,!1):"attachEvent"in window&&c.attachEvent("on"+P,Z)}function _e(c,P,Z){"removeEventListener"in window?c.removeEventListener(P,Z,!1):"detachEvent"in window&&c.detachEvent("on"+P,Z)}function ge(){var c=["moz","webkit","o","ms"],P;for(P=0;P<c.length&&!t;P+=1)t=window[c[P]+"RequestAnimationFrame"];t||R("setup","RequestAnimationFrame not supported")}function Ae(c){var P="Host page: "+c;return window.top!==window.self&&(window.parentIFrame&&window.parentIFrame.getId?P=window.parentIFrame.getId()+": "+c:P="Nested host page: "+c),P}function re(c){return O+"["+Ae(c)+"]"}function A(c){return o[c]?o[c].log:y}function R(c,P){x("log",c,P,A(c))}function h(c,P){x("info",c,P,A(c))}function _(c,P){x("warn",c,P,!0)}function x(c,P,Z,Y){Y===!0&&typeof window.console=="object"&&console[c](re(P),Z)}function U(c){function P(){function te(){pe(ee),me(K),Ne("resizedCallback",ee)}Y("Height"),Y("Width"),Ee(te,ee,"init")}function Z(){var te=ue.substr(H).split(":");return{iframe:o[te[0]]&&o[te[0]].iframe,id:te[0],height:te[1],width:te[2],type:te[3]}}function Y(te){var le=Number(o[K]["max"+te]),Se=Number(o[K]["min"+te]),we=te.toLowerCase(),Pe=Number(ee[we]);R(K,"Checking "+we+" is in range "+Se+"-"+le),Pe<Se&&(Pe=Se,R(K,"Set "+we+" to min value")),Pe>le&&(Pe=le,R(K,"Set "+we+" to max value")),ee[we]=""+Pe}function se(){function te(){function we(){var Be=0,Je=!1;for(R(K,"Checking connection is from allowed list of origins: "+Se);Be<Se.length;Be++)if(Se[Be]===le){Je=!0;break}return Je}function Pe(){var Be=o[K]&&o[K].remoteHost;return R(K,"Checking connection is from: "+Be),le===Be}return Se.constructor===Array?we():Pe()}var le=c.origin,Se=o[K]&&o[K].checkOrigin;if(Se&&""+le!="null"&&!te())throw new Error("Unexpected message received from: "+le+" for "+ee.iframe.id+". Message was: "+c.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function be(){return O===(""+ue).substr(0,H)&&ue.substr(H).split(":")[0]in o}function De(){var te=ee.type in{true:1,false:1,undefined:1};return te&&R(K,"Ignoring init message from meta parent page"),te}function ce(te){return ue.substr(ue.indexOf(":")+M+te)}function Ue(te){R(K,"MessageCallback passed: {iframe: "+ee.iframe.id+", message: "+te+"}"),Ne("messageCallback",{iframe:ee.iframe,message:JSON.parse(te)}),R(K,"--")}function g(){var te=document.body.getBoundingClientRect(),le=ee.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:le.height,iframeWidth:le.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(le.top-te.top,10),offsetLeft:parseInt(le.left-te.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset})}function B(te,le){function Se(){Oe("Send Page Info","pageInfo:"+g(),te,le)}ze(Se,32)}function s(){function te(Pe,Be){function Je(){o[we]?B(o[we].iframe,we):le()}["scroll","resize"].forEach(function(lt){R(we,Pe+lt+" listener for sendPageInfo"),Be(window,lt,Je)})}function le(){te("Remove ",_e)}function Se(){te("Add ",G)}var we=K;Se(),o[we]&&(o[we].stopPageInfo=le)}function b(){o[K]&&o[K].stopPageInfo&&(o[K].stopPageInfo(),delete o[K].stopPageInfo)}function f(){var te=!0;return ee.iframe===null&&(_(K,"IFrame ("+ee.id+") not found"),te=!1),te}function T(te){var le=te.getBoundingClientRect();return q(K),{x:Math.floor(Number(le.left)+Number(C.x)),y:Math.floor(Number(le.top)+Number(C.y))}}function F(te){function le(){C=Be,N(),R(K,"--")}function Se(){return{x:Number(ee.width)+Pe.x,y:Number(ee.height)+Pe.y}}function we(){window.parentIFrame?window.parentIFrame["scrollTo"+(te?"Offset":"")](Be.x,Be.y):_(K,"Unable to scroll to requested position, window.parentIFrame not found")}var Pe=te?T(ee.iframe):{x:0,y:0},Be=Se();R(K,"Reposition requested from iFrame (offset x:"+Pe.x+" y:"+Pe.y+")"),window.top!==window.self?we():le()}function N(){Ne("scrollCallback",C)!==!1?me(K):ve()}function Te(te){function le(){var Je=T(Be);R(K,"Moving to in page link (#"+we+") at x: "+Je.x+" y: "+Je.y),C={x:Je.x,y:Je.y},N(),R(K,"--")}function Se(){window.parentIFrame?window.parentIFrame.moveToAnchor(we):R(K,"In page link #"+we+" not found and window.parentIFrame not found")}var we=te.split("#")[1]||"",Pe=decodeURIComponent(we),Be=document.getElementById(Pe)||document.getElementsByName(Pe)[0];Be?le():window.top!==window.self?Se():R(K,"In page link #"+we+" not found")}function Ne(te,le){return J(K,te,le)}function et(){switch(o[K]&&o[K].firstRun&&qe(),ee.type){case"close":o[K].closeRequestCallback?J(K,"closeRequestCallback",o[K].iframe):$(ee.iframe);break;case"message":Ue(ce(6));break;case"scrollTo":F(!1);break;case"scrollToOffset":F(!0);break;case"pageInfo":B(o[K]&&o[K].iframe,K),s();break;case"pageInfoStop":b();break;case"inPageLink":Te(ce(9));break;case"reset":We(ee);break;case"init":P(),Ne("initCallback",ee.iframe);break;default:P()}}function ft(te){var le=!0;return o[te]||(le=!1,_(ee.type+" No settings for "+te+". Message was: "+ue)),le}function Ge(){for(var te in o)Oe("iFrame requested init",Me(te),document.getElementById(te),te)}function qe(){o[K]&&(o[K].firstRun=!1)}var ue=c.data,ee={},K=null;ue==="[iFrameResizerChild]Ready"?Ge():be()?(ee=Z(),K=ee.id,o[K]&&(o[K].loaded=!0),!De()&&ft(K)&&(R(K,"Received: "+ue),f()&&se()&&et())):h(K,"Ignored: "+ue)}function J(c,P,Z){var Y=null,se=null;if(o[c])if(Y=o[c][P],typeof Y=="function")se=Y(Z);else throw new TypeError(P+" on iFrame["+c+"] is not a function");return se}function $(c){var P=c.id;R(P,"Removing iFrame: "+P),c.parentNode&&c.parentNode.removeChild(c),J(P,"closedCallback",P),R(P,"--"),delete o[P]}function q(c){C===null&&(C={x:window.pageXOffset!==W?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==W?window.pageYOffset:document.documentElement.scrollTop},R(c,"Get page position: "+C.x+","+C.y))}function me(c){C!==null&&(window.scrollTo(C.x,C.y),R(c,"Set page position: "+C.x+","+C.y),ve())}function ve(){C=null}function We(c){function P(){pe(c),Oe("reset","reset",c.iframe,c.id)}R(c.id,"Size reset requested by "+(c.type==="init"?"host page":"iFrame")),q(c.id),Ee(P,c,"reset")}function pe(c){function P(be){c.iframe.style[be]=c[be]+"px",R(c.id,"IFrame ("+se+") "+be+" set to "+c[be]+"px")}function Z(be){!k&&c[be]==="0"&&(k=!0,R(se,"Hidden iFrame detected, creating visibility listener"),Ve())}function Y(be){P(be),Z(be)}var se=c.iframe.id;o[se]&&(o[se].sizeHeight&&Y("height"),o[se].sizeWidth&&Y("width"))}function Ee(c,P,Z){Z!==P.type&&t?(R(P.id,"Requesting animation frame"),t(c)):c()}function Oe(c,P,Z,Y,se){function be(){var B=o[Y]&&o[Y].targetOrigin;R(Y,"["+c+"] Sending msg to iframe["+Y+"] ("+P+") targetOrigin: "+B),Z.contentWindow.postMessage(O+P,B)}function De(){_(Y,"["+c+"] IFrame("+Y+") not found")}function ce(){Z&&"contentWindow"in Z&&Z.contentWindow!==null?be():De()}function Ue(){function B(){o[Y]&&!o[Y].loaded&&!g&&(g=!0,_(Y,"IFrame has not responded within "+o[Y].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ingored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}se&&o[Y]&&o[Y].warningTimeout&&(o[Y].msgTimeout=setTimeout(B,o[Y].warningTimeout))}var g=!1;Y=Y||Z.id,o[Y]&&(ce(),Ue())}function Me(c){return c+":"+o[c].bodyMarginV1+":"+o[c].sizeWidth+":"+o[c].log+":"+o[c].interval+":"+o[c].enablePublicMethods+":"+o[c].autoResize+":"+o[c].bodyMargin+":"+o[c].heightCalculationMethod+":"+o[c].bodyBackground+":"+o[c].bodyPadding+":"+o[c].tolerance+":"+o[c].inPageLinks+":"+o[c].resizeFrom+":"+o[c].widthCalculationMethod}function je(c,P){function Z(){function N(Ne){o[F][Ne]!==1/0&&o[F][Ne]!==0&&(c.style[Ne]=o[F][Ne]+"px",R(F,"Set "+Ne+" = "+o[F][Ne]+"px"))}function Te(Ne){if(o[F]["min"+Ne]>o[F]["max"+Ne])throw new Error("Value for min"+Ne+" can not be greater than max"+Ne)}Te("Height"),Te("Width"),N("maxHeight"),N("minHeight"),N("maxWidth"),N("minWidth")}function Y(){var N=P&&P.id||ne.id+j++;return document.getElementById(N)!==null&&(N=N+j++),N}function se(N){return N===""&&(c.id=N=Y(),y=(P||{}).log,R(N,"Added missing iframe ID: "+N+" ("+c.src+")")),N}function be(){switch(R(F,"IFrame scrolling "+(o[F]&&o[F].scrolling?"enabled":"disabled")+" for "+F),c.style.overflow=(o[F]&&o[F].scrolling)===!1?"hidden":"auto",o[F]&&o[F].scrolling){case!0:c.scrolling="yes";break;case!1:c.scrolling="no";break;default:c.scrolling=o[F]?o[F].scrolling:"no"}}function De(){(typeof(o[F]&&o[F].bodyMargin)=="number"||(o[F]&&o[F].bodyMargin)==="0")&&(o[F].bodyMarginV1=o[F].bodyMargin,o[F].bodyMargin=""+o[F].bodyMargin+"px")}function ce(){var N=o[F]&&o[F].firstRun,Te=o[F]&&o[F].heightCalculationMethod in L;!N&&Te&&We({iframe:c,height:0,width:0,type:"init"})}function Ue(){Function.prototype.bind&&o[F]&&(o[F].iframe.iFrameResizer={close:$.bind(null,o[F].iframe),resize:Oe.bind(null,"Window resize","resize",o[F].iframe),moveToAnchor:function(N){Oe("Move to anchor","moveToAnchor:"+N,o[F].iframe,F)},sendMessage:function(N){N=JSON.stringify(N),Oe("Send Message","message:"+N,o[F].iframe,F)}})}function g(N){function Te(){Oe("iFrame.onload",N,c,W,!0),ce()}G(c,"load",Te),Oe("init",N,c,W,!0)}function B(N){if(typeof N!="object")throw new TypeError("Options is not an object")}function s(N){for(var Te in ne)ne.hasOwnProperty(Te)&&(o[F][Te]=N.hasOwnProperty(Te)?N[Te]:ne[Te])}function b(N){return N===""||N==="file://"?"*":N}function f(N){N=N||{},o[F]={firstRun:!0,iframe:c,remoteHost:c.src.split("/").slice(0,3).join("/")},B(N),s(N),o[F]&&(o[F].targetOrigin=o[F].checkOrigin===!0?b(o[F].remoteHost):"*")}function T(){return F in o&&"iFrameResizer"in c}var F=se(c.id);T()?_(F,"Ignored iFrame, already setup."):(f(P),be(),Z(),De(),g(Me(F)),Ue())}function ze(c,P){V===null&&(V=setTimeout(function(){V=null,c()},P))}function Ve(){function c(){function se(De){function ce(g){return(o[De]&&o[De].iframe.style[g])==="0px"}function Ue(g){return g.offsetParent!==null}o[De]&&Ue(o[De].iframe)&&(ce("height")||ce("width"))&&Oe("Visibility change","resize",o[De].iframe,De)}for(var be in o)se(be)}function P(se){R("window","Mutation observed: "+se[0].target+" "+se[0].type),ze(c,16)}function Z(){var se=document.querySelector("body"),be={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},De=new Y(P);De.observe(se,be)}var Y=window.MutationObserver||window.WebKitMutationObserver;Y&&Z()}function Le(c){function P(){Ke("Window "+c,"resize")}R("window","Trigger event: "+c),ze(P,16)}function Ze(){function c(){Ke("Tab Visable","resize")}document.visibilityState!=="hidden"&&(R("document","Trigger event: Visiblity change"),ze(c,16))}function Ke(c,P){function Z(se){return o[se]&&o[se].resizeFrom==="parent"&&o[se].autoResize&&!o[se].firstRun}for(var Y in o)Z(Y)&&Oe(c,P,document.getElementById(Y),Y)}function rt(){G(window,"message",U),G(window,"resize",function(){Le("resize")}),G(document,"visibilitychange",Ze),G(document,"-webkit-visibilitychange",Ze),G(window,"focusin",function(){Le("focus")}),G(window,"focus",function(){Le("focus")})}function p(){function c(Y,se){function be(){if(se.tagName){if(se.tagName.toUpperCase()!=="IFRAME")throw new TypeError("Expected <IFRAME> tag, found <"+se.tagName+">")}else throw new TypeError("Object is not a valid DOM element")}se&&(be(),je(se,Y),Z.push(se))}function P(Y){Y&&Y.enablePublicMethods&&_("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}var Z;return ge(),rt(),function(se,be){switch(Z=[],P(se),typeof be){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(be||"iframe"),c.bind(W,se));break;case"object":c(se,be);break;default:throw new TypeError("Unexpected data type ("+typeof be+")")}return Z}}function Q(c){c.fn?c.fn.iFrameResize||(c.fn.iFrameResize=function(Z){function Y(se,be){je(be,Z)}return this.filter("iframe").each(Y).end()}):h("","Unable to bind to jQuery, it is not fully loaded.")}window.jQuery&&Q(window.jQuery),I=[],S=p,X=typeof S=="function"?S.apply(d,I):S,X!==W&&(r.exports=X)})()},683:(r,d,S)=>{d.iframeResizer=S(28),d.iframeResizerContentWindow=S(402)},457:r=>{var d=function(){var S=Math.floor(Math.random()*1000001),I={};function X(m,M,O,H){function C(o){for(var V=0;V<o.length;V++)if(o[V].win===m)return!0;return!1}var t=!1;if(M==="*"){for(var L in I)if(I.hasOwnProperty(L)&&L!=="*"&&typeof I[L][O]=="object"&&(t=C(I[L][O]),t))break}else I["*"]&&I["*"][O]&&(t=C(I["*"][O])),!t&&I[M]&&I[M][O]&&(t=C(I[M][O]));if(t)throw"A channel is already bound to the same window which overlaps with origin '"+M+"' and has scope '"+O+"'";typeof I[M]!="object"&&(I[M]={}),typeof I[M][O]!="object"&&(I[M][O]=[]),I[M][O].push({win:m,handler:H})}function W(m,M,O){for(var H=I[M][O],C=0;C<H.length;C++)H[C].win===m&&H.splice(C,1);I[M][O].length===0&&delete I[M][O]}function j(m){return Array.isArray?Array.isArray(m):m.constructor.toString().indexOf("Array")!=-1}var y={},k=function(m){try{var M=JSON.parse(m.data);if(typeof M!="object"||M===null)throw"malformed"}catch{return}var O=m.source,H=m.origin,C,t,L;if(typeof M.method=="string"){var o=M.method.split("::");o.length==2?(C=o[0],L=o[1]):L=M.method}if(typeof M.id<"u"&&(t=M.id),typeof L=="string"){var V=!1;if(I[H]&&I[H][C]){for(var ne=0;ne<I[H][C].length;ne++)if(I[H][C][ne].win===O){I[H][C][ne].handler(H,L,M),V=!0;break}}if(!V&&I["*"]&&I["*"][C]){for(var ne=0;ne<I["*"][C].length;ne++)if(I["*"][C][ne].win===O){I["*"][C][ne].handler(H,L,M);break}}}else typeof t<"u"&&y[t]&&y[t](H,L,M)};return window.addEventListener?window.addEventListener("message",k,!1):window.attachEvent&&window.attachEvent("onmessage",k),{build:function(m){var M=function(h){if(m.debugOutput&&window.console&&window.console.log){try{typeof h!="string"&&(h=JSON.stringify(h))}catch{}console.log("["+C+"] "+h)}};if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if(typeof m!="object")throw"Channel build invoked without a proper object argument";if(!m.window||!m.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===m.window)throw"target window is same as present window -- not allowed";var O=!1;if(typeof m.origin=="string"){var H;m.origin==="*"?O=!0:(H=m.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))!==null&&(m.origin=H[0].toLowerCase(),O=!0)}if(!O)throw"Channel.build() called with an invalid origin";if(typeof m.scope<"u"){if(typeof m.scope!="string")throw"scope, when specified, must be a string";if(m.scope.split("::").length>1)throw"scope may not contain double colons: '::'"}var C=function(){for(var h="",_="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",x=0;x<5;x++)h+=_.charAt(Math.floor(Math.random()*_.length));return h}(),t={},L={},o={},V=!1,ne=[],G=function(h,_,x){var U=!1,J=!1;return{origin:_,invoke:function($,q){if(!o[h])throw"attempting to invoke a callback of a nonexistent transaction: "+h;for(var me=!1,ve=0;ve<x.length;ve++)if($===x[ve]){me=!0;break}if(!me)throw"request supports no such callback '"+$+"'";re({id:h,callback:$,params:q})},error:function($,q){if(J=!0,!o[h])throw"error called for nonexistent message: "+h;delete o[h],re({id:h,error:$,message:q})},complete:function($){if(J=!0,!o[h])throw"complete called for nonexistent message: "+h;delete o[h],re({id:h,result:$})},delayReturn:function($){return typeof $=="boolean"&&(U=$===!0),U},completed:function(){return J}}},_e=function(h,_,x){return window.setTimeout(function(){if(L[h]){var U="timeout ("+_+"ms) exceeded on method '"+x+"'";(0,L[h].error)("timeout_error",U),delete L[h],delete y[h]}},_)},ge=function(h,_,x){if(typeof m.gotMessageObserver=="function")try{m.gotMessageObserver(h,x)}catch(Me){M("gotMessageObserver() raised an exception: "+Me.toString())}if(x.id&&_){if(t[_]){var U=G(x.id,h,x.callbacks?x.callbacks:[]);o[x.id]={};try{if(x.callbacks&&j(x.callbacks)&&x.callbacks.length>0)for(var J=0;J<x.callbacks.length;J++){for(var $=x.callbacks[J],q=x.params,me=$.split("/"),ve=0;ve<me.length-1;ve++){var We=me[ve];typeof q[We]!="object"&&(q[We]={}),q=q[We]}q[me[me.length-1]]=function(){var Me=$;return function(je){return U.invoke(Me,je)}}()}var pe=t[_](U,x.params);!U.delayReturn()&&!U.completed()&&U.complete(pe)}catch(Me){var Ee="runtime_error",Oe=null;if(typeof Me=="string"?Oe=Me:typeof Me=="object"&&(Me&&j(Me)&&Me.length==2?(Ee=Me[0],Oe=Me[1]):typeof Me.error=="string"&&(Ee=Me.error,Me.message?typeof Me.message=="string"?Oe=Me.message:Me=Me.message:Oe="")),Oe===null)try{Oe=JSON.stringify(Me),typeof Oe>"u"&&(Oe=Me.toString())}catch{Oe=Me.toString()}U.error(Ee,Oe)}}}else x.id&&x.callback?!L[x.id]||!L[x.id].callbacks||!L[x.id].callbacks[x.callback]?M("ignoring invalid callback, id:"+x.id+" ("+x.callback+")"):L[x.id].callbacks[x.callback](x.params):x.id?L[x.id]?(x.error?(0,L[x.id].error)(x.error,x.message):x.result!==void 0?(0,L[x.id].success)(x.result):(0,L[x.id].success)(),delete L[x.id],delete y[x.id]):M("ignoring invalid response: "+x.id):_&&t[_]&&t[_]({origin:h},x.params)};X(m.window,m.origin,typeof m.scope=="string"?m.scope:"",ge);var Ae=function(h){return typeof m.scope=="string"&&m.scope.length&&(h=[m.scope,h].join("::")),h},re=function(h,_){if(!h)throw"postMessage called with null message";var x=V?"post  ":"queue ";if(M(x+" message: "+JSON.stringify(h)),!_&&!V)ne.push(h);else{if(typeof m.postMessageObserver=="function")try{m.postMessageObserver(m.origin,h)}catch(U){M("postMessageObserver() raised an exception: "+U.toString())}m.window.postMessage(JSON.stringify(h),m.origin)}},A=function(h,_){if(M("ready msg received"),V)throw"received ready message while in ready state.  help!";for(_==="ping"?C+="-R":C+="-L",R.unbind("__ready"),V=!0,M("ready msg accepted."),_==="ping"&&R.notify({method:"__ready",params:"pong"});ne.length;)re(ne.pop());typeof m.onReady=="function"&&m.onReady(R)},R={unbind:function(h){if(t[h]){if(!delete t[h])throw"can't delete method: "+h;return!0}return!1},bind:function(h,_){if(!h||typeof h!="string")throw"'method' argument to bind must be string";if(!_||typeof _!="function")throw"callback missing from bind params";if(t[h])throw"method '"+h+"' is already bound!";return t[h]=_,this},call:function(h){if(!h)throw"missing arguments to call function";if(!h.method||typeof h.method!="string")throw"'method' argument to call must be string";if(!h.success||typeof h.success!="function")throw"'success' callback missing from call";var _={},x=[],U=[],J=function(q,me){if(U.indexOf(me)>=0)throw"params cannot be a recursive data structure";if(U.push(me),typeof me=="object"){for(var ve in me)if(me.hasOwnProperty(ve)){var We=q+(q.length?"/":"")+ve;typeof me[ve]=="function"?(_[We]=me[ve],x.push(We),delete me[ve]):typeof me[ve]=="object"&&me[ve]!==null&&J(We,me[ve])}}};J("",h.params);var $={id:S,method:Ae(h.method),params:h.params};x.length&&($.callbacks=x),h.timeout&&_e(S,h.timeout,Ae(h.method)),L[S]={callbacks:_,error:h.error,success:h.success},y[S]=ge,S++,re($)},notify:function(h){if(!h)throw"missing arguments to notify function";if(!h.method||typeof h.method!="string")throw"'method' argument to notify must be string";re({method:Ae(h.method),params:h.params})},destroy:function(){W(m.window,m.origin,typeof m.scope=="string"?m.scope:""),window.removeEventListener?window.removeEventListener("message",ge,!1):window.detachEvent&&window.detachEvent("onmessage",ge),V=!1,t={},o={},L={},m.origin=null,ne=[],M("channel destroyed"),C=""}};return R.bind("__ready",A),setTimeout(function(){re({method:Ae("__ready"),params:"ping"},!0)},0),R}}}();r.exports=d},705:(r,d,S)=>{var I=S(639),X=I.Symbol;r.exports=X},239:(r,d,S)=>{var I=S(705),X=S(607),W=S(333),j="[object Null]",y="[object Undefined]",k=I?I.toStringTag:void 0;function m(M){return M==null?M===void 0?y:j:k&&k in Object(M)?X(M):W(M)}r.exports=m},957:(r,d,S)=>{var I=typeof S.g=="object"&&S.g&&S.g.Object===Object&&S.g;r.exports=I},924:(r,d,S)=>{var I=S(569),X=I(Object.getPrototypeOf,Object);r.exports=X},607:(r,d,S)=>{var I=S(705),X=Object.prototype,W=X.hasOwnProperty,j=X.toString,y=I?I.toStringTag:void 0;function k(m){var M=W.call(m,y),O=m[y];try{m[y]=void 0;var H=!0}catch{}var C=j.call(m);return H&&(M?m[y]=O:delete m[y]),C}r.exports=k},333:r=>{var d=Object.prototype,S=d.toString;function I(X){return S.call(X)}r.exports=I},569:r=>{function d(S,I){return function(X){return S(I(X))}}r.exports=d},639:(r,d,S)=>{var I=S(957),X=typeof self=="object"&&self&&self.Object===Object&&self,W=I||X||Function("return this")();r.exports=W},469:r=>{var d=Array.isArray;r.exports=d},5:r=>{function d(S){return S!=null&&typeof S=="object"}r.exports=d},630:(r,d,S)=>{var I=S(239),X=S(924),W=S(5),j="[object Object]",y=Function.prototype,k=Object.prototype,m=y.toString,M=k.hasOwnProperty,O=m.call(Object);function H(C){if(!W(C)||I(C)!=j)return!1;var t=X(C);if(t===null)return!0;var L=M.call(t,"constructor")&&t.constructor;return typeof L=="function"&&L instanceof L&&m.call(L)==O}r.exports=H},37:(r,d,S)=>{var I=S(239),X=S(469),W=S(5),j="[object String]";function y(k){return typeof k=="string"||!X(k)&&W(k)&&I(k)==j}r.exports=y},353:r=>{function d(S){return S===void 0}r.exports=d}},u={};function i(r){var d=u[r];if(d!==void 0)return d.exports;var S=u[r]={exports:{}};return e[r].call(S.exports,S,S.exports,i),S.exports}i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var n=i(541);l.Addon=n})()})(Jt);(()=>{var l={669:(i,n,r)=>{var d=r(218),S=M(d),I=function(){function L(o,V){for(var ne=0;ne<V.length;ne++){var G=V[ne];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(o,G.key,G)}}return function(o,V,ne){return V&&L(o.prototype,V),ne&&L(o,ne),o}}(),X=r(457),W=M(X),j=r(729),y=M(j),k=r(702),m=r(303);function M(L){return L&&L.__esModule?L:{default:L}}function O(L,o){if(!(L instanceof o))throw new TypeError("Cannot call a class as a function")}function H(L,o){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:L}function C(L,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);L.prototype=Object.create(o&&o.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(L,o):L.__proto__=o)}var t=function(L){C(o,L);function o(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};O(this,o);var ne=H(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));if(ne.options=V,!V.iframe)throw new Error("Iframe not defined");return(0,m.iframeResizer)({checkOrigin:!0,heightCalculationMethod:window.ieVersion<=10?"max":"lowestElement",resizeFrom:"child",resizedCallback:function(_e){ne.emit("iframeResized",_e)}},V.iframe),ne.channel=W.default.build({window:V.iframe.contentWindow,origin:V.origin||"*",scope:V.id||V.iframe.contentWindow.location.origin,postMessageObserver:function(_e,ge){ne.emit("postMessage",_e,ge)},gotMessageObserver:function(_e,ge){ne.emit("gotMessage",_e,ge)}}),["saveData","request","addTransaction","editTransaction","addInstitution","addInvestment","editInstitution","editAsset","editLiability","deleteInstitution","deleteAsset","deleteLiability","downloadDocument","upgradePremium","getSharings","switchUser"].forEach(function(G){ne.channel.bind(G,function(_e,ge){var Ae=G,re=ge;_e.delayReturn(!0);var A=function(h,_){return h?_e.error(h):_e.complete(_)};ne.emit(Ae,re||A,re?A:void 0)})}),ne.channel.call({method:"init",params:V.options,success:function(_e){ne.emit("init",_e)}}),ne}return I(o,[{key:"trigger",value:function(ne,G){var _e=this,ge={eventName:ne};return G&&(ge.eventData=G),new k.Promise(function(Ae,re){_e.channel.call({method:"_event",params:ge,success:Ae,error:re})})}},{key:"update",value:function(ne){var G=this;return new k.Promise(function(_e,ge){if(!(0,S.default)(ne))throw new Error("Data must be an object");G.channel.call({method:"update",params:ne,success:_e,error:ge})})}},{key:"reload",value:function(){var ne=this;return new k.Promise(function(G,_e){ne.channel.call({method:"reload",success:G,error:_e})})}},{key:"destroy",value:function(){this.channel.destroy()}}]),o}(y.default);i.exports=t},702:function(i,n,r){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(d,S){i.exports=S()})(this,function(){function d(g){var B=typeof g;return g!==null&&(B==="object"||B==="function")}function S(g){return typeof g=="function"}var I=void 0;Array.isArray?I=Array.isArray:I=function(g){return Object.prototype.toString.call(g)==="[object Array]"};var X=I,W=0,j=void 0,y=void 0,k=function(B,s){ge[W]=B,ge[W+1]=s,W+=2,W===2&&(y?y(Ae):A())};function m(g){y=g}function M(g){k=g}var O=typeof window<"u"?window:void 0,H=O||{},C=H.MutationObserver||H.WebKitMutationObserver,t=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",L=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function o(){return function(){return process.nextTick(Ae)}}function V(){return typeof j<"u"?function(){j(Ae)}:_e()}function ne(){var g=0,B=new C(Ae),s=document.createTextNode("");return B.observe(s,{characterData:!0}),function(){s.data=g=++g%2}}function G(){var g=new MessageChannel;return g.port1.onmessage=Ae,function(){return g.port2.postMessage(0)}}function _e(){var g=setTimeout;return function(){return g(Ae,1)}}var ge=new Array(1e3);function Ae(){for(var g=0;g<W;g+=2){var B=ge[g],s=ge[g+1];B(s),ge[g]=void 0,ge[g+1]=void 0}W=0}function re(){try{var g=Function("return this")().require("vertx");return j=g.runOnLoop||g.runOnContext,V()}catch{return _e()}}var A=void 0;t?A=o():C?A=ne():L?A=G():O===void 0?A=re():A=_e();function R(g,B){var s=this,b=new this.constructor(x);b[_]===void 0&&Q(b);var f=s._state;if(f){var T=arguments[f-1];k(function(){return Ze(f,b,T,s._result)})}else Ve(s,b,g,B);return b}function h(g){var B=this;if(g&&typeof g=="object"&&g.constructor===B)return g;var s=new B(x);return Oe(s,g),s}var _=Math.random().toString(36).substring(2);function x(){}var U=void 0,J=1,$=2;function q(){return new TypeError("You cannot resolve a promise with itself")}function me(){return new TypeError("A promises callback cannot return that same promise.")}function ve(g,B,s,b){try{g.call(B,s,b)}catch(f){return f}}function We(g,B,s){k(function(b){var f=!1,T=ve(s,B,function(F){f||(f=!0,B!==F?Oe(b,F):je(b,F))},function(F){f||(f=!0,ze(b,F))},"Settle: "+(b._label||" unknown promise"));!f&&T&&(f=!0,ze(b,T))},g)}function pe(g,B){B._state===J?je(g,B._result):B._state===$?ze(g,B._result):Ve(B,void 0,function(s){return Oe(g,s)},function(s){return ze(g,s)})}function Ee(g,B,s){B.constructor===g.constructor&&s===R&&B.constructor.resolve===h?pe(g,B):s===void 0?je(g,B):S(s)?We(g,B,s):je(g,B)}function Oe(g,B){if(g===B)ze(g,q());else if(d(B)){var s=void 0;try{s=B.then}catch(b){ze(g,b);return}Ee(g,B,s)}else je(g,B)}function Me(g){g._onerror&&g._onerror(g._result),Le(g)}function je(g,B){g._state===U&&(g._result=B,g._state=J,g._subscribers.length!==0&&k(Le,g))}function ze(g,B){g._state===U&&(g._state=$,g._result=B,k(Me,g))}function Ve(g,B,s,b){var f=g._subscribers,T=f.length;g._onerror=null,f[T]=B,f[T+J]=s,f[T+$]=b,T===0&&g._state&&k(Le,g)}function Le(g){var B=g._subscribers,s=g._state;if(B.length!==0){for(var b=void 0,f=void 0,T=g._result,F=0;F<B.length;F+=3)b=B[F],f=B[F+s],b?Ze(s,b,f,T):f(T);g._subscribers.length=0}}function Ze(g,B,s,b){var f=S(s),T=void 0,F=void 0,N=!0;if(f){try{T=s(b)}catch(Te){N=!1,F=Te}if(B===T){ze(B,me());return}}else T=b;B._state!==U||(f&&N?Oe(B,T):N===!1?ze(B,F):g===J?je(B,T):g===$&&ze(B,T))}function Ke(g,B){try{B(function(b){Oe(g,b)},function(b){ze(g,b)})}catch(s){ze(g,s)}}var rt=0;function p(){return rt++}function Q(g){g[_]=rt++,g._state=void 0,g._result=void 0,g._subscribers=[]}function c(){return new Error("Array Methods must be provided an Array")}var P=function(){function g(B,s){this._instanceConstructor=B,this.promise=new B(x),this.promise[_]||Q(this.promise),X(s)?(this.length=s.length,this._remaining=s.length,this._result=new Array(this.length),this.length===0?je(this.promise,this._result):(this.length=this.length||0,this._enumerate(s),this._remaining===0&&je(this.promise,this._result))):ze(this.promise,c())}return g.prototype._enumerate=function(s){for(var b=0;this._state===U&&b<s.length;b++)this._eachEntry(s[b],b)},g.prototype._eachEntry=function(s,b){var f=this._instanceConstructor,T=f.resolve;if(T===h){var F=void 0,N=void 0,Te=!1;try{F=s.then}catch(et){Te=!0,N=et}if(F===R&&s._state!==U)this._settledAt(s._state,b,s._result);else if(typeof F!="function")this._remaining--,this._result[b]=s;else if(f===ce){var Ne=new f(x);Te?ze(Ne,N):Ee(Ne,s,F),this._willSettleAt(Ne,b)}else this._willSettleAt(new f(function(et){return et(s)}),b)}else this._willSettleAt(T(s),b)},g.prototype._settledAt=function(s,b,f){var T=this.promise;T._state===U&&(this._remaining--,s===$?ze(T,f):this._result[b]=f),this._remaining===0&&je(T,this._result)},g.prototype._willSettleAt=function(s,b){var f=this;Ve(s,void 0,function(T){return f._settledAt(J,b,T)},function(T){return f._settledAt($,b,T)})},g}();function Z(g){return new P(this,g).promise}function Y(g){var B=this;return X(g)?new B(function(s,b){for(var f=g.length,T=0;T<f;T++)B.resolve(g[T]).then(s,b)}):new B(function(s,b){return b(new TypeError("You must pass an array to race."))})}function se(g){var B=this,s=new B(x);return ze(s,g),s}function be(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function De(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var ce=function(){function g(B){this[_]=p(),this._result=this._state=void 0,this._subscribers=[],x!==B&&(typeof B!="function"&&be(),this instanceof g?Ke(this,B):De())}return g.prototype.catch=function(s){return this.then(null,s)},g.prototype.finally=function(s){var b=this,f=b.constructor;return S(s)?b.then(function(T){return f.resolve(s()).then(function(){return T})},function(T){return f.resolve(s()).then(function(){throw T})}):b.then(s,s)},g}();ce.prototype.then=R,ce.all=Z,ce.race=Y,ce.resolve=h,ce.reject=se,ce._setScheduler=m,ce._setAsap=M,ce._asap=k;function Ue(){var g=void 0;if(typeof r.g<"u")g=r.g;else if(typeof self<"u")g=self;else try{g=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var B=g.Promise;if(B){var s=null;try{s=Object.prototype.toString.call(B.resolve())}catch{}if(s==="[object Promise]"&&!B.cast)return}g.Promise=ce}return ce.polyfill=Ue,ce.Promise=ce,ce})},729:i=>{var n=Object.prototype.hasOwnProperty,r="~";function d(){}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(r=!1));function S(j,y,k){this.fn=j,this.context=y,this.once=k||!1}function I(j,y,k,m,M){if(typeof k!="function")throw new TypeError("The listener must be a function");var O=new S(k,m||j,M),H=r?r+y:y;return j._events[H]?j._events[H].fn?j._events[H]=[j._events[H],O]:j._events[H].push(O):(j._events[H]=O,j._eventsCount++),j}function X(j,y){--j._eventsCount===0?j._events=new d:delete j._events[y]}function W(){this._events=new d,this._eventsCount=0}W.prototype.eventNames=function(){var y=[],k,m;if(this._eventsCount===0)return y;for(m in k=this._events)n.call(k,m)&&y.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(k)):y},W.prototype.listeners=function(y){var k=r?r+y:y,m=this._events[k];if(!m)return[];if(m.fn)return[m.fn];for(var M=0,O=m.length,H=new Array(O);M<O;M++)H[M]=m[M].fn;return H},W.prototype.listenerCount=function(y){var k=r?r+y:y,m=this._events[k];return m?m.fn?1:m.length:0},W.prototype.emit=function(y,k,m,M,O,H){var C=r?r+y:y;if(!this._events[C])return!1;var t=this._events[C],L=arguments.length,o,V;if(t.fn){switch(t.once&&this.removeListener(y,t.fn,void 0,!0),L){case 1:return t.fn.call(t.context),!0;case 2:return t.fn.call(t.context,k),!0;case 3:return t.fn.call(t.context,k,m),!0;case 4:return t.fn.call(t.context,k,m,M),!0;case 5:return t.fn.call(t.context,k,m,M,O),!0;case 6:return t.fn.call(t.context,k,m,M,O,H),!0}for(V=1,o=new Array(L-1);V<L;V++)o[V-1]=arguments[V];t.fn.apply(t.context,o)}else{var ne=t.length,G;for(V=0;V<ne;V++)switch(t[V].once&&this.removeListener(y,t[V].fn,void 0,!0),L){case 1:t[V].fn.call(t[V].context);break;case 2:t[V].fn.call(t[V].context,k);break;case 3:t[V].fn.call(t[V].context,k,m);break;case 4:t[V].fn.call(t[V].context,k,m,M);break;default:if(!o)for(G=1,o=new Array(L-1);G<L;G++)o[G-1]=arguments[G];t[V].fn.apply(t[V].context,o)}}return!0},W.prototype.on=function(y,k,m){return I(this,y,k,m,!1)},W.prototype.once=function(y,k,m){return I(this,y,k,m,!0)},W.prototype.removeListener=function(y,k,m,M){var O=r?r+y:y;if(!this._events[O])return this;if(!k)return X(this,O),this;var H=this._events[O];if(H.fn)H.fn===k&&(!M||H.once)&&(!m||H.context===m)&&X(this,O);else{for(var C=0,t=[],L=H.length;C<L;C++)(H[C].fn!==k||M&&!H[C].once||m&&H[C].context!==m)&&t.push(H[C]);t.length?this._events[O]=t.length===1?t[0]:t:X(this,O)}return this},W.prototype.removeAllListeners=function(y){var k;return y?(k=r?r+y:y,this._events[k]&&X(this,k)):(this._events=new d,this._eventsCount=0),this},W.prototype.off=W.prototype.removeListener,W.prototype.addListener=W.prototype.on,W.prefixed=r,W.EventEmitter=W,i.exports=W},303:(i,n,r)=>{i.exports=r(683)},402:i=>{(function(n){if(typeof window>"u")return;var r=!0,d=10,S="",I=0,X="",W=null,j="",y=!1,k={resize:1,click:1},m=128,M=!0,O=1,H="bodyOffset",C=H,t=!0,L="",o={},V=32,ne=null,G=!1,_e="[iFrameSizer]",ge=_e.length,Ae="",re={max:1,min:1,bodyScroll:1,documentElementScroll:1},A="child",R=!0,h=window.parent,_="*",x=0,U=!1,J=null,$=16,q=1,me="scroll",ve=me,We=window,pe=function(){Q("MessageCallback function not defined")},Ee=function(){},Oe=function(){},Me={height:function(){return Q("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return Q("Custom width calculation function not defined"),document.body.scrollWidth}},je={};function ze(w,z,a){"addEventListener"in window?w.addEventListener(z,a,!1):"attachEvent"in window&&w.attachEvent("on"+z,a)}function Ve(w,z,a){"removeEventListener"in window?w.removeEventListener(z,a,!1):"detachEvent"in window&&w.detachEvent("on"+z,a)}function Le(w){return w.charAt(0).toUpperCase()+w.slice(1)}function Ze(w){var z,a,v,D=null,ie=0,de=function(){ie=Ke(),D=null,v=w.apply(z,a),D||(z=a=null)};return function(){var xe=Ke();ie||(ie=xe);var Ce=$-(xe-ie);return z=this,a=arguments,Ce<=0||Ce>$?(D&&(clearTimeout(D),D=null),ie=xe,v=w.apply(z,a),D||(z=a=null)):D||(D=setTimeout(de,Ce)),v}}var Ke=Date.now||function(){return new Date().getTime()};function rt(w){return _e+"["+Ae+"] "+w}function p(w){G&&typeof window.console=="object"&&console.log(rt(w))}function Q(w){typeof window.console=="object"&&console.warn(rt(w))}function c(){P(),p("Initialising iFrame ("+location.href+")"),Z(),be(),se("background",S),se("padding",j),Ne(),B(),s(),De(),ft(),b(),o=et(),mt("init","Init message from host page"),Ee()}function P(){function w(a){return a==="true"}var z=L.substr(ge).split(":");Ae=z[0],I=n!==z[1]?Number(z[1]):I,y=n!==z[2]?w(z[2]):y,G=n!==z[3]?w(z[3]):G,V=n!==z[4]?Number(z[4]):V,r=n!==z[6]?w(z[6]):r,X=z[7],C=n!==z[8]?z[8]:C,S=z[9],j=z[10],x=n!==z[11]?Number(z[11]):x,o.enable=n!==z[12]?w(z[12]):!1,A=n!==z[13]?z[13]:A,ve=n!==z[14]?z[14]:ve}function Z(){function w(){var a=window.iFrameResizer;p("Reading data from page: "+JSON.stringify(a)),pe="messageCallback"in a?a.messageCallback:pe,Ee="readyCallback"in a?a.readyCallback:Ee,_="targetOrigin"in a?a.targetOrigin:_,C="heightCalculationMethod"in a?a.heightCalculationMethod:C,ve="widthCalculationMethod"in a?a.widthCalculationMethod:ve}function z(a,v){return typeof a=="function"&&(p("Setup custom "+v+"CalcMethod"),Me[v]=a,a="custom"),a}"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(w(),C=z(C,"height"),ve=z(ve,"width")),p("TargetOrigin for parent set to: "+_)}function Y(w,z){return z.indexOf("-")!==-1&&(Q("Negative CSS value ignored for "+w),z=""),z}function se(w,z){n!==z&&z!==""&&z!=="null"&&(document.body.style[w]=z,p("Body "+w+' set to "'+z+'"'))}function be(){n===X&&(X=I+"px"),se("margin",Y("margin",X))}function De(){document.documentElement.style.height="",document.body.style.height="",p('HTML & body height set to "auto"')}function ce(w){var z={add:function(a){function v(){mt(w.eventName,w.eventType)}je[a]=v,ze(window,a,v)},remove:function(a){var v=je[a];delete je[a],Ve(window,a,v)}};w.eventNames&&Array.prototype.map?(w.eventName=w.eventNames[0],w.eventNames.map(z[w.method])):z[w.method](w.eventName),p(Le(w.method)+" event listener: "+w.eventType)}function Ue(w){ce({method:w,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),ce({method:w,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),ce({method:w,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),ce({method:w,eventType:"Input",eventName:"input"}),ce({method:w,eventType:"Mouse Up",eventName:"mouseup"}),ce({method:w,eventType:"Mouse Down",eventName:"mousedown"}),ce({method:w,eventType:"Orientation Change",eventName:"orientationchange"}),ce({method:w,eventType:"Print",eventName:["afterprint","beforeprint"]}),ce({method:w,eventType:"Ready State Change",eventName:"readystatechange"}),ce({method:w,eventType:"Touch Start",eventName:"touchstart"}),ce({method:w,eventType:"Touch End",eventName:"touchend"}),ce({method:w,eventType:"Touch Cancel",eventName:"touchcancel"}),ce({method:w,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),ce({method:w,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),ce({method:w,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),A==="child"&&ce({method:w,eventType:"IFrame Resized",eventName:"resize"})}function g(w,z,a,v){return z!==w&&(w in a||(Q(w+" is not a valid option for "+v+"CalculationMethod."),w=z),p(v+' calculation method set to "'+w+'"')),w}function B(){C=g(C,H,Pe,"height")}function s(){ve=g(ve,me,Be,"width")}function b(){r===!0?(Ue("add"),ue()):p("Auto Resize disabled")}function f(){p("Disable outgoing messages"),R=!1}function T(){p("Remove event listener: Message"),Ve(window,"message",Tt)}function F(){W!==null&&W.disconnect()}function N(){Ue("remove"),F(),clearInterval(ne)}function Te(){f(),T(),r===!0&&N()}function Ne(){var w=document.createElement("div");w.style.clear="both",w.style.display="block",document.body.appendChild(w)}function et(){function w(){return{x:window.pageXOffset!==n?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==n?window.pageYOffset:document.documentElement.scrollTop}}function z(Ce){var Fe=Ce.getBoundingClientRect(),ye=w();return{x:parseInt(Fe.left,10)+parseInt(ye.x,10),y:parseInt(Fe.top,10)+parseInt(ye.y,10)}}function a(Ce){function Fe(ke){var Xe=z(ke);p("Moving to in page link (#"+ye+") at x: "+Xe.x+" y: "+Xe.y),at(Xe.y,Xe.x,"scrollToOffset")}var ye=Ce.split("#")[1]||Ce,fe=decodeURIComponent(ye),Ie=document.getElementById(fe)||document.getElementsByName(fe)[0];n!==Ie?Fe(Ie):(p("In page link (#"+ye+") not found in iFrame, so sending to parent"),at(0,0,"inPageLink","#"+ye))}function v(){location.hash!==""&&location.hash!=="#"&&a(location.href)}function D(){function Ce(Fe){function ye(fe){fe.preventDefault(),a(this.getAttribute("href"))}Fe.getAttribute("href")!=="#"&&ze(Fe,"click",ye)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),Ce)}function ie(){ze(window,"hashchange",v)}function de(){setTimeout(v,m)}function xe(){Array.prototype.forEach&&document.querySelectorAll?(p("Setting up location.hash handlers"),D(),ie(),de()):Q("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}return o.enable?xe():p("In page linking not enabled"),{findTarget:a}}function ft(){p("Enable public methods"),We.parentIFrame={autoResize:function(z){return z===!0&&r===!1?(r=!0,b()):z===!1&&r===!0&&(r=!1,N()),r},close:function(){at(0,0,"close"),Te()},getId:function(){return Ae},getPageInfo:function(z){typeof z=="function"?(Oe=z,at(0,0,"pageInfo")):(Oe=function(){},at(0,0,"pageInfoStop"))},moveToAnchor:function(z){o.findTarget(z)},reset:function(){kt("parentIFrame.reset")},scrollTo:function(z,a){at(a,z,"scrollTo")},scrollToOffset:function(z,a){at(a,z,"scrollToOffset")},sendMessage:function(z,a){at(0,0,"message",JSON.stringify(z),a)},setHeightCalculationMethod:function(z){C=z,B()},setWidthCalculationMethod:function(z){ve=z,s()},setTargetOrigin:function(z){p("Set targetOrigin: "+z),_=z},size:function(z,a){var v=""+(z||"")+(a?","+a:"");mt("size","parentIFrame.size("+v+")",z,a)}}}function Ge(){V!==0&&(p("setInterval: "+V+"ms"),ne=setInterval(function(){mt("interval","setInterval: "+V)},Math.abs(V)))}function qe(){function w(fe){function Ie(ke){ke.complete===!1&&(p("Attach listeners to "+ke.src),ke.addEventListener("load",D,!1),ke.addEventListener("error",ie,!1),Ce.push(ke))}fe.type==="attributes"&&fe.attributeName==="src"?Ie(fe.target):fe.type==="childList"&&Array.prototype.forEach.call(fe.target.querySelectorAll("img"),Ie)}function z(fe){Ce.splice(Ce.indexOf(fe),1)}function a(fe){p("Remove listeners from "+fe.src),fe.removeEventListener("load",D,!1),fe.removeEventListener("error",ie,!1),z(fe)}function v(fe,Ie,ke){a(fe.target),mt(Ie,ke+": "+fe.target.src,n,n)}function D(fe){v(fe,"imageLoad","Image loaded")}function ie(fe){v(fe,"imageLoadFailed","Image load failed")}function de(fe){mt("mutationObserver","mutationObserver: "+fe[0].target+" "+fe[0].type),fe.forEach(w)}function xe(){var fe=document.querySelector("body"),Ie={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return ye=new Fe(de),p("Create body MutationObserver"),ye.observe(fe,Ie),ye}var Ce=[],Fe=window.MutationObserver||window.WebKitMutationObserver,ye=xe();return{disconnect:function(){"disconnect"in ye&&(p("Disconnect body MutationObserver"),ye.disconnect(),Ce.forEach(a))}}}function ue(){var w=0>V;window.MutationObserver||window.WebKitMutationObserver?w?Ge():W=qe():(p("MutationObserver not supported in this browser!"),Ge())}function ee(w,z){function a(D){var ie=/^\d+(px)?$/i;if(ie.test(D))return parseInt(D,d);var de=z.style.left,xe=z.runtimeStyle.left;return z.runtimeStyle.left=z.currentStyle.left,z.style.left=D||0,D=z.style.pixelLeft,z.style.left=de,z.runtimeStyle.left=xe,D}var v=0;return z=z||document.body,"defaultView"in document&&"getComputedStyle"in document.defaultView?(v=document.defaultView.getComputedStyle(z,null),v=v!==null?v[w]:0):v=a(z.currentStyle[w]),parseInt(v,d)}function K(w){w>$/2&&($=2*w,p("Event throttle increased to "+$+"ms"))}function te(w,z){for(var a=z.length,v=0,D=0,ie=Le(w),de=Ke(),xe=0;xe<a;xe++)v=z[xe].getBoundingClientRect()[w]+ee("margin"+ie,z[xe]),v>D&&(D=v);return de=Ke()-de,p("Parsed "+a+" HTML elements"),p("Element position calculated in "+de+"ms"),K(de),D}function le(w){return[w.bodyOffset(),w.bodyScroll(),w.documentElementOffset(),w.documentElementScroll()]}function Se(w,z){function a(){return Q("No tagged elements ("+z+") found on page"),document.querySelectorAll("body *")}var v=document.querySelectorAll("["+z+"]");return v.length===0&&a(),te(w,v)}function we(){return document.querySelectorAll("body *")}var Pe={bodyOffset:function(){return document.body.offsetHeight+ee("marginTop")+ee("marginBottom")},offset:function(){return Pe.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return Me.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,le(Pe))},min:function(){return Math.min.apply(null,le(Pe))},grow:function(){return Pe.max()},lowestElement:function(){return Math.max(Pe.bodyOffset(),te("bottom",we()))},taggedElement:function(){return Se("bottom","data-iframe-height")}},Be={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return Me.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(Be.bodyScroll(),Be.documentElementScroll())},max:function(){return Math.max.apply(null,le(Be))},min:function(){return Math.min.apply(null,le(Be))},rightMostElement:function(){return te("right",we())},taggedElement:function(){return Se("right","data-iframe-width")}};function Je(w,z,a,v){function D(){O=ye,q=fe,at(O,q,w)}function ie(){function Ie(ke,Xe){var st=Math.abs(ke-Xe)<=x;return!st}return ye=n!==a?a:Pe[C](),fe=n!==v?v:Be[ve](),Ie(O,ye)||y&&Ie(q,fe)}function de(){return!(w in{init:1,interval:1,size:1})}function xe(){return C in re||y&&ve in re}function Ce(){p("No change in size detected")}function Fe(){de()&&xe()?kt(z):w in{interval:1}||Ce()}var ye,fe;ie()||w==="init"?(Ot(),D()):Fe()}var lt=Ze(Je);function mt(w,z,a,v){function D(){w in{reset:1,resetPage:1,init:1}||p("Trigger event: "+z)}function ie(){return U&&w in k}ie()?p("Trigger event cancelled: "+w):(D(),lt(w,z,a,v))}function Ot(){U||(U=!0,p("Trigger event lock on")),clearTimeout(J),J=setTimeout(function(){U=!1,p("Trigger event lock off"),p("--")},m)}function ht(w){O=Pe[C](),q=Be[ve](),at(O,q,w)}function kt(w){var z=C;C=H,p("Reset trigger event: "+w),Ot(),ht("reset"),C=z}function at(w,z,a,v,D){function ie(){n===D?D=_:p("Message targetOrigin: "+D)}function de(){var xe=w+":"+z,Ce=Ae+":"+xe+":"+a+(n!==v?":"+v:"");p("Sending message to host page ("+Ce+")"),h.postMessage(_e+Ce,D)}R===!0&&(ie(),de())}function Tt(w){var z={init:function(){function ye(){L=w.data,h=w.source,c(),M=!1,setTimeout(function(){t=!1},m)}document.readyState==="interactive"||document.readyState==="complete"?ye():(p("Waiting for page ready"),ze(window,"readystatechange",z.initFromParent))},reset:function(){t?p("Page reset ignored by init"):(p("Page size reset by host page"),ht("resetPage"))},resize:function(){mt("resizeParent","Parent window requested size check")},moveToAnchor:function(){o.findTarget(D())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var ye=D();p("PageInfoFromParent called from parent: "+ye),Oe(JSON.parse(ye)),p(" --")},message:function(){var ye=D();p("MessageCallback called from parent: "+ye),pe(JSON.parse(ye)),p(" --")}};function a(){return _e===(""+w.data).substr(0,ge)}function v(){return w.data.split("]")[1].split(":")[0]}function D(){return w.data.substr(w.data.indexOf(":")+1)}function ie(){return!i.exports&&"iFrameResize"in window}function de(){return w.data.split(":")[2]in{true:1,false:1}}function xe(){var Fe=v();Fe in z?z[Fe]():!ie()&&!de()&&Q("Unexpected message ("+w.data+")")}function Ce(){M===!1?xe():de()?z.init():p('Ignored message of type "'+v()+'". Received before initialization.')}a()&&Ce()}function ct(){document.readyState!=="loading"&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}ze(window,"message",Tt),ct()})()},28:(i,n)=>{var r,d,S;(function(I){if(typeof window>"u")return;var X=0,W=!1,j=!1,y="message",k=y.length,m="[iFrameSizer]",M=m.length,O=null,H=window.requestAnimationFrame,C={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},t={},L=null,o={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){R("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}};function V(p,Q,c){"addEventListener"in window?p.addEventListener(Q,c,!1):"attachEvent"in window&&p.attachEvent("on"+Q,c)}function ne(p,Q,c){"removeEventListener"in window?p.removeEventListener(Q,c,!1):"detachEvent"in window&&p.detachEvent("on"+Q,c)}function G(){var p=["moz","webkit","o","ms"],Q;for(Q=0;Q<p.length&&!H;Q+=1)H=window[p[Q]+"RequestAnimationFrame"];H||re("setup","RequestAnimationFrame not supported")}function _e(p){var Q="Host page: "+p;return window.top!==window.self&&(window.parentIFrame&&window.parentIFrame.getId?Q=window.parentIFrame.getId()+": "+p:Q="Nested host page: "+p),Q}function ge(p){return m+"["+_e(p)+"]"}function Ae(p){return t[p]?t[p].log:W}function re(p,Q){h("log",p,Q,Ae(p))}function A(p,Q){h("info",p,Q,Ae(p))}function R(p,Q){h("warn",p,Q,!0)}function h(p,Q,c,P){P===!0&&typeof window.console=="object"&&console[p](ge(Q),c)}function _(p){function Q(){function ee(){ve(qe),$(ue),N("resizedCallback",qe)}P("Height"),P("Width"),We(ee,qe,"init")}function c(){var ee=Ge.substr(M).split(":");return{iframe:t[ee[0]]&&t[ee[0]].iframe,id:ee[0],height:ee[1],width:ee[2],type:ee[3]}}function P(ee){var K=Number(t[ue]["max"+ee]),te=Number(t[ue]["min"+ee]),le=ee.toLowerCase(),Se=Number(qe[le]);re(ue,"Checking "+le+" is in range "+te+"-"+K),Se<te&&(Se=te,re(ue,"Set "+le+" to min value")),Se>K&&(Se=K,re(ue,"Set "+le+" to max value")),qe[le]=""+Se}function Z(){function ee(){function le(){var we=0,Pe=!1;for(re(ue,"Checking connection is from allowed list of origins: "+te);we<te.length;we++)if(te[we]===K){Pe=!0;break}return Pe}function Se(){var we=t[ue]&&t[ue].remoteHost;return re(ue,"Checking connection is from: "+we),K===we}return te.constructor===Array?le():Se()}var K=p.origin,te=t[ue]&&t[ue].checkOrigin;if(te&&""+K!="null"&&!ee())throw new Error("Unexpected message received from: "+K+" for "+qe.iframe.id+". Message was: "+p.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function Y(){return m===(""+Ge).substr(0,M)&&Ge.substr(M).split(":")[0]in t}function se(){var ee=qe.type in{true:1,false:1,undefined:1};return ee&&re(ue,"Ignoring init message from meta parent page"),ee}function be(ee){return Ge.substr(Ge.indexOf(":")+k+ee)}function De(ee){re(ue,"MessageCallback passed: {iframe: "+qe.iframe.id+", message: "+ee+"}"),N("messageCallback",{iframe:qe.iframe,message:JSON.parse(ee)}),re(ue,"--")}function ce(){var ee=document.body.getBoundingClientRect(),K=qe.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:K.height,iframeWidth:K.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(K.top-ee.top,10),offsetLeft:parseInt(K.left-ee.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset})}function Ue(ee,K){function te(){pe("Send Page Info","pageInfo:"+ce(),ee,K)}Me(te,32)}function g(){function ee(Se,we){function Pe(){t[le]?Ue(t[le].iframe,le):K()}["scroll","resize"].forEach(function(Be){re(le,Se+Be+" listener for sendPageInfo"),we(window,Be,Pe)})}function K(){ee("Remove ",ne)}function te(){ee("Add ",V)}var le=ue;te(),t[le]&&(t[le].stopPageInfo=K)}function B(){t[ue]&&t[ue].stopPageInfo&&(t[ue].stopPageInfo(),delete t[ue].stopPageInfo)}function s(){var ee=!0;return qe.iframe===null&&(R(ue,"IFrame ("+qe.id+") not found"),ee=!1),ee}function b(ee){var K=ee.getBoundingClientRect();return J(ue),{x:Math.floor(Number(K.left)+Number(O.x)),y:Math.floor(Number(K.top)+Number(O.y))}}function f(ee){function K(){O=we,T(),re(ue,"--")}function te(){return{x:Number(qe.width)+Se.x,y:Number(qe.height)+Se.y}}function le(){window.parentIFrame?window.parentIFrame["scrollTo"+(ee?"Offset":"")](we.x,we.y):R(ue,"Unable to scroll to requested position, window.parentIFrame not found")}var Se=ee?b(qe.iframe):{x:0,y:0},we=te();re(ue,"Reposition requested from iFrame (offset x:"+Se.x+" y:"+Se.y+")"),window.top!==window.self?le():K()}function T(){N("scrollCallback",O)!==!1?$(ue):q()}function F(ee){function K(){var Pe=b(we);re(ue,"Moving to in page link (#"+le+") at x: "+Pe.x+" y: "+Pe.y),O={x:Pe.x,y:Pe.y},T(),re(ue,"--")}function te(){window.parentIFrame?window.parentIFrame.moveToAnchor(le):re(ue,"In page link #"+le+" not found and window.parentIFrame not found")}var le=ee.split("#")[1]||"",Se=decodeURIComponent(le),we=document.getElementById(Se)||document.getElementsByName(Se)[0];we?K():window.top!==window.self?te():re(ue,"In page link #"+le+" not found")}function N(ee,K){return x(ue,ee,K)}function Te(){switch(t[ue]&&t[ue].firstRun&&ft(),qe.type){case"close":t[ue].closeRequestCallback?x(ue,"closeRequestCallback",t[ue].iframe):U(qe.iframe);break;case"message":De(be(6));break;case"scrollTo":f(!1);break;case"scrollToOffset":f(!0);break;case"pageInfo":Ue(t[ue]&&t[ue].iframe,ue),g();break;case"pageInfoStop":B();break;case"inPageLink":F(be(9));break;case"reset":me(qe);break;case"init":Q(),N("initCallback",qe.iframe);break;default:Q()}}function Ne(ee){var K=!0;return t[ee]||(K=!1,R(qe.type+" No settings for "+ee+". Message was: "+Ge)),K}function et(){for(var ee in t)pe("iFrame requested init",Ee(ee),document.getElementById(ee),ee)}function ft(){t[ue]&&(t[ue].firstRun=!1)}var Ge=p.data,qe={},ue=null;Ge==="[iFrameResizerChild]Ready"?et():Y()?(qe=c(),ue=qe.id,t[ue]&&(t[ue].loaded=!0),!se()&&Ne(ue)&&(re(ue,"Received: "+Ge),s()&&Z()&&Te())):A(ue,"Ignored: "+Ge)}function x(p,Q,c){var P=null,Z=null;if(t[p])if(P=t[p][Q],typeof P=="function")Z=P(c);else throw new TypeError(Q+" on iFrame["+p+"] is not a function");return Z}function U(p){var Q=p.id;re(Q,"Removing iFrame: "+Q),p.parentNode&&p.parentNode.removeChild(p),x(Q,"closedCallback",Q),re(Q,"--"),delete t[Q]}function J(p){O===null&&(O={x:window.pageXOffset!==I?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==I?window.pageYOffset:document.documentElement.scrollTop},re(p,"Get page position: "+O.x+","+O.y))}function $(p){O!==null&&(window.scrollTo(O.x,O.y),re(p,"Set page position: "+O.x+","+O.y),q())}function q(){O=null}function me(p){function Q(){ve(p),pe("reset","reset",p.iframe,p.id)}re(p.id,"Size reset requested by "+(p.type==="init"?"host page":"iFrame")),J(p.id),We(Q,p,"reset")}function ve(p){function Q(Y){p.iframe.style[Y]=p[Y]+"px",re(p.id,"IFrame ("+Z+") "+Y+" set to "+p[Y]+"px")}function c(Y){!j&&p[Y]==="0"&&(j=!0,re(Z,"Hidden iFrame detected, creating visibility listener"),je())}function P(Y){Q(Y),c(Y)}var Z=p.iframe.id;t[Z]&&(t[Z].sizeHeight&&P("height"),t[Z].sizeWidth&&P("width"))}function We(p,Q,c){c!==Q.type&&H?(re(Q.id,"Requesting animation frame"),H(p)):p()}function pe(p,Q,c,P,Z){function Y(){var Ue=t[P]&&t[P].targetOrigin;re(P,"["+p+"] Sending msg to iframe["+P+"] ("+Q+") targetOrigin: "+Ue),c.contentWindow.postMessage(m+Q,Ue)}function se(){R(P,"["+p+"] IFrame("+P+") not found")}function be(){c&&"contentWindow"in c&&c.contentWindow!==null?Y():se()}function De(){function Ue(){t[P]&&!t[P].loaded&&!ce&&(ce=!0,R(P,"IFrame has not responded within "+t[P].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ingored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}Z&&t[P]&&t[P].warningTimeout&&(t[P].msgTimeout=setTimeout(Ue,t[P].warningTimeout))}var ce=!1;P=P||c.id,t[P]&&(be(),De())}function Ee(p){return p+":"+t[p].bodyMarginV1+":"+t[p].sizeWidth+":"+t[p].log+":"+t[p].interval+":"+t[p].enablePublicMethods+":"+t[p].autoResize+":"+t[p].bodyMargin+":"+t[p].heightCalculationMethod+":"+t[p].bodyBackground+":"+t[p].bodyPadding+":"+t[p].tolerance+":"+t[p].inPageLinks+":"+t[p].resizeFrom+":"+t[p].widthCalculationMethod}function Oe(p,Q){function c(){function T(N){t[f][N]!==1/0&&t[f][N]!==0&&(p.style[N]=t[f][N]+"px",re(f,"Set "+N+" = "+t[f][N]+"px"))}function F(N){if(t[f]["min"+N]>t[f]["max"+N])throw new Error("Value for min"+N+" can not be greater than max"+N)}F("Height"),F("Width"),T("maxHeight"),T("minHeight"),T("maxWidth"),T("minWidth")}function P(){var T=Q&&Q.id||o.id+X++;return document.getElementById(T)!==null&&(T=T+X++),T}function Z(T){return T===""&&(p.id=T=P(),W=(Q||{}).log,re(T,"Added missing iframe ID: "+T+" ("+p.src+")")),T}function Y(){switch(re(f,"IFrame scrolling "+(t[f]&&t[f].scrolling?"enabled":"disabled")+" for "+f),p.style.overflow=(t[f]&&t[f].scrolling)===!1?"hidden":"auto",t[f]&&t[f].scrolling){case!0:p.scrolling="yes";break;case!1:p.scrolling="no";break;default:p.scrolling=t[f]?t[f].scrolling:"no"}}function se(){(typeof(t[f]&&t[f].bodyMargin)=="number"||(t[f]&&t[f].bodyMargin)==="0")&&(t[f].bodyMarginV1=t[f].bodyMargin,t[f].bodyMargin=""+t[f].bodyMargin+"px")}function be(){var T=t[f]&&t[f].firstRun,F=t[f]&&t[f].heightCalculationMethod in C;!T&&F&&me({iframe:p,height:0,width:0,type:"init"})}function De(){Function.prototype.bind&&t[f]&&(t[f].iframe.iFrameResizer={close:U.bind(null,t[f].iframe),resize:pe.bind(null,"Window resize","resize",t[f].iframe),moveToAnchor:function(T){pe("Move to anchor","moveToAnchor:"+T,t[f].iframe,f)},sendMessage:function(T){T=JSON.stringify(T),pe("Send Message","message:"+T,t[f].iframe,f)}})}function ce(T){function F(){pe("iFrame.onload",T,p,I,!0),be()}V(p,"load",F),pe("init",T,p,I,!0)}function Ue(T){if(typeof T!="object")throw new TypeError("Options is not an object")}function g(T){for(var F in o)o.hasOwnProperty(F)&&(t[f][F]=T.hasOwnProperty(F)?T[F]:o[F])}function B(T){return T===""||T==="file://"?"*":T}function s(T){T=T||{},t[f]={firstRun:!0,iframe:p,remoteHost:p.src.split("/").slice(0,3).join("/")},Ue(T),g(T),t[f]&&(t[f].targetOrigin=t[f].checkOrigin===!0?B(t[f].remoteHost):"*")}function b(){return f in t&&"iFrameResizer"in p}var f=Z(p.id);b()?R(f,"Ignored iFrame, already setup."):(s(Q),Y(),c(),se(),ce(Ee(f)),De())}function Me(p,Q){L===null&&(L=setTimeout(function(){L=null,p()},Q))}function je(){function p(){function Z(se){function be(ce){return(t[se]&&t[se].iframe.style[ce])==="0px"}function De(ce){return ce.offsetParent!==null}t[se]&&De(t[se].iframe)&&(be("height")||be("width"))&&pe("Visibility change","resize",t[se].iframe,se)}for(var Y in t)Z(Y)}function Q(Z){re("window","Mutation observed: "+Z[0].target+" "+Z[0].type),Me(p,16)}function c(){var Z=document.querySelector("body"),Y={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},se=new P(Q);se.observe(Z,Y)}var P=window.MutationObserver||window.WebKitMutationObserver;P&&c()}function ze(p){function Q(){Le("Window "+p,"resize")}re("window","Trigger event: "+p),Me(Q,16)}function Ve(){function p(){Le("Tab Visable","resize")}document.visibilityState!=="hidden"&&(re("document","Trigger event: Visiblity change"),Me(p,16))}function Le(p,Q){function c(Z){return t[Z]&&t[Z].resizeFrom==="parent"&&t[Z].autoResize&&!t[Z].firstRun}for(var P in t)c(P)&&pe(p,Q,document.getElementById(P),P)}function Ze(){V(window,"message",_),V(window,"resize",function(){ze("resize")}),V(document,"visibilitychange",Ve),V(document,"-webkit-visibilitychange",Ve),V(window,"focusin",function(){ze("focus")}),V(window,"focus",function(){ze("focus")})}function Ke(){function p(P,Z){function Y(){if(Z.tagName){if(Z.tagName.toUpperCase()!=="IFRAME")throw new TypeError("Expected <IFRAME> tag, found <"+Z.tagName+">")}else throw new TypeError("Object is not a valid DOM element")}Z&&(Y(),Oe(Z,P),c.push(Z))}function Q(P){P&&P.enablePublicMethods&&R("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}var c;return G(),Ze(),function(Z,Y){switch(c=[],Q(Z),typeof Y){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(Y||"iframe"),p.bind(I,Z));break;case"object":p(Z,Y);break;default:throw new TypeError("Unexpected data type ("+typeof Y+")")}return c}}function rt(p){p.fn?p.fn.iFrameResize||(p.fn.iFrameResize=function(c){function P(Z,Y){Oe(Y,c)}return this.filter("iframe").each(P).end()}):A("","Unable to bind to jQuery, it is not fully loaded.")}window.jQuery&&rt(window.jQuery),d=[],r=Ke,S=typeof r=="function"?r.apply(n,d):r,S!==I&&(i.exports=S)})()},683:(i,n,r)=>{n.iframeResizer=r(28),n.iframeResizerContentWindow=r(402)},457:i=>{var n=function(){var r=Math.floor(Math.random()*1000001),d={};function S(y,k,m,M){function O(t){for(var L=0;L<t.length;L++)if(t[L].win===y)return!0;return!1}var H=!1;if(k==="*"){for(var C in d)if(d.hasOwnProperty(C)&&C!=="*"&&typeof d[C][m]=="object"&&(H=O(d[C][m]),H))break}else d["*"]&&d["*"][m]&&(H=O(d["*"][m])),!H&&d[k]&&d[k][m]&&(H=O(d[k][m]));if(H)throw"A channel is already bound to the same window which overlaps with origin '"+k+"' and has scope '"+m+"'";typeof d[k]!="object"&&(d[k]={}),typeof d[k][m]!="object"&&(d[k][m]=[]),d[k][m].push({win:y,handler:M})}function I(y,k,m){for(var M=d[k][m],O=0;O<M.length;O++)M[O].win===y&&M.splice(O,1);d[k][m].length===0&&delete d[k][m]}function X(y){return Array.isArray?Array.isArray(y):y.constructor.toString().indexOf("Array")!=-1}var W={},j=function(y){try{var k=JSON.parse(y.data);if(typeof k!="object"||k===null)throw"malformed"}catch{return}var m=y.source,M=y.origin,O,H,C;if(typeof k.method=="string"){var t=k.method.split("::");t.length==2?(O=t[0],C=t[1]):C=k.method}if(typeof k.id<"u"&&(H=k.id),typeof C=="string"){var L=!1;if(d[M]&&d[M][O]){for(var o=0;o<d[M][O].length;o++)if(d[M][O][o].win===m){d[M][O][o].handler(M,C,k),L=!0;break}}if(!L&&d["*"]&&d["*"][O]){for(var o=0;o<d["*"][O].length;o++)if(d["*"][O][o].win===m){d["*"][O][o].handler(M,C,k);break}}}else typeof H<"u"&&W[H]&&W[H](M,C,k)};return window.addEventListener?window.addEventListener("message",j,!1):window.attachEvent&&window.attachEvent("onmessage",j),{build:function(y){var k=function(A){if(y.debugOutput&&window.console&&window.console.log){try{typeof A!="string"&&(A=JSON.stringify(A))}catch{}console.log("["+O+"] "+A)}};if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if(typeof y!="object")throw"Channel build invoked without a proper object argument";if(!y.window||!y.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===y.window)throw"target window is same as present window -- not allowed";var m=!1;if(typeof y.origin=="string"){var M;y.origin==="*"?m=!0:(M=y.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))!==null&&(y.origin=M[0].toLowerCase(),m=!0)}if(!m)throw"Channel.build() called with an invalid origin";if(typeof y.scope<"u"){if(typeof y.scope!="string")throw"scope, when specified, must be a string";if(y.scope.split("::").length>1)throw"scope may not contain double colons: '::'"}var O=function(){for(var A="",R="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",h=0;h<5;h++)A+=R.charAt(Math.floor(Math.random()*R.length));return A}(),H={},C={},t={},L=!1,o=[],V=function(A,R,h){var _=!1,x=!1;return{origin:R,invoke:function(U,J){if(!t[A])throw"attempting to invoke a callback of a nonexistent transaction: "+A;for(var $=!1,q=0;q<h.length;q++)if(U===h[q]){$=!0;break}if(!$)throw"request supports no such callback '"+U+"'";ge({id:A,callback:U,params:J})},error:function(U,J){if(x=!0,!t[A])throw"error called for nonexistent message: "+A;delete t[A],ge({id:A,error:U,message:J})},complete:function(U){if(x=!0,!t[A])throw"complete called for nonexistent message: "+A;delete t[A],ge({id:A,result:U})},delayReturn:function(U){return typeof U=="boolean"&&(_=U===!0),_},completed:function(){return x}}},ne=function(A,R,h){return window.setTimeout(function(){if(C[A]){var _="timeout ("+R+"ms) exceeded on method '"+h+"'";(0,C[A].error)("timeout_error",_),delete C[A],delete W[A]}},R)},G=function(A,R,h){if(typeof y.gotMessageObserver=="function")try{y.gotMessageObserver(A,h)}catch(Ee){k("gotMessageObserver() raised an exception: "+Ee.toString())}if(h.id&&R){if(H[R]){var _=V(h.id,A,h.callbacks?h.callbacks:[]);t[h.id]={};try{if(h.callbacks&&X(h.callbacks)&&h.callbacks.length>0)for(var x=0;x<h.callbacks.length;x++){for(var U=h.callbacks[x],J=h.params,$=U.split("/"),q=0;q<$.length-1;q++){var me=$[q];typeof J[me]!="object"&&(J[me]={}),J=J[me]}J[$[$.length-1]]=function(){var Ee=U;return function(Oe){return _.invoke(Ee,Oe)}}()}var ve=H[R](_,h.params);!_.delayReturn()&&!_.completed()&&_.complete(ve)}catch(Ee){var We="runtime_error",pe=null;if(typeof Ee=="string"?pe=Ee:typeof Ee=="object"&&(Ee&&X(Ee)&&Ee.length==2?(We=Ee[0],pe=Ee[1]):typeof Ee.error=="string"&&(We=Ee.error,Ee.message?typeof Ee.message=="string"?pe=Ee.message:Ee=Ee.message:pe="")),pe===null)try{pe=JSON.stringify(Ee),typeof pe>"u"&&(pe=Ee.toString())}catch{pe=Ee.toString()}_.error(We,pe)}}}else h.id&&h.callback?!C[h.id]||!C[h.id].callbacks||!C[h.id].callbacks[h.callback]?k("ignoring invalid callback, id:"+h.id+" ("+h.callback+")"):C[h.id].callbacks[h.callback](h.params):h.id?C[h.id]?(h.error?(0,C[h.id].error)(h.error,h.message):h.result!==void 0?(0,C[h.id].success)(h.result):(0,C[h.id].success)(),delete C[h.id],delete W[h.id]):k("ignoring invalid response: "+h.id):R&&H[R]&&H[R]({origin:A},h.params)};S(y.window,y.origin,typeof y.scope=="string"?y.scope:"",G);var _e=function(A){return typeof y.scope=="string"&&y.scope.length&&(A=[y.scope,A].join("::")),A},ge=function(A,R){if(!A)throw"postMessage called with null message";var h=L?"post  ":"queue ";if(k(h+" message: "+JSON.stringify(A)),!R&&!L)o.push(A);else{if(typeof y.postMessageObserver=="function")try{y.postMessageObserver(y.origin,A)}catch(_){k("postMessageObserver() raised an exception: "+_.toString())}y.window.postMessage(JSON.stringify(A),y.origin)}},Ae=function(A,R){if(k("ready msg received"),L)throw"received ready message while in ready state.  help!";for(R==="ping"?O+="-R":O+="-L",re.unbind("__ready"),L=!0,k("ready msg accepted."),R==="ping"&&re.notify({method:"__ready",params:"pong"});o.length;)ge(o.pop());typeof y.onReady=="function"&&y.onReady(re)},re={unbind:function(A){if(H[A]){if(!delete H[A])throw"can't delete method: "+A;return!0}return!1},bind:function(A,R){if(!A||typeof A!="string")throw"'method' argument to bind must be string";if(!R||typeof R!="function")throw"callback missing from bind params";if(H[A])throw"method '"+A+"' is already bound!";return H[A]=R,this},call:function(A){if(!A)throw"missing arguments to call function";if(!A.method||typeof A.method!="string")throw"'method' argument to call must be string";if(!A.success||typeof A.success!="function")throw"'success' callback missing from call";var R={},h=[],_=[],x=function(J,$){if(_.indexOf($)>=0)throw"params cannot be a recursive data structure";if(_.push($),typeof $=="object"){for(var q in $)if($.hasOwnProperty(q)){var me=J+(J.length?"/":"")+q;typeof $[q]=="function"?(R[me]=$[q],h.push(me),delete $[q]):typeof $[q]=="object"&&$[q]!==null&&x(me,$[q])}}};x("",A.params);var U={id:r,method:_e(A.method),params:A.params};h.length&&(U.callbacks=h),A.timeout&&ne(r,A.timeout,_e(A.method)),C[r]={callbacks:R,error:A.error,success:A.success},W[r]=G,r++,ge(U)},notify:function(A){if(!A)throw"missing arguments to notify function";if(!A.method||typeof A.method!="string")throw"'method' argument to notify must be string";ge({method:_e(A.method),params:A.params})},destroy:function(){I(y.window,y.origin,typeof y.scope=="string"?y.scope:""),window.removeEventListener?window.removeEventListener("message",G,!1):window.detachEvent&&window.detachEvent("onmessage",G),L=!1,H={},t={},C={},y.origin=null,o=[],k("channel destroyed"),O=""}};return re.bind("__ready",Ae),setTimeout(function(){ge({method:_e("__ready"),params:"ping"},!0)},0),re}}}();i.exports=n},218:i=>{function n(r){var d=typeof r;return r!=null&&(d=="object"||d=="function")}i.exports=n}},e={};function u(i){var n=e[i];if(n!==void 0)return n.exports;var r=e[i]={exports:{}};return l[i].call(r.exports,r,r.exports,u),r.exports}u.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),u(669)})();var cn=Jt.Addon;const Ft="2017-01-01",Xt="https://app.wealthica.com",dn=Xt+"/img",Lt=dn+"/arrow_down.f6ca09b2.svg",fn=Xt+"/images/institutions",hn="https://data.wealthica.com/api",mn=hn+"/streams",gn="https://data.wealthica.com/api/securities",Nt="https://portfoliotech.github.io/investify/static/img",Dt=Nt+"/default_company_logo.png",pn=Nt+"/cash.png";function it(l){return`${Nt}/${l}`}class vn{constructor(){this.addon=new cn,this.addon.on("init",e=>{this.addon.options={...e,fromDate:Ft,toDate:this.today(),dateRangeFilter:[Ft,this.today()],datePeriod:"all"}})}today(){return new Date().toISOString().split("T")[0]}options_query(){return{from:this.addon.options.fromDate,to:this.addon.options.toDate,groups:this.addon.options.groupsFilter,institutions:this.addon.options.institutionsFilter,investments:this.addon.options.investmentsFilter}}fetch_user(){try{return this.addon.api.getUser()}catch(e){throw e}}fetch_currencies(){try{return this.addon.request({method:"GET",endpoint:"currencies"})}catch(e){throw e}}fetch_currency_history(e,u){try{return this.addon.request({method:"GET",endpoint:`currencies/${u}/history`,query:{from:Ft,to:this.today(),base:e}})}catch(i){throw i}}fetch_institutions(){try{return this.addon.api.getInstitutions(this.options_query())}catch(e){throw e}}fetch_positions(){try{return this.addon.api.getPositions(this.options_query())}catch(e){throw e}}fetch_transactions(){try{const e=new Date("2000-01-01").toISOString().split("T")[0],u=new Date().toISOString().split("T")[0],i={from:e,to:u,deleted:!1};return this.addon.api.getTransactions(i).then(n=>n.map(r=>{var y,k,m;const d={symbol:(y=r.security)==null?void 0:y.symbol,market:(k=r.security)==null?void 0:k.currency.substring(0,2).toUpperCase()},S=((m=r.investment)==null?void 0:m.split(":")[2])||"",I=new Date(r.settlement_date),X=I.getUTCFullYear(),W=I.getUTCMonth()+1,j=`${X}-${("0"+W).slice(-2)}`;return{...r,subaccount_id:r.investment,symbolMX:`${d.market}:${d.symbol}`,symbol:d.symbol,market:d.market,currency:S,settlement_dt:I,year:X,month:W,year_month:j,amount:r.currency_amount,price:Math.abs(r.currency_amount/r.quantity),total:r.currency_amount-(r.fee||0)}}))}catch(e){throw e}}fetch_stock_prices(e,u){return fetch(mn,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e,symbols:u})}).then(n=>n.json()).then(n=>({...n,securities:n.securities.map(r=>({...r,symbolMX:`${r.market}:${r.symbol.split(":")[1]}`}))})).catch(n=>{throw n})}fetch_stock_price_history(e){try{return this.addon.request({method:"GET",endpoint:`securities/${e}/history`,query:this.options_query()})}catch(u){throw u}}async delete_transaction(e){const u={deleted:!0};return await this.addon.api.updateTransaction(e,u)}async update_transaction(e,u){return await this.addon.api.updateTransaction(e,u)}}const pt=rn(),St=[{name:"INVESTOR - CELI",account_number:"22981483",order:1,type:null,no_holdings:!1,exluded:!1},{name:"INVESTOR - RESP",account_number:"21921430",order:2,type:null,no_holdings:!1,exluded:!1},{name:"NESBITT - NON-ENRG",account_number:"31015145",order:3,type:null,no_holdings:!1,exluded:!0},{name:"NESBITT - BELSKI",account_number:"31107566",order:4,type:null,no_holdings:!1,exluded:pt},{name:"NESBITT - FONDS",account_number:"31107567",order:5,type:null,no_holdings:!1,exluded:pt},{name:"NESBITT - ACTIONS (REER)",account_number:"31107798",order:6,type:null,no_holdings:!1,exluded:pt},{name:"NESBITT - ACTIONS (CELI)",account_number:"78124230",order:7,type:null,no_holdings:!1,exluded:pt},{name:"CGI - ACTIONS (REER)",account_number:"197287703264",order:8,type:null,no_holdings:!0,exluded:pt},{name:"CGI - ACTIONS (NON-ENRG)",account_number:"197287499339",order:8,type:"NRG",no_holdings:!0,exluded:pt},{name:"FTQ - REER",account_number:"107935800-01R",order:9,type:"RRSP",no_holdings:!0,exluded:pt},{name:"BMO - INVEST",account_number:"XXXX6679",order:10,type:"CASH",no_holdings:!0,exluded:pt}];function yn(l,e){const u=St.find(i=>i.account_number===l);return u?u.type||e.toUpperCase():""}function _n(l){var e=St.find(u=>u.account_number===l);return e?e.exluded:!0}function bn(l){var e=St.find(u=>u.account_number===l);return e?e.order:999}function wn(l){var e=St.find(u=>u.account_number===l);return e?e.no_holdings:!1}function kn(l={}){var e;return{id:{subaccount_id:l.investment,symbolMX:l.symbolMX,symbol:l.symbol,market:l.market,name:(e=l.security)==null?void 0:e.name,currency:l.currency,date:l.settlement_dt,lot:l.quantity,quantity:l.quantity,active:!1},data:{cost:{date:void 0,price:0,value:0},close:{date:void 0,price:0,value:0,price_CAD:0,value_CAD:0},market:{date:void 0,price:0,value:0,price_CAD:0,value_CAD:0},return:{dividend:0,interest:0,fees:0,taxes:0,total:0,gain:{realized:0,unrealized:{daily:{change:0,percent:0,amount:0},overall:{change:0,percent:0,amount:0}}}}},transactions:[],security:l.security}}function Tn(){return{total:Yt(),activities:{all:bt(),year:bt(),month:bt()},subaccounts:{}}}function En(l){return{currency:l,total:Yt(),activities:{all:bt(),year:bt(),month:bt()},transactions:[],holdings:[]}}function Yt(){return{balance:0,cash:0,holdings:0,cost:0,cost_active:0,unrealized_gain_value:0,unrealized_gain_percent:0}}function bt(){return{deposit:0,withdrawal:0,transfer:0,buy:0,sell:0,dividend:0,interest:0,income:0,fees:0,taxes:0,cash:0,total:0}}function At(l){return{year:l.getUTCFullYear(),month:l.getUTCMonth()+1}}function On(l,e){return l.reduce((u,i)=>u+Mn(i,e),0)}function Mn(l,e){return e.split(".").reduce((u,i)=>u[i],l)}function jt(...l){return l.reduce((e,u)=>e+u,0)}function zt(l,e,u){const i=n=>n&&typeof n=="object";return Object.keys(l).forEach(n=>{l[n]=i(l[n])&&i(e[n])?zt(l[n],e[n],u):l[n]+=e[n]*u}),l}function xn(l,e){return Math.abs(l)>e}function Sn(l,e){return Math.abs(l)<e}function $t(l,e){const u=new Date(l);return u.setDate(u.getDate()+e),u}class Cn{constructor(){vt(this,"initialized",!1);vt(this,"user",null);vt(this,"currencies",null);vt(this,"accounts",null);vt(this,"transactions",null);vt(this,"stock_prices",null);this.wealthica=new vn}async initialize(){this.initialized||([this.user,this.currencies]=await Promise.all([this.load_user(),this.load_currencies()]),[this.accounts,this.transactions]=await Promise.all([this.load_accounts(),this.load_transactions()]),this.stock_prices=await this.load_stock_prices()),this.initialized=!0}load_user(){return this.wealthica.fetch_user()}load_currencies(){return this.wealthica.fetch_currencies().then(e=>{const u=e.find(({preferred:i})=>i);return Promise.all(e.filter(({_id:i})=>i!==u._id).map(i=>this.wealthica.fetch_currency_history(u._id,i._id).then(n=>{i.history=n.data.map((r,d)=>({date:$t(n.from,d),rate:r}))}))).then(()=>e)})}load_accounts(){return this.wealthica.fetch_institutions().then(e=>e.flatMap(u=>Array.from(u.investments.reduce((i,n)=>{let r=(n.account_number??n.id).toUpperCase();if(!n.ignored&&!_n(r)){let d=i.get(r)??{institution:{name:u.name,type:u.type},number:r,name:n.name,type:yn(r,n.type),order:bn(r),no_holdings:wn(r),subaccounts:[]};d.subaccounts.push({id:n._id,name:n.name,currency:n.currency,no_holdings:d.no_holdings}),i.set(r,d)}return i},new Map).values())).sort((u,i)=>u.order-i.order))}load_transactions(){return this.wealthica.fetch_transactions().then(e=>{const u={};return e.sort((i,n)=>i.settlement_dt-n.settlement_dt).map((i,n)=>(u[i.subaccount_id]=(u[i.subaccount_id]||0)+i.total,{...i,balance:u[i.subaccount_id],index:n})).sort((i,n)=>n.settlement_dt-i.settlement_dt||n.index-i.index)})}load_stock_prices(){const e=this.transactions.filter(u=>{var i;return(i=u.security)==null?void 0:i.symbol}).reduce((u,{symbolMX:i,security:n})=>(u[i]??(u[i]=n==null?void 0:n.id),u),{});return this.wealthica.fetch_stock_prices(this.user.email,Object.keys(e)).then(u=>{const i={};return Promise.all(u.securities.map(n=>this.wealthica.fetch_stock_price_history(e[n.symbolMX]).then(r=>{const d=r.data.map((S,I)=>({date:$t(r.from,I),price:S}));i[n.symbolMX]={date:n.quote_date,price:n.price,currency:n.currency,history:d}}))).then(()=>i)})}get_currency(e,u=null){var r;const i=this.currencies.find(({_id:d})=>d===e),n=u&&((r=i.history)==null?void 0:r.filter(d=>d.date<=u).sort((d,S)=>S.date-d.date)[0])||null;return{id:i._id,date:u?(n==null?void 0:n.date)||u:i.update_date,rate:u?(n==null?void 0:n.rate)||1:i.rate}}get_xrate(e,u,i){var n,r;return(((n=this.get_currency(u,i))==null?void 0:n.rate)??1)/(((r=this.get_currency(e,i))==null?void 0:r.rate)??1)}get_quote(e,u=null){const i=this.stock_prices[e],n=u&&i.history.filter(r=>r.date<=u).sort((r,d)=>d.date-r.date)[0]||null;return{currency:i.currency,date:u?(n==null?void 0:n.date)||null:i.date,value:u?(n==null?void 0:n.price)||null:i.price}}get_accounts(){return this.accounts}get_transactions(e=null,u=null){return this.transactions.filter(i=>(!e||i.subaccount_id==e)&&(!u||i.settlement_dt<=u))}get_holdings(e=null,u=null){let i=this.get_transactions(e,u).filter(n=>{var r;return(r=n.security)==null?void 0:r.symbol}).sort((n,r)=>n.settlement_dt-r.settlement_dt||n.index-r.index).reduce((n,r)=>(this.find_or_initialize_holdings(n,r).forEach(d=>{if(n.includes(d)||n.push(d),r){let S=null;if(r.type=="sell"&&Sn(r.quantity,d.id.quantity)){let I=n.findIndex(W=>W===d),X=this.split_holding(d,r.quantity);d=X.holding_1,n[I]=X.holding_1,n.push(X.holding_2)}else if(r.type!="split"&&xn(r.quantity,d.id.quantity)){let I=this.split_transaction(r,d.id.quantity);r=I.transaction_1,S=I.transaction_2}this.update_holding_with_transaction_data(d,r),d.transactions.push(r),r=S}}),n),[]);return i.filter(n=>n.id.active).forEach(n=>this.update_holding_with_stock_price(n,u)),i.sort((n,r)=>n.id.subaccount_id.localeCompare(r.id.subaccount_id)||n.id.symbol.localeCompare(r.id.symbol)),i.forEach(n=>n.transactions.sort((r,d)=>new Date(d.settlement_date)-new Date(r.settlement_date))),i}find_or_initialize_holdings(e,u){let i=[];return u.type!=="buy"&&(i=e.filter(n=>n.id.subaccount_id===u.subaccount_id&&n.id.symbolMX===u.symbolMX&&n.id.active===!0),i.length===0&&(i=e.filter(n=>n.id.subaccount_id===u.subaccount_id&&n.id.symbolMX===u.symbolMX&&n.id.lot===u.quantity&&n.id.active===!1))),i.length!==0?i:[kn(u)]}split_holding(e,u){const i=Math.abs(u)/e.id.quantity,n=r=>{const d=structuredClone(e);return d.id.lot=e.id.lot*r,d.id.quantity=e.id.quantity*r,d.data.cost.value=e.data.cost.value*r,d.data.market.value=e.data.market.value*r,d.data.market.value_CAD=e.data.market.value_CAD*r,d.data.return.dividend=e.data.return.dividend*r,d.data.return.interest=e.data.return.interest*r,d.data.return.fees=e.data.return.fees*r,d.data.return.taxes=e.data.return.taxes*r,d.data.return.total=e.data.return.total*r,d.data.return.gain.realized=e.data.return.gain.realized*r,d};return{holding_1:n(i),holding_2:n(1-i)}}split_transaction(e,u){const i=u/Math.abs(e.quantity),n=r=>Object.assign({},e,{quantity:e.quantity*r,fee:e.fee*r,amount:e.amount*r,total:e.total*r,balance:e.balance-e.amount+e.amount*r});return{transaction_1:n(i),transaction_2:n(1-i)}}update_holding_with_transaction_data(e,u){var d;const i=e.data,n=e.data.return,r={buy:()=>{e.id.quantity=u.quantity,e.id.active=!0,i.cost.value=-u.amount,i.cost.price=i.cost.value/e.id.quantity,i.cost.date=u.settlement_dt},sell:()=>{e.id.quantity+=u.quantity,e.id.active=e.id.quantity>0,i.market.price=u.price,i.market.price_CAD=u.price,i.market.value=u.amount,i.market.value_CAD=u.amount,i.market.date=u.settlement_dt,n.gain.realized+=(u.price-i.cost.price)*Math.abs(u.quantity)},split:()=>{e.id.lot+=u.quantity,e.id.quantity+=u.quantity,i.cost.price=i.cost.value/e.id.quantity},dividend:()=>{n.dividend+=u.amount},interest:()=>{n.interest+=u.amount},tax:()=>{n.taxes-=u.amount}};(d=r[u.type])==null||d.call(r),n.fees+=u.fee||0,n.total=jt(n.dividend,n.interest,-n.taxes,-n.fees,n.gain.realized,n.gain.unrealized.overall.amount)}update_holding_with_stock_price(e,u){const i=e.data,n=e.data.return,r=this.get_quote(e.id.symbolMX,u),d=this.get_xrate(e.id.currency,"cad",u),S=this.get_xrate(r.currency,e.id.currency,u),I=r.value*S,X=I*e.id.quantity,W=I-i.cost.price;i.market.date=r.date,i.market.price=I,i.market.value=X,i.market.price_CAD=I*d,i.market.value_CAD=X*d,n.gain.unrealized.overall.change=W,n.gain.unrealized.overall.percent=W/i.cost.price,n.gain.unrealized.overall.amount=W*e.id.quantity,n.total=jt(n.dividend,n.interest,-n.taxes,-n.fees,n.gain.realized,n.gain.unrealized.overall.amount)}get_account_summary(e,u){var n;let i=Tn();return(n=this.accounts.find(r=>r.number===e))==null||n.subaccounts.forEach(({id:r,currency:d})=>{const S=this.get_xrate(d,"cad",u),I=this.get_subaccount_summary(r,d,u);i.subaccounts[r]=I,i.activities=zt(i.activities,I.activities,S),i.total=zt(i.total,I.total,S)}),i.total.unrealized_gain_percent=(i.total.holdings-i.total.cost)/i.total.cost,i}get_subaccount_summary(e,u,i){const{year:n,month:r}=At(i),d=En(u),{activities:S}=d;return this.get_transactions(e,i).forEach(I=>{this.update_subaccount_summary(S.all,I)&&I.year==n&&this.update_subaccount_summary(S.year,I)&&I.month==r&&this.update_subaccount_summary(S.month,I),d.transactions.push(I)}),d.holdings=this.get_holdings(e,i),d.holdings.forEach(I=>{d.total.holdings+=I.id.active?I.data.market.value:0,d.total.cost+=I.id.active?I.data.cost.value:0,d.total.unrealized_gain_value+=I.data.return.gain.unrealized.overall.amount}),d.total.cash=d.activities.all.cash,d.total.unrealized_gain_percent=d.total.unrealized_gain_value/d.total.cost,d.total.balance=d.total.cash+d.total.holdings,d}update_subaccount_summary(e,u){var d;const i=e,n=u,r={deposit:()=>i.deposit+=n.amount,withdrawal:()=>i.withdrawal+=n.amount,transfer:()=>i.transfer+=n.amount,transfer_in:()=>i.transfer+=n.amount,transfer_out:()=>i.transfer+=n.amount,buy:()=>i.buy+=n.amount,sell:()=>i.sell+=n.amount,dividend:()=>i.dividend+=n.amount,interest:()=>i.interest+=n.amount,income:()=>i.income+=n.amount,fee:()=>i.fees+=n.amount,tax:()=>i.taxes+=n.amount};return(d=r[n.type])==null||d.call(r),i.fees-=n.fee||0,i.cash+=n.total,i.total=i.deposit+i.withdrawal+i.transfer+i.buy+i.sell+i.dividend+i.interest+i.income+i.fees+i.taxes,!0}}const Fn={class:"tab-container"},In={class:"tab-logo-container"},Pn=["src"],An={name:"tab_dashboard"},Ht=Object.assign(An,{setup(l){return(e,u)=>(oe(),he("div",Fn,[E("div",In,[E("img",{src:it("tab_dashboard_icon.png"),alt:"Under Construction",class:"tab-logo-centered"},null,8,Pn)])]))}}),zn={class:"tab-container"},Rn={class:"tab-logo-container"},Ln=["src"],Nn={name:"tab_portfolio"},Bt=Object.assign(Nn,{setup(l){return(e,u)=>(oe(),he("div",zn,[E("div",Rn,[E("img",{src:it("tab_portfolio_icon.png"),alt:"Under Construction",class:"tab-logo-centered"},null,8,Ln)])]))}}),Dn={class:"tab-container"},jn={class:"tab-logo-container"},$n=["src"],Hn={name:"tab_performance"},Wt=Object.assign(Hn,{setup(l){return(e,u)=>(oe(),he("div",Dn,[E("div",jn,[E("img",{src:it("tab_performance_icon.png"),alt:"Under Construction",class:"tab-logo-centered"},null,8,$n)])]))}}),Bn={class:"tab-container"},Wn={class:"tab-logo-container"},qn=["src"],Un={name:"tab_wealth"},qt=Object.assign(Un,{setup(l){return(e,u)=>(oe(),he("div",Bn,[E("div",Wn,[E("img",{src:it("tab_wealth_icon.png"),alt:"Under Construction",class:"tab-logo-centered"},null,8,qn)])]))}}),Vn=["colspan"],Gn={class:"account-data-wraper"},Jn={class:"account-identifier"},Xn=["src"],Yn={class:"account-name"},Kn={key:0,class:"toggle-arrow"},Qn=["src"],Zn={class:"account-details"},er={class:"account-number"},tr={class:"account-type"},nr={props:{span:{type:Number,default:1},institution:{type:String,default:""},name:{type:String,default:""},number:{type:String,default:""},type:{type:String,default:""},currency:{type:String,default:""},show_expand:{type:Boolean,default:!0},expanded:{type:Boolean,default:!1}},emits:["update:expanded"],methods:{toggle(l){this.$emit("update:expanded",l)}},computed:{institution_icon(){if(this.institution=="--")switch(this.currency){case"cad":return it("currency_cad.png");case"usd":return it("currency_usd.png");default:return it("section_expanded.png")}else return`${fn}/${this.institution}.png`}}},Ut=Object.assign(nr,{__name:"td_account",setup(l){return(e,u)=>(oe(),he("td",{class:"account-cell",colspan:l.span},[E("div",Gn,[E("div",Jn,[E("div",null,[E("img",{src:e.institution_icon,class:"institution-icon"},null,8,Xn)]),E("div",Yn,ut(l.name),1),l.show_expand?(oe(),he("div",Kn,[E("img",{src:Lt,width:"13",height:"8",class:Ye({expanded:l.expanded}),onClick:u[0]||(u[0]=Rt(i=>e.toggle(!l.expanded),["stop"]))},null,10,Qn)])):$e("",!0)]),E("div",Zn,[E("div",er,ut(l.number),1),E("div",tr,ut(l.type),1)])])],8,Vn))}}),rr=["colspan"],ir={class:"section-identifier"},or=["src"],ar={class:"section-name"},sr={key:0,class:"toggle-arrow"},ur=["src"],lr={props:{span:{type:Number,default:1},icon:{type:String,default:""},name:{type:String,default:""},show_expand:{type:Boolean,default:!0},expanded:{type:Boolean,default:!1},fix_width:{type:String,default:""}},emits:["update:expanded"],methods:{toggle(l){this.$emit("update:expanded",l)}},computed:{section_icon(){return it(`section_${this.icon||"default"}.png`)},get_width(){return!this.fix_width==""?this.fix_width:"auto"}}},Kt=Object.assign(lr,{__name:"td_section",setup(l){return(e,u)=>(oe(),he("td",{class:"section-cell",colspan:l.span},[E("div",{class:"section-data-wraper",style:on({width:e.get_width})},[E("div",ir,[E("div",null,[E("img",{src:e.section_icon,class:"section-icon"},null,8,or)]),E("div",ar,ut(l.name),1)]),E("div",null,[l.show_expand?(oe(),he("div",sr,[E("img",{src:Lt,width:"13",height:"8",class:Ye({expanded:l.expanded}),onClick:u[0]||(u[0]=Rt(i=>e.toggle(!l.expanded),["stop"]))},null,10,ur)])):$e("",!0)])],4)],8,rr))}}),cr={class:"template-section"},dr={props:["name","icon","expanded","span"],emits:["update:expanded"],methods:{toggle(l){this.$emit("update:expanded",l)}}},It=Object.assign(dr,{__name:"tr_section",setup(l){return(e,u)=>(oe(),he("tr",cr,[ae(Kt,{span:l.span,name:l.name,icon:l.icon,expanded:l.expanded,"onUpdate:expanded":u[0]||(u[0]=i=>e.toggle(i))},null,8,["span","name","icon","expanded"])]))}}),Ct=(l,e)=>{const u=l.__vccOpts||l;for(const[i,n]of e)u[i]=n;return u},fr={},hr={class:"spacer"},mr=E("td",null,null,-1),gr=[mr];function pr(l,e){return oe(),he("tr",hr,gr)}const wt=Ct(fr,[["render",pr]]),vr={props:{value:{default:null},formatter:{type:Function,default:null},align:{type:String,validator:function(l){return["left","center","right"].includes(l)},default:"left"},bold:{type:Boolean,default:!1},inactive:{type:Boolean,default:!1},colored:{type:Boolean,default:!1},highlighted:{type:Boolean,default:!1},arrow:{type:Boolean,default:!1},span:{type:Number,default:1},tooltip:{default:null},visible:{type:Boolean,default:!0},show_zero:{type:Boolean,default:!0},show_null:{type:Boolean,default:!0}},computed:{formatted_value(){return!this.show_null&&!this.value||typeof this.value=="number"&&!this.show_zero&&this.value==0?"":this.formatter?this.formatter(this.value):this.value},font_color(){return this.inactive?"inactive":this.colored&&typeof this.value=="number"?this.value>0?"green":this.value<0?"red":"black":"black"},show_arrow(){return this.arrow&&typeof this.value=="number"&&this.value!=0}}},yr=["colspan","title"],_r=E("path",{"data-v-ae951afa":"",d:"M5.79 15.013H3.778V7.806H.813L4.808.398l4.004 7.408H5.791v7.207z",fill:"currentColor"},null,-1),br=[_r];function wr(l,e,u,i,n,r){return oe(),he("td",{class:Ye(["cell-custom",[u.align]]),colspan:u.span,title:u.tooltip},[u.visible?(oe(),he("div",{key:0,class:Ye(["cell-content",[u.align]])},[E("span",{class:Ye(["cell-value text-color",[r.font_color,{highlighted:u.highlighted,bold:u.bold}]])},ut(r.formatted_value),3),r.show_arrow?(oe(),he("svg",{key:0,viewBox:"0 0 9 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:Ye(["arrow-icon",[r.font_color]])},br,2)):$e("",!0)],2)):$e("",!0)],10,yr)}const dt=Ct(vr,[["render",wr]]),nt={number:new Intl.NumberFormat("en-US"),money:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),price:new Intl.NumberFormat("en-US",{minimumFractionDigits:4,maximumFractionDigits:4}),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2}),xrate:new Intl.NumberFormat("en-US",{minimumFractionDigits:4,maximumFractionDigits:4}),date:new Intl.DateTimeFormat("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",timeZone:"UTC"}),local_date:new Intl.DateTimeFormat("en-CA",{year:"numeric",month:"2-digit",day:"2-digit"}),long_date:new Intl.DateTimeFormat("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",timeZone:"UTC"}),long_datetime:new Intl.DateTimeFormat("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"UTC"}),month_year:new Intl.DateTimeFormat("default",{month:"long",year:"numeric"})},He={number(l){return nt.number.format(l)},money(l){return nt.money.format(l)},money_plus(l){return(l>0?"+":"")+nt.money.format(l)},money_currency(l,e){return`${nt.money.format(l)} ${e.toUpperCase()}`},price(l,e=null){return`${nt.price.format(l)}`+(e?` ${e.toUpperCase()}`:"")},percent(l){return nt.percent.format(l)},percent_plus(l){return(l>0?"+":"")+nt.percent.format(l)},date(l){let e=new Date(l);return isNaN(e.getTime())?"Invalid":nt.date.format(e)},date(l){let e=new Date(l);return isNaN(e.getTime())?"Invalid":nt.date.format(e)},local_date(l){let e=new Date(l);return isNaN(e.getTime())?"Invalid":nt.local_date.format(e)},long_date(l){let e=new Date(l);return isNaN(e.getTime())?"Invalid":nt.long_date.format(e)},long_datetime(l){let e=new Date(l);return isNaN(e.getTime())?"Invalid":nt.long_datetime.format(e)},month_year(l){let e=new Date(`${l}-01T12:00`);return isNaN(e.getTime())?"Invalid":nt.month_year.format(e)},month_year_ym(l,e){let u=new Date(l,e-1,1);return isNaN(u.getTime())?"Invalid":nt.month_year.format(u)},xrate_cad(l){return`1 USD = ${nt.xrate.format(l)} CAD`},tip_price(l,e,u,i,n){return`${He.price(l,e)}
`+(u&&e!==i?`${He.price(u,i)}
`:"")+`${He.long_date(n)}`},currency_info(l,e){return l===""?"":`1 ${l.toUpperCase()} = ${(1/e).toFixed(4)} CAD, 1 CAD = ${e.toFixed(4)} ${l.toUpperCase()}`},tip_daily_change(l,e){return He.money_plus(l)+" on "+He.long_datetime(e)},tip_xrate(l,e){return l==="usd"?`1 USD = ${He.xrate_cad(e)} CAD`:null}},kr={components:{td_base:dt},props:{...dt.props,formatter:{type:Function,default:He.money},align:{default:"right"}}},Re=Object.assign(kr,{__name:"td_money",setup(l){return(e,u)=>(oe(),ot(dt,xt(e.$props,{formatter:l.formatter,align:l.align}),null,16,["formatter","align"]))}}),Tr={props:{value:{default:null},value_display:{default:null},formatter:{type:Function,default:null},align:{type:String,validator:function(l){return["left","center","right"].includes(l)},default:"left"},bold:{type:Boolean,default:!1},colored:{type:Boolean,default:!1},highlighted:{type:Boolean,default:!1},arrow:{type:Boolean,default:!1},tooltip:{default:null},visible:{type:Boolean,default:!0},show_zero:{type:Boolean,default:!0},show_null:{type:Boolean,default:!0}},computed:{formatted_value(){return this.value_display?this.value_display:!this.show_null&&!this.value||typeof this.value=="number"&&!this.show_zero&&this.value==0?"":this.formatter?this.formatter(this.value):this.value},font_color(){return this.colored&&typeof this.value=="number"?this.value>0?"green":this.value<0?"red":"black":"black"},show_arrow(){return this.arrow&&typeof this.value=="number"&&this.value!=0}}},Er=["title"],Or=E("path",{"data-v-ae951afa":"",d:"M5.79 15.013H3.778V7.806H.813L4.808.398l4.004 7.408H5.791v7.207z",fill:"currentColor"},null,-1),Mr=[Or];function xr(l,e,u,i,n,r){return oe(),he("div",{class:Ye(["div-custom",[u.align]]),title:u.tooltip},[u.visible?(oe(),he("div",{key:0,class:Ye(["div-custom-content",[u.align]])},[E("span",{class:Ye(["div-custom-value text-color",[r.font_color,{highlighted:u.highlighted,bold:u.bold}]])},ut(r.formatted_value),3),r.show_arrow?(oe(),he("svg",{key:0,viewBox:"0 0 9 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:Ye(["div-custom-arrow-icon",[r.font_color]])},Mr,2)):$e("",!0)],2)):$e("",!0)],10,Er)}const yt=Ct(Tr,[["render",xr]]),Sr={key:0,class:"account-summary"},Cr={id:"details-section",class:"section left details-section"},Fr=an('<div class="details-column left bold"><div></div><div>Deposit</div><div>Withdrawal</div><div>Transfer</div><div>Buy</div><div>Sell</div><div>Dividend</div><div>Interest</div><div>Income</div><div>Taxes</div><div>Fees</div><div>Total</div></div>',1),Ir={class:"details-column right"},Pr={class:"details-column right"},Ar={class:"details-column right"},zr=E("div",{class:"end"},"All Time",-1),Rr={id:"summary-section",class:"section right center"},Lr={class:"summary-section"},Nr=E("div",{class:"balance-label"},"Account Balance",-1),Dr={class:"value-container"},jr=E("div",{class:"summary-label"},"Cash",-1),$r={class:"value-container"},Hr=E("div",{class:"summary-label"},"Holdings",-1),Br={class:"value-container"},Wr=E("div",{class:"unrealized-label"},"Unrealized gain",-1),qr={props:["summary","period","currency"],computed:{keys(){return["deposit","withdrawal","transfer","buy","sell","dividend","interest","income","taxes","fees","total"]},total(){return this.summary.total},unrealized_gain(){return`(${He.percent_plus(this.summary.total.unrealized_gain_percent)}) ${He.money(this.summary.total.unrealized_gain_value)}`}}},Vt=Object.assign(qr,{__name:"ls_summary",setup(l){return(e,u)=>l.summary?(oe(),he("div",Sr,[E("div",Cr,[Fr,E("div",Ir,[E("div",null,ut(Qe(He).month_year_ym(l.period.year,l.period.month)),1),(oe(!0),he(tt,null,gt(e.keys,i=>(oe(),ot(yt,{value:l.summary.activities.month[i],formatter:Qe(He).money,align:"right",colored:!0},null,8,["value","formatter"]))),256))]),E("div",Pr,[E("div",null,ut(l.period.year),1),(oe(!0),he(tt,null,gt(e.keys,i=>(oe(),ot(yt,{value:l.summary.activities.year[i],formatter:Qe(He).money,align:"right",colored:!0},null,8,["value","formatter"]))),256))]),E("div",Ar,[zr,(oe(!0),he(tt,null,gt(e.keys,i=>(oe(),ot(yt,{value:l.summary.activities.all[i],formatter:Qe(He).money,align:"right",colored:!0},null,8,["value","formatter"]))),256))])]),E("div",Rr,[E("div",Lr,[E("div",null,[ae(yt,{value:e.total.balance,value_display:Qe(He).money_currency(e.total.balance,l.currency),align:"left",colored:!0,class:"balance-value"},null,8,["value","value_display"]),Nr]),E("div",Dr,[jr,ae(yt,{value:e.total.cash,formatter:Qe(He).money,align:"right",class:"summary-value"},null,8,["value","formatter"])]),E("div",$r,[Hr,ae(yt,{value:e.total.holdings,formatter:Qe(He).money,align:"right",class:"summary-value"},null,8,["value","formatter"])]),E("div",Br,[Wr,ae(yt,{value:e.total.unrealized_gain_value,value_display:e.unrealized_gain,tooltip:`Cost: ${Qe(He).money(e.total.cost)}`,align:"right",colored:!0,class:"unrealized-value"},null,8,["value","value_display","tooltip"])])])])])):$e("",!0)}}),Ur={props:{span:{type:Number,default:1},value:{type:String,default:""},background:{type:Boolean,default:!1}}},Vr=["colspan"],Gr={class:"header-centered"};function Jr(l,e,u,i,n,r){return oe(),he("th",{colspan:u.span},[E("div",Gr,[E("div",{class:Ye(["header-value",[{background:u.background}]])},ut(u.value),3)])],8,Vr)}const Mt=Ct(Ur,[["render",Jr]]),Xr=["title"],Yr={class:"company-data-wraper"},Kr={class:""},Qr=["src"],Zr={class:"company-data"},ei={class:"company-symbol"},ti={class:"company-name"},ni={key:0,class:"toggle-arrow"},ri=["src"],ii={props:{holding:{default:null},show_expand:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1}},emits:["update:expanded"],data(){return{logo:Dt,error:!1}},methods:{toggle(l){this.$emit("update:expanded",l)},load_logo(){this.logo=this.error?this.logo:this.logo_path()},logo_path(){return this.cash?pn:`${gn}/${this.holding.symbolMX}/logo`},reset_logo(){this.error=!0,this.logo=Dt}},computed:{cash(){return this.holding.symbol=="REALCASH"},company_symbol(){return this.cash?"CASH":this.holding.symbol},company_name(){return this.cash?"CASH BALANCE":this.holding.name},tooltip(){return this.cash?"CASH BALANCE":this.holding.symbolMX}}},oi=Object.assign(ii,{__name:"td_company",setup(l){return(e,u)=>(oe(),he("td",{class:"company-cell",title:e.tooltip},[E("div",Yr,[E("div",Kr,[E("img",{src:e.logo,onLoad:u[0]||(u[0]=(...i)=>e.load_logo&&e.load_logo(...i)),onError:u[1]||(u[1]=(...i)=>e.reset_logo&&e.reset_logo(...i)),alt:"company_symbol",class:"company-logo"},null,40,Qr)]),E("div",Zr,[E("div",ei,ut(e.company_symbol),1),E("div",ti,ut(e.company_name),1)]),l.show_expand?(oe(),he("div",ni,[E("img",{src:Lt,width:"13",height:"8",class:Ye({expanded:l.expanded}),onClick:u[2]||(u[2]=Rt(i=>e.toggle(!l.expanded),["stop"]))},null,10,ri)])):$e("",!0)])],8,Xr))}}),ai={components:{td_base:dt},props:{...dt.props,formatter:{type:Function,default:He.number},align:{default:"right"}}},Qt=Object.assign(ai,{__name:"td_number",setup(l){return(e,u)=>(oe(),ot(dt,xt(e.$props,{formatter:l.formatter,align:l.align}),null,16,["formatter","align"]))}}),si={components:{td_base:dt},props:{...dt.props,align:{default:"left"}}},ui=Object.assign(si,{__name:"td_date",setup(l){return(e,u)=>(oe(),ot(dt,xt(e.$props,{formatter:Qe(He).date,align:l.align}),null,16,["formatter","align"]))}}),li={components:{td_base:dt},props:{...dt.props,align:{default:"left"}}},Pt=Object.assign(li,{__name:"td_text",setup(l){return(e,u)=>(oe(),ot(dt,xt(e.$props,{formatter:null,align:l.align}),null,16,["align"]))}}),ci={class:"transactions-table"},di={class:"transactions-header bottom-line"},fi=E("th",{class:"justify-left"},"Date",-1),hi=E("th",{class:"justify-left"},"Description",-1),mi={key:0,class:"justify-left"},gi=E("th",{class:"justify-left"},"Type",-1),pi=E("th",{class:"justify-center"},"Qte",-1),vi=E("th",null,"Price",-1),yi=E("th",null,"Amount",-1),_i=E("th",null,"Fee",-1),bi=E("th",null,"Total",-1),wi={key:1},ki={class:"transactions-month"},Ti={colspan:"8",class:"justify-left"},Ei={key:0},Oi={key:1},Mi={class:"spacer top-line"},xi=E("td",{colspan:"8"},null,-1),Si={key:0},Ci={key:1},Fi={props:{transactions:{type:Array},show_symbol:{type:Boolean,default:!0},show_balance:{type:Boolean,default:!0}},methods:{tooltip_transaction_date(l){return`trade: ${He.date(l.date)}
settlement: ${He.date(l.settlement_date)}`}},computed:{transactions_by_month(){return this.transactions.sort((l,e)=>e.settlement_dt-l.settlement_dt||e.index-l.index).reduce((l,e)=>{var u;return(l[u=e.year_month]??(l[u]=[])).push(e),l},{})}}},Zt=Object.assign(Fi,{__name:"ls_transactions",setup(l){return(e,u)=>(oe(),he("table",ci,[E("thead",null,[E("tr",di,[fi,hi,l.show_symbol?(oe(),he("th",mi,"Company")):$e("",!0),gi,pi,vi,yi,_i,bi,l.show_balance?(oe(),he("th",wi,"Balance")):$e("",!0)])]),E("tbody",null,[(oe(!0),he(tt,null,gt(e.transactions_by_month,(i,n)=>(oe(),he(tt,{key:n},[E("tr",ki,[E("td",Ti,ut(Qe(He).month_year(n)),1),l.show_symbol?(oe(),he("td",Ei)):$e("",!0),l.show_balance?(oe(),he("td",Oi)):$e("",!0)]),(oe(!0),he(tt,null,gt(i,r=>(oe(),he("tr",null,[ae(ui,{value:r.settlement_date,tooltip:e.tooltip_transaction_date(r)},null,8,["value","tooltip"]),ae(Pt,{value:r.description,class:"transaction-description",tooltip:r.description},null,8,["value","tooltip"]),l.show_symbol?(oe(),ot(Pt,{key:0,value:r.symbol},null,8,["value"])):$e("",!0),ae(Pt,{value:r.type.toUpperCase()},null,8,["value"]),ae(Qt,{value:r.quantity,align:"center",show_zero:!1,show_null:!1},null,8,["value"]),ae(Re,{value:r.price,formatter:Qe(He).price,show_zero:!1,show_null:!1},null,8,["value","formatter"]),ae(Re,{value:r.amount},null,8,["value"]),ae(Re,{value:-r.fee,show_zero:!1,show_null:!1},null,8,["value"]),ae(Re,{value:r.total,colored:!0},null,8,["value"]),l.show_balance?(oe(),ot(Re,{key:1,value:r.balance,bold:!0},null,8,["value"])):$e("",!0)]))),256))],64))),128))]),E("tfoot",null,[E("tr",Mi,[xi,l.show_symbol?(oe(),he("td",Si)):$e("",!0),l.show_balance?(oe(),he("td",Ci)):$e("",!0)])])]))}}),Ii={class:"holdings_table"},Pi=E("th",{colspan:"2"},null,-1),Ai=E("th",null,null,-1),zi=E("tr",{class:"justify-right bottom-line"},[E("th",{class:"justify-left"},"Company"),E("th",{class:"justify-center"},"Qty"),E("th",null,"Price"),E("th",null,"Value"),E("th",null,"Price"),E("th",null,"Value"),E("th",null,"Realized"),E("th",null,"Unrealized"),E("th",null,"Dividend"),E("th",null,"Interest"),E("th",null,"Fees"),E("th",null,"Taxes"),E("th",null,"Return")],-1),Ri={key:0,class:"state"},Li={key:0},Ni={colspan:" 13"},Di={class:"total-line"},ji=E("td",{colspan:"3",class:"justify-left"},"Total",-1),$i=E("td",null,null,-1),Hi={key:0,class:"total-line"},Bi=E("td",{colspan:"3",class:"justify-left"},"Total",-1),Wi=E("td",null,null,-1),qi={props:["holdings"],data(){return{expanded:{states:{},holdings:{}},grouped_holdings:{}}},methods:{get_grouped_holdings(l){return this.grouped_holdings[l]=this.grouped_holdings[l]||this.holdings.filter(e=>l==="active"?e.id.active:!e.id.active)},show_footer_total(){return this.get_grouped_holdings("active").length&&this.get_grouped_holdings("inactive").lenght},total(l,e){return On(e?this.get_grouped_holdings(e):this.holdings,l)},get_holding_index(l){return this.holdings.findIndex(e=>e===l)},get_market_price_tooltip(l){var e,u;return He.tip_price(l.data.market.price,l.id.currency,(e=l.security)==null?void 0:e.price,(u=l.security)==null?void 0:u.currency,l.data.market.date)}}},Ui=Object.assign(qi,{__name:"ls_holdings",setup(l){return(e,u)=>(oe(),he("table",Ii,[E("thead",null,[ae(wt),E("tr",null,[Pi,ae(Mt,{span:2,value:"Cost",background:!0}),ae(Mt,{span:2,value:"Market",background:!0}),ae(Mt,{span:4,value:"Gain",background:!0}),ae(Mt,{span:2,value:"Charges",background:!0}),Ai]),zi]),(oe(),he(tt,null,gt(["active","inactive"],i=>E("tbody",null,[i!="active"&&e.get_grouped_holdings(i).length?(oe(),he("tr",Ri,[ae(Kt,{span:13,name:i.charAt(0).toUpperCase()+i.slice(1)+" Holdings",icon:"inactive",expanded:e.expanded.states[i],"onUpdate:expanded":n=>e.expanded.states[i]=n},null,8,["name","expanded","onUpdate:expanded"])])):$e("",!0),e.expanded.states[i]||i=="active"?(oe(),he(tt,{key:1},[ae(wt),(oe(!0),he(tt,null,gt(e.get_grouped_holdings(i),n=>(oe(),he(tt,null,[E("tr",{class:Ye(["holding",[{expanded:e.expanded.holdings[e.get_holding_index(n)]}]])},[ae(oi,{holding:n.id,show_expand:!0,expanded:e.expanded.holdings[e.get_holding_index(n)],"onUpdate:expanded":r=>e.expanded.holdings[e.get_holding_index(n)]=r},null,8,["holding","expanded","onUpdate:expanded"]),ae(Qt,{value:n.id.lot,tooltip:Qe(He).long_date(n.data.cost.date),align:"center"},null,8,["value","tooltip"]),ae(Re,{value:n.data.cost.price,tooltip:Qe(He).long_date(n.data.cost.date)},null,8,["value","tooltip"]),ae(Re,{value:n.data.cost.value,tooltip:Qe(He).long_date(n.data.cost.date)},null,8,["value","tooltip"]),ae(Re,{value:n.data.market.price,tooltip:e.get_market_price_tooltip(n),inactive:!n.id.active},null,8,["value","tooltip","inactive"]),ae(Re,{value:n.data.market.value,tooltip:Qe(He).long_date(n.data.market.date),inactive:!n.id.active},null,8,["value","tooltip","inactive"]),ae(Re,{value:n.data.return.gain.realized,colored:!0,arrow:!0},null,8,["value"]),ae(Re,{value:n.data.return.gain.unrealized.overall.amount,colored:!0,arrow:!0},null,8,["value"]),ae(Re,{value:n.data.return.dividend},null,8,["value"]),ae(Re,{value:n.data.return.interest},null,8,["value"]),ae(Re,{value:n.data.return.fees},null,8,["value"]),ae(Re,{value:n.data.return.taxes},null,8,["value"]),ae(Re,{value:n.data.return.total,colored:!0},null,8,["value"])],2),e.expanded.holdings[e.get_holding_index(n)]?(oe(),he("tr",Li,[E("td",Ni,[ae(Zt,{transactions:n.transactions,show_symbol:!1,show_balance:!1},null,8,["transactions"])])])):$e("",!0)],64))),256)),E("tr",Di,[ji,ae(Re,{value:e.total("data.cost.value",i)},null,8,["value"]),$i,ae(Re,{value:e.total("data.market.value",i)},null,8,["value"]),ae(Re,{value:e.total("data.return.gain.realized",i)},null,8,["value"]),ae(Re,{value:e.total("data.return.gain.unrealized.overall.amount",i)},null,8,["value"]),ae(Re,{value:e.total("data.return.dividend",i)},null,8,["value"]),ae(Re,{value:e.total("data.return.interest",i)},null,8,["value"]),ae(Re,{value:e.total("data.return.fees",i)},null,8,["value"]),ae(Re,{value:e.total("data.return.taxes",i)},null,8,["value"]),ae(Re,{value:e.total("data.return.total",i)},null,8,["value"])])],64)):$e("",!0),ae(wt)])),64)),E("tfoot",null,[e.show_footer_total()?(oe(),he("tr",Hi,[Bi,ae(Re,{value:e.total("data.cost.value")},null,8,["value"]),Wi,ae(Re,{value:e.total("values.market.value")},null,8,["value"]),ae(Re,{value:e.total("data.return.gain.realized")},null,8,["value"]),ae(Re,{value:e.total("data.return.gain.unrealized.overall.amount")},null,8,["value"]),ae(Re,{value:e.total("data.return.dividend")},null,8,["value"]),ae(Re,{value:e.total("data.return.interest")},null,8,["value"]),ae(Re,{value:e.total("data.return.fees")},null,8,["value"]),ae(Re,{value:e.total("data.return.taxes")},null,8,["value"]),ae(Re,{value:e.total("data.return.total")},null,8,["value"])])):$e("",!0)])]))}}),Vi={key:0,id:"listing"},Gi={class:"date-picker"},Ji=["value"],Xi={class:"listing history"},Yi=E("thead",null,[E("tr",{class:"bottom-line"},[E("th",{class:"justify-left"},"Accounts"),E("th",{colspan:"1",class:"justify-right"},"Total CAD")])],-1),Ki={colspan:"2"},Qi={class:"subaccount"},Zi={key:0},eo={colspan:"2"},to={key:2},no={colspan:"2"},ro={key:4},io={colspan:"2"},oo=E("tr",{class:"account-footer"},[E("td",{colspan:"2"})],-1),ao={class:"total-line"},so=E("td",{class:"justify-left"},"Total",-1),uo={id:"footer"},lo=E("div",{style:{height:"20px"}},null,-1),co={style:{display:"flex","justify-content":"space-between"}},fo=["title"],ho={inject:["data","state"],data(){return{date:new Date,initialized:void 0,x_usd:null,accounts:null,account_summaries:{},expanded:{}}},created(){this.initialized=this.data.initialize().then(()=>this.load_data())},methods:{load_data(){this.state.loading=!0,this.initialize_expanded(),this.initialized.then(()=>{this.x_usd=this.data.get_currency("usd",this.date),this.accounts=this.data.get_accounts(this.date),this.accounts.forEach(l=>{this.account_summaries[l.number]=this.data.get_account_summary(l.number,this.date)}),this.state.loading=!1})},subaccount_summary(l){var e;return(e=Object.values(this.account_summaries).flatMap(u=>Object.entries(u.subaccounts)).find(([u])=>u===l))==null?void 0:e[1]},initialize_expanded(){this.expanded={accounts:{},subaccounts:{},summaries:{},holdings:{},transactions:{}}}},computed:{currency_info(){return this.x_usd?He.currency_info(this.x_usd.id,this.x_usd.rate):"undefined"},currency_date(){return this.x_usd?He.long_datetime(this.x_usd.date):"undefined"},accounts_total(){return Object.values(this.account_summaries).reduce((l,e)=>l+e.total.balance,0)}}},Gt=Object.assign(ho,{__name:"history",setup(l){return(e,u)=>(oe(),he(tt,null,[e.accounts&&e.accounts.length?(oe(),he("div",Vi,[E("div",Gi,[E("input",{type:"date",value:Qe(He).local_date(e.date),onInput:u[0]||(u[0]=i=>e.date=new Date(i.target.value)),onChange:u[1]||(u[1]=i=>e.load_data())},null,40,Ji)]),E("table",Xi,[Yi,e.accounts?(oe(!0),he(tt,{key:0},gt(e.accounts,i=>(oe(),he("tbody",{key:i.number},[E("tr",{class:Ye(["account toggle-row",[{expanded:e.expanded.accounts[i.number]}]])},[ae(Ut,{institution:i.institution.type,name:i.name,number:i.number,type:i.type,expanded:e.expanded.accounts[i.number],"onUpdate:expanded":n=>e.expanded.accounts[i.number]=n},null,8,["institution","name","number","type","expanded","onUpdate:expanded"]),e.account_summaries[i.number]?(oe(),ot(Re,{key:0,value:e.account_summaries[i.number].total.balance,show_zero:!0},null,8,["value"])):$e("",!0)],2),e.expanded.accounts[i.number]&&e.account_summaries[i.number]?(oe(),he(tt,{key:0},[E("tr",null,[E("td",Ki,[ae(Vt,{summary:e.account_summaries[i.number],period:Qe(At)(e.date),currency:"cad"},null,8,["summary","period"])])]),(oe(!0),he(tt,null,gt(i.subaccounts,n=>(oe(),he(tt,{key:n.id},[E("tr",Qi,[ae(Ut,{span:2,institution:"--",name:n.name,currency:n.currency,show_expand:!1},null,8,["name","currency"])]),(oe(),he(tt,{key:0},[ae(It,{span:2,name:"Summary",icon:"summary",expanded:e.expanded.summaries[n.id],"onUpdate:expanded":r=>e.expanded.summaries[n.id]=r},null,8,["expanded","onUpdate:expanded"]),e.expanded.summaries[n.id]?(oe(),he("tr",Zi,[E("td",eo,[ae(Vt,{summary:e.subaccount_summary(n.id),period:Qe(At)(e.date),currency:n.currency},null,8,["summary","period","currency"])])])):$e("",!0),e.expanded.summaries[n.id]?(oe(),ot(wt,{key:1})):$e("",!0),ae(It,{span:2,name:"Holdings",icon:"holdings",expanded:e.expanded.holdings[n.id],"onUpdate:expanded":r=>e.expanded.holdings[n.id]=r},null,8,["expanded","onUpdate:expanded"]),e.expanded.holdings[n.id]?(oe(),he("tr",to,[E("td",no,[ae(Ui,{holdings:e.subaccount_summary(n.id).holdings},null,8,["holdings"])])])):$e("",!0),e.expanded.holdings[n.id]?(oe(),ot(wt,{key:3})):$e("",!0),ae(It,{span:2,name:"Transactions",icon:"transactions",expanded:e.expanded.transactions[n.id],"onUpdate:expanded":r=>e.expanded.transactions[n.id]=r},null,8,["expanded","onUpdate:expanded"]),e.expanded.transactions[n.id]?(oe(),he("tr",ro,[E("td",io,[ae(Zt,{transactions:e.subaccount_summary(n.id).transactions},null,8,["transactions"])])])):$e("",!0),ae(wt)],64))],64))),128)),oo],64)):$e("",!0)]))),128)):$e("",!0),E("tfoot",null,[E("tr",ao,[so,ae(Re,{value:e.accounts_total,show_zero:!0},null,8,["value"])])])])])):$e("",!0),E("div",uo,[lo,E("div",co,[E("div",null,[e.x_usd?(oe(),he("div",{key:0,class:"x-rate-info",title:e.currency_date},ut(e.currency_info),9,fo)):$e("",!0)])])])],64))}}),mo={class:"tabs-container"},go={class:"tabs"},po=["src"],vo=E("span",null,"Dashboard",-1),yo=["src"],_o=E("span",null,"Portfolio",-1),bo=["src"],wo=E("span",null,"Performance",-1),ko=["src"],To=E("span",null,"Wealth",-1),Eo=["src"],Oo=E("span",null,"History",-1),Mo={class:"state"},xo=["src"],So=E("div",{class:"top-space"},null,-1),Co={name:"App",components:{Dashboard:Ht,Portfolio:Bt,Performance:Wt,Wealth:qt,History:Gt},data(){return{state:{loading:!0},active_tab:ln()?"Dashboard":"History",tabs:{Dashboard:Et(Ht),Portfolio:Et(Bt),Performance:Et(Wt),Wealth:Et(qt),History:Et(Gt)}}},provide(){return{data:new Cn,state:this.state}},computed:{get_active_tab(){return this.tabs[this.active_tab]}}},Po=Object.assign(Co,{setup(l){return(e,u)=>(oe(),he("div",null,[E("div",mo,[E("div",go,[E("div",{onClick:u[0]||(u[0]=i=>e.active_tab="Dashboard"),class:Ye(["tab",{"tab-active":e.active_tab==="Dashboard"}])},[E("img",{src:it("tab_dashboard_icon.png"),alt:"",class:"tab-img"},null,8,po),vo],2),E("div",{onClick:u[1]||(u[1]=i=>e.active_tab="Portfolio"),class:Ye(["tab",{"tab-active":e.active_tab==="Portfolio"}])},[E("img",{src:it("tab_portfolio_icon.png"),alt:"",class:"tab-img"},null,8,yo),_o],2),E("div",{onClick:u[2]||(u[2]=i=>e.active_tab="Performance"),class:Ye(["tab",{"tab-active":e.active_tab==="Performance"}])},[E("img",{src:it("tab_performance_icon.png"),alt:"",class:"tab-img"},null,8,bo),wo],2),E("div",{onClick:u[3]||(u[3]=i=>e.active_tab="Wealth"),class:Ye(["tab",{"tab-active":e.active_tab==="Wealth"}])},[E("img",{src:it("tab_wealth_icon.png"),alt:"",class:"tab-img"},null,8,ko),To],2),E("div",{onClick:u[4]||(u[4]=i=>e.active_tab="History"),class:Ye(["tab",{"tab-active":e.active_tab==="History"}])},[E("img",{src:it("tab_history_icon.png"),alt:"",class:"tab-img"},null,8,Eo),Oo],2)]),E("div",Mo,[e.state.loading?(oe(),he("img",{key:0,src:it("system_loading.gif"),alt:"Loading...",class:"loading-gif"},null,8,xo)):$e("",!0)])]),So,E("div",null,[(oe(),ot(un,null,[(oe(),ot(sn(e.get_active_tab)))],1024))])]))}});export{Po as default};
