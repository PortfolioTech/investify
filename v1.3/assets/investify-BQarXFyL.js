var qt=Object.defineProperty;var Vt=(k,e,t)=>e in k?qt(k,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):k[e]=t;var dt=(k,e,t)=>(Vt(k,typeof e!="symbol"?e+"":e,t),t);import{p as Jt,o as se,c as he,a as c,n as tt,t as et,w as Gt,b as He,d as wt,m as At,u as Xe,e as J,F as Ge,r as ft,f as Ft,g as Yt,h as Kt,K as Xt,i as Tt}from"./index-BDIkKPT6.js";var Wt={};(function(k){(()=>{var e={541:(o,d,E)=>{var U=E(353),ne=G(U),q=E(37),$=G(q),y=E(630),T=G(y),g=function(){function P(D,h){for(var v=0;v<h.length;v++){var A=h[v];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(D,A.key,A)}}return function(D,h,v){return h&&P(D.prototype,h),v&&P(D,v),D}}(),O=E(457),x=G(O),j=E(729),M=G(j),n=E(702);E(303);var R=E(248),r=G(R),V=E(249),ie=G(V);function G(P){return P&&P.__esModule?P:{default:P}}function we(P,D){if(!(P instanceof D))throw new TypeError("Cannot call a class as a function")}function _e(P,D){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:P}function De(P,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);P.prototype=Object.create(D&&D.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(P,D):P.__proto__=D)}window.iFrameResizer=ie.default;var re=function(P){De(D,P);function D(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};we(this,D);var v=_e(this,(D.__proto__||Object.getPrototypeOf(D)).call(this));return v.options=h,v.api=new r.default(v),v.channel=x.default.build({window:h.window||window.parent,origin:"*",scope:h.id||location.origin,postMessageObserver:function(H,Y){v.emit("postMessage",H,Y)},gotMessageObserver:function(H,Y){v.emit("gotMessage",H,Y)}}),["init","update","reload","_event"].forEach(function(A){v.channel.bind(A,function(H,Y){var N=A,B=Y;return A==="_event"&&(N=Y.eventName,B=Y.eventData),v.emit(N,B),"success"})}),v}return g(D,[{key:"request",value:function(v){var A=this;return new n.Promise(function(H,Y){if(!(0,T.default)(v))throw new Error("Params must be an object");var N=v.method,B=v.endpoint,ge=v.query,pe=v.body;if(!N||!B||!(0,$.default)(N)||!(0,$.default)(B))throw new Error("Invalid method or endpoint");if(!(0,ne.default)(ge)&&!(0,T.default)(ge))throw new Error("Query must be an object");if(!(0,ne.default)(pe)&&!(0,T.default)(pe))throw new Error("Body must be an object");A.effectiveUser&&(v.effectiveUser=A.effectiveUser),A.channel.call({method:"request",params:v,success:function(me){H(me)},error:function(me){Y(me)}})})}},{key:"setEffectiveUser",value:function(v){this.effectiveUser=v}},{key:"saveData",value:function(v){var A=this;return new n.Promise(function(H,Y){if(!(0,T.default)(v))throw new Error("Data must be an object");A.channel.call({method:"saveData",params:v,success:function(){H()},error:function(B){Y(B)}})})}},{key:"addTransaction",value:function(v){var A=this;return new n.Promise(function(H,Y){if(!(0,ne.default)(v)&&!(0,T.default)(v))throw new Error("Attrs must be an object");A.channel.call({method:"addTransaction",params:v,success:function(B){H(B)},error:function(B){Y(B)}})})}},{key:"editTransaction",value:function(v){var A=this;return new n.Promise(function(H,Y){if(!v||!(0,$.default)(v))throw new Error("Invalid id");A.channel.call({method:"editTransaction",params:v,success:function(B){H(B)},error:function(B){Y(B)}})})}},{key:"addInstitution",value:function(v){var A=this;return new n.Promise(function(H,Y){if(!(0,ne.default)(v)&&!(0,T.default)(v))throw new Error("Attrs must be an object");A.channel.call({method:"addInstitution",params:v,success:function(B){H(B)},error:function(B){Y(B)}})})}},{key:"addInvestment",value:function(){var v=this;return new n.Promise(function(A,H){v.channel.call({method:"addInvestment",success:function(N){A(N)},error:function(N){H(N)}})})}},{key:"editInstitution",value:function(v){var A=this;return new n.Promise(function(H,Y){if(!v||!(0,$.default)(v))throw new Error("Invalid id");A.channel.call({method:"editInstitution",params:v,success:function(B){H(B)},error:function(B){Y(B)}})})}},{key:"editAsset",value:function(v){var A=this;return new n.Promise(function(H,Y){if(!v||!(0,$.default)(v))throw new Error("Invalid id");A.channel.call({method:"editAsset",params:v,success:function(B){H(B)},error:function(B){Y(B)}})})}},{key:"editLiability",value:function(v){var A=this;return new n.Promise(function(H,Y){if(!v||!(0,$.default)(v))throw new Error("Invalid id");A.channel.call({method:"editLiability",params:v,success:function(B){H(B)},error:function(B){Y(B)}})})}},{key:"deleteInstitution",value:function(v){var A=this;return new n.Promise(function(H,Y){if(!v||!(0,$.default)(v))throw new Error("Invalid id");A.channel.call({method:"deleteInstitution",params:v,success:function(B){H(B)},error:function(B){Y(B)}})})}},{key:"deleteAsset",value:function(v){var A=this;return new n.Promise(function(H,Y){if(!v||!(0,$.default)(v))throw new Error("Invalid id");A.channel.call({method:"deleteAsset",params:v,success:function(B){H(B)},error:function(B){Y(B)}})})}},{key:"deleteLiability",value:function(v){var A=this;return new n.Promise(function(H,Y){if(!v||!(0,$.default)(v))throw new Error("Invalid id");A.channel.call({method:"deleteLiability",params:v,success:function(B){H(B)},error:function(B){Y(B)}})})}},{key:"downloadDocument",value:function(v){var A=this;return new n.Promise(function(H,Y){if(!v||!(0,$.default)(v))throw new Error("Invalid id");A.channel.call({method:"downloadDocument",params:v,success:function(){H()},error:function(B){Y(B)}})})}},{key:"upgradePremium",value:function(){var v=this;return new n.Promise(function(A,H){v.channel.call({method:"upgradePremium",success:function(){A()},error:function(N){H(N)}})})}},{key:"getSharings",value:function(){var v=this;return new n.Promise(function(A,H){v.channel.call({method:"getSharings",success:function(N){A(N)},error:function(N){H(N)}})})}},{key:"switchUser",value:function(v){var A=this;return new n.Promise(function(H,Y){if(!v||!(0,$.default)(v))throw new Error("Invalid id");A.channel.call({method:"switchUser",params:v,success:function(){H()},error:function(B){Y(B)}})})}},{key:"destroy",value:function(){this.channel.destroy()}}]),D}(M.default);o.exports=re},248:o=>{var d=function(){function ne(q,$){for(var y=0;y<$.length;y++){var T=$[y];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(q,T.key,T)}}return function(q,$,y){return $&&ne(q.prototype,$),y&&ne(q,y),q}}();function E(ne,q){if(!(ne instanceof q))throw new TypeError("Cannot call a class as a function")}var U=function(){function ne(q){E(this,ne),this.addon=q}return d(ne,[{key:"getAssets",value:function($){return this.addon.request({method:"GET",endpoint:"assets",query:$})}},{key:"getCurrencies",value:function($){return this.addon.request({method:"GET",endpoint:"currencies",query:$})}},{key:"getInstitutions",value:function($){return this.addon.request({method:"GET",endpoint:"institutions",query:$})}},{key:"getInstitution",value:function($){return this.addon.request({method:"GET",endpoint:"institutions/"+$})}},{key:"pollInstitution",value:function($,y){return this.addon.request({method:"GET",endpoint:"institutions/"+$+"/poll?v="+y})}},{key:"syncInstitution",value:function($){return this.addon.request({method:"POST",endpoint:"institutions/"+$+"/sync"})}},{key:"addInstitution",value:function($){return console.warn("DEPRECATED: `addon.api.addInstitution`. Use `addon.addInstitution instead.`"),this.addon.request({method:"POST",endpoint:"institutions",body:$})}},{key:"getLiabilities",value:function($){return this.addon.request({method:"GET",endpoint:"liabilities",query:$})}},{key:"getPositions",value:function($){return this.addon.request({method:"GET",endpoint:"positions",query:$})}},{key:"getTransactions",value:function($){return this.addon.request({method:"GET",endpoint:"transactions",query:$})}},{key:"updateTransaction",value:function($){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.addon.request({method:"PUT",endpoint:"transactions/"+$,body:y})}},{key:"getUser",value:function(){return this.addon.request({method:"GET",endpoint:"users/me"})}}]),ne}();o.exports=U},249:(o,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.default={heightCalculationMethod:function(){var U=document,ne=U.body,q=U.documentElement;return Math.max.apply(null,[ne.scrollHeight,ne.offsetHeight,q.offsetHeight])}}},702:function(o,d,E){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(U,ne){o.exports=ne()})(this,function(){function U(l){var w=typeof l;return l!==null&&(w==="object"||w==="function")}function ne(l){return typeof l=="function"}var q=void 0;Array.isArray?q=Array.isArray:q=function(l){return Object.prototype.toString.call(l)==="[object Array]"};var $=q,y=0,T=void 0,g=void 0,O=function(w,f){re[y]=w,re[y+1]=f,y+=2,y===2&&(g?g(P):h())};function x(l){g=l}function j(l){O=l}var M=typeof window<"u"?window:void 0,n=M||{},R=n.MutationObserver||n.WebKitMutationObserver,r=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",V=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function ie(){return function(){return process.nextTick(P)}}function G(){return typeof T<"u"?function(){T(P)}:De()}function we(){var l=0,w=new R(P),f=document.createTextNode("");return w.observe(f,{characterData:!0}),function(){f.data=l=++l%2}}function _e(){var l=new MessageChannel;return l.port1.onmessage=P,function(){return l.port2.postMessage(0)}}function De(){var l=setTimeout;return function(){return l(P,1)}}var re=new Array(1e3);function P(){for(var l=0;l<y;l+=2){var w=re[l],f=re[l+1];w(f),re[l]=void 0,re[l+1]=void 0}y=0}function D(){try{var l=Function("return this")().require("vertx");return T=l.runOnLoop||l.runOnContext,G()}catch{return De()}}var h=void 0;r?h=ie():R?h=we():V?h=_e():M===void 0?h=D():h=De();function v(l,w){var f=this,C=new this.constructor(Y);C[H]===void 0&&F(C);var S=f._state;if(S){var L=arguments[S-1];O(function(){return at(S,C,L,f._result)})}else nt(f,C,l,w);return C}function A(l){var w=this;if(l&&typeof l=="object"&&l.constructor===w)return l;var f=new w(Y);return We(f,l),f}var H=Math.random().toString(36).substring(2);function Y(){}var N=void 0,B=1,ge=2;function pe(){return new TypeError("You cannot resolve a promise with itself")}function Ue(){return new TypeError("A promises callback cannot return that same promise.")}function me(l,w,f,C){try{l.call(w,f,C)}catch(S){return S}}function Ee(l,w,f){O(function(C){var S=!1,L=me(f,w,function(Ce){S||(S=!0,w!==Ce?We(C,Ce):Je(C,Ce))},function(Ce){S||(S=!0,ze(C,Ce))},"Settle: "+(C._label||" unknown promise"));!S&&L&&(S=!0,ze(C,L))},l)}function xe(l,w){w._state===B?Je(l,w._result):w._state===ge?ze(l,w._result):nt(w,void 0,function(f){return We(l,f)},function(f){return ze(l,f)})}function Oe(l,w,f){w.constructor===l.constructor&&f===v&&w.constructor.resolve===A?xe(l,w):f===void 0?Je(l,w):ne(f)?Ee(l,w,f):Je(l,w)}function We(l,w){if(l===w)ze(l,pe());else if(U(w)){var f=void 0;try{f=w.then}catch(C){ze(l,C);return}Oe(l,w,f)}else Je(l,w)}function Re(l){l._onerror&&l._onerror(l._result),Ze(l)}function Je(l,w){l._state===N&&(l._result=w,l._state=B,l._subscribers.length!==0&&O(Ze,l))}function ze(l,w){l._state===N&&(l._state=ge,l._result=w,O(Re,l))}function nt(l,w,f,C){var S=l._subscribers,L=S.length;l._onerror=null,S[L]=w,S[L+B]=f,S[L+ge]=C,L===0&&l._state&&O(Ze,l)}function Ze(l){var w=l._subscribers,f=l._state;if(w.length!==0){for(var C=void 0,S=void 0,L=l._result,Ce=0;Ce<w.length;Ce+=3)C=w[Ce],S=w[Ce+f],C?at(f,C,S,L):S(L);l._subscribers.length=0}}function at(l,w,f,C){var S=ne(f),L=void 0,Ce=void 0,Ne=!0;if(S){try{L=f(C)}catch(it){Ne=!1,Ce=it}if(w===L){ze(w,Ue());return}}else L=C;w._state!==N||(S&&Ne?We(w,L):Ne===!1?ze(w,Ce):l===B?Je(w,L):l===ge&&ze(w,L))}function m(l,w){try{w(function(C){We(l,C)},function(C){ze(l,C)})}catch(f){ze(l,f)}}var Q=0;function u(){return Q++}function F(l){l[H]=Q++,l._state=void 0,l._result=void 0,l._subscribers=[]}function Z(){return new Error("Array Methods must be provided an Array")}var K=function(){function l(w,f){this._instanceConstructor=w,this.promise=new w(Y),this.promise[H]||F(this.promise),$(f)?(this.length=f.length,this._remaining=f.length,this._result=new Array(this.length),this.length===0?Je(this.promise,this._result):(this.length=this.length||0,this._enumerate(f),this._remaining===0&&Je(this.promise,this._result))):ze(this.promise,Z())}return l.prototype._enumerate=function(f){for(var C=0;this._state===N&&C<f.length;C++)this._eachEntry(f[C],C)},l.prototype._eachEntry=function(f,C){var S=this._instanceConstructor,L=S.resolve;if(L===A){var Ce=void 0,Ne=void 0,it=!1;try{Ce=f.then}catch(Ye){it=!0,Ne=Ye}if(Ce===v&&f._state!==N)this._settledAt(f._state,C,f._result);else if(typeof Ce!="function")this._remaining--,this._result[C]=f;else if(S===_){var ht=new S(Y);it?ze(ht,Ne):Oe(ht,f,Ce),this._willSettleAt(ht,C)}else this._willSettleAt(new S(function(Ye){return Ye(f)}),C)}else this._willSettleAt(L(f),C)},l.prototype._settledAt=function(f,C,S){var L=this.promise;L._state===N&&(this._remaining--,f===ge?ze(L,S):this._result[C]=S),this._remaining===0&&Je(L,this._result)},l.prototype._willSettleAt=function(f,C){var S=this;nt(f,void 0,function(L){return S._settledAt(B,C,L)},function(L){return S._settledAt(ge,C,L)})},l}();function ae(l){return new K(this,l).promise}function be(l){var w=this;return $(l)?new w(function(f,C){for(var S=l.length,L=0;L<S;L++)w.resolve(l[L]).then(f,C)}):new w(function(f,C){return C(new TypeError("You must pass an array to race."))})}function je(l){var w=this,f=new w(Y);return ze(f,l),f}function ce(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Ve(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var _=function(){function l(w){this[H]=u(),this._result=this._state=void 0,this._subscribers=[],Y!==w&&(typeof w!="function"&&ce(),this instanceof l?m(this,w):Ve())}return l.prototype.catch=function(f){return this.then(null,f)},l.prototype.finally=function(f){var C=this,S=C.constructor;return ne(f)?C.then(function(L){return S.resolve(f()).then(function(){return L})},function(L){return S.resolve(f()).then(function(){throw L})}):C.then(f,f)},l}();_.prototype.then=v,_.all=ae,_.race=be,_.resolve=A,_.reject=je,_._setScheduler=x,_._setAsap=j,_._asap=O;function W(){var l=void 0;if(typeof E.g<"u")l=E.g;else if(typeof self<"u")l=self;else try{l=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var w=l.Promise;if(w){var f=null;try{f=Object.prototype.toString.call(w.resolve())}catch{}if(f==="[object Promise]"&&!w.cast)return}l.Promise=_}return _.polyfill=W,_.Promise=_,_})},729:o=>{var d=Object.prototype.hasOwnProperty,E="~";function U(){}Object.create&&(U.prototype=Object.create(null),new U().__proto__||(E=!1));function ne(T,g,O){this.fn=T,this.context=g,this.once=O||!1}function q(T,g,O,x,j){if(typeof O!="function")throw new TypeError("The listener must be a function");var M=new ne(O,x||T,j),n=E?E+g:g;return T._events[n]?T._events[n].fn?T._events[n]=[T._events[n],M]:T._events[n].push(M):(T._events[n]=M,T._eventsCount++),T}function $(T,g){--T._eventsCount===0?T._events=new U:delete T._events[g]}function y(){this._events=new U,this._eventsCount=0}y.prototype.eventNames=function(){var g=[],O,x;if(this._eventsCount===0)return g;for(x in O=this._events)d.call(O,x)&&g.push(E?x.slice(1):x);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(O)):g},y.prototype.listeners=function(g){var O=E?E+g:g,x=this._events[O];if(!x)return[];if(x.fn)return[x.fn];for(var j=0,M=x.length,n=new Array(M);j<M;j++)n[j]=x[j].fn;return n},y.prototype.listenerCount=function(g){var O=E?E+g:g,x=this._events[O];return x?x.fn?1:x.length:0},y.prototype.emit=function(g,O,x,j,M,n){var R=E?E+g:g;if(!this._events[R])return!1;var r=this._events[R],V=arguments.length,ie,G;if(r.fn){switch(r.once&&this.removeListener(g,r.fn,void 0,!0),V){case 1:return r.fn.call(r.context),!0;case 2:return r.fn.call(r.context,O),!0;case 3:return r.fn.call(r.context,O,x),!0;case 4:return r.fn.call(r.context,O,x,j),!0;case 5:return r.fn.call(r.context,O,x,j,M),!0;case 6:return r.fn.call(r.context,O,x,j,M,n),!0}for(G=1,ie=new Array(V-1);G<V;G++)ie[G-1]=arguments[G];r.fn.apply(r.context,ie)}else{var we=r.length,_e;for(G=0;G<we;G++)switch(r[G].once&&this.removeListener(g,r[G].fn,void 0,!0),V){case 1:r[G].fn.call(r[G].context);break;case 2:r[G].fn.call(r[G].context,O);break;case 3:r[G].fn.call(r[G].context,O,x);break;case 4:r[G].fn.call(r[G].context,O,x,j);break;default:if(!ie)for(_e=1,ie=new Array(V-1);_e<V;_e++)ie[_e-1]=arguments[_e];r[G].fn.apply(r[G].context,ie)}}return!0},y.prototype.on=function(g,O,x){return q(this,g,O,x,!1)},y.prototype.once=function(g,O,x){return q(this,g,O,x,!0)},y.prototype.removeListener=function(g,O,x,j){var M=E?E+g:g;if(!this._events[M])return this;if(!O)return $(this,M),this;var n=this._events[M];if(n.fn)n.fn===O&&(!j||n.once)&&(!x||n.context===x)&&$(this,M);else{for(var R=0,r=[],V=n.length;R<V;R++)(n[R].fn!==O||j&&!n[R].once||x&&n[R].context!==x)&&r.push(n[R]);r.length?this._events[M]=r.length===1?r[0]:r:$(this,M)}return this},y.prototype.removeAllListeners=function(g){var O;return g?(O=E?E+g:g,this._events[O]&&$(this,O)):(this._events=new U,this._eventsCount=0),this},y.prototype.off=y.prototype.removeListener,y.prototype.addListener=y.prototype.on,y.prefixed=E,y.EventEmitter=y,o.exports=y},303:(o,d,E)=>{o.exports=E(683)},402:o=>{(function(d){if(typeof window>"u")return;var E=!0,U=10,ne="",q=0,$="",y=null,T="",g=!1,O={resize:1,click:1},x=128,j=!0,M=1,n="bodyOffset",R=n,r=!0,V="",ie={},G=32,we=null,_e=!1,De="[iFrameSizer]",re=De.length,P="",D={max:1,min:1,bodyScroll:1,documentElementScroll:1},h="child",v=!0,A=window.parent,H="*",Y=0,N=!1,B=null,ge=16,pe=1,Ue="scroll",me=Ue,Ee=window,xe=function(){F("MessageCallback function not defined")},Oe=function(){},We=function(){},Re={height:function(){return F("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return F("Custom width calculation function not defined"),document.body.scrollWidth}},Je={};function ze(a,p,z){"addEventListener"in window?a.addEventListener(p,z,!1):"attachEvent"in window&&a.attachEvent("on"+p,z)}function nt(a,p,z){"removeEventListener"in window?a.removeEventListener(p,z,!1):"detachEvent"in window&&a.detachEvent("on"+p,z)}function Ze(a){return a.charAt(0).toUpperCase()+a.slice(1)}function at(a){var p,z,oe,de=null,Ae=0,Se=function(){Ae=m(),de=null,oe=a.apply(p,z),de||(p=z=null)};return function(){var Fe=m();Ae||(Ae=Fe);var ve=ge-(Fe-Ae);return p=this,z=arguments,ve<=0||ve>ge?(de&&(clearTimeout(de),de=null),Ae=Fe,oe=a.apply(p,z),de||(p=z=null)):de||(de=setTimeout(Se,ve)),oe}}var m=Date.now||function(){return new Date().getTime()};function Q(a){return De+"["+P+"] "+a}function u(a){_e&&typeof window.console=="object"&&console.log(Q(a))}function F(a){typeof window.console=="object"&&console.warn(Q(a))}function Z(){K(),u("Initialising iFrame ("+location.href+")"),ae(),ce(),je("background",ne),je("padding",T),ht(),w(),f(),Ve(),qe(),C(),ie=Ye(),gt("init","Init message from host page"),Oe()}function K(){function a(z){return z==="true"}var p=V.substr(re).split(":");P=p[0],q=d!==p[1]?Number(p[1]):q,g=d!==p[2]?a(p[2]):g,_e=d!==p[3]?a(p[3]):_e,G=d!==p[4]?Number(p[4]):G,E=d!==p[6]?a(p[6]):E,$=p[7],R=d!==p[8]?p[8]:R,ne=p[9],T=p[10],Y=d!==p[11]?Number(p[11]):Y,ie.enable=d!==p[12]?a(p[12]):!1,h=d!==p[13]?p[13]:h,me=d!==p[14]?p[14]:me}function ae(){function a(){var z=window.iFrameResizer;u("Reading data from page: "+JSON.stringify(z)),xe="messageCallback"in z?z.messageCallback:xe,Oe="readyCallback"in z?z.readyCallback:Oe,H="targetOrigin"in z?z.targetOrigin:H,R="heightCalculationMethod"in z?z.heightCalculationMethod:R,me="widthCalculationMethod"in z?z.widthCalculationMethod:me}function p(z,oe){return typeof z=="function"&&(u("Setup custom "+oe+"CalcMethod"),Re[oe]=z,z="custom"),z}"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(a(),R=p(R,"height"),me=p(me,"width")),u("TargetOrigin for parent set to: "+H)}function be(a,p){return p.indexOf("-")!==-1&&(F("Negative CSS value ignored for "+a),p=""),p}function je(a,p){d!==p&&p!==""&&p!=="null"&&(document.body.style[a]=p,u("Body "+a+' set to "'+p+'"'))}function ce(){d===$&&($=q+"px"),je("margin",be("margin",$))}function Ve(){document.documentElement.style.height="",document.body.style.height="",u('HTML & body height set to "auto"')}function _(a){var p={add:function(z){function oe(){gt(a.eventName,a.eventType)}Je[z]=oe,ze(window,z,oe)},remove:function(z){var oe=Je[z];delete Je[z],nt(window,z,oe)}};a.eventNames&&Array.prototype.map?(a.eventName=a.eventNames[0],a.eventNames.map(p[a.method])):p[a.method](a.eventName),u(Ze(a.method)+" event listener: "+a.eventType)}function W(a){_({method:a,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),_({method:a,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),_({method:a,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),_({method:a,eventType:"Input",eventName:"input"}),_({method:a,eventType:"Mouse Up",eventName:"mouseup"}),_({method:a,eventType:"Mouse Down",eventName:"mousedown"}),_({method:a,eventType:"Orientation Change",eventName:"orientationchange"}),_({method:a,eventType:"Print",eventName:["afterprint","beforeprint"]}),_({method:a,eventType:"Ready State Change",eventName:"readystatechange"}),_({method:a,eventType:"Touch Start",eventName:"touchstart"}),_({method:a,eventType:"Touch End",eventName:"touchend"}),_({method:a,eventType:"Touch Cancel",eventName:"touchcancel"}),_({method:a,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),_({method:a,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),_({method:a,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),h==="child"&&_({method:a,eventType:"IFrame Resized",eventName:"resize"})}function l(a,p,z,oe){return p!==a&&(a in z||(F(a+" is not a valid option for "+oe+"CalculationMethod."),a=p),u(oe+' calculation method set to "'+a+'"')),a}function w(){R=l(R,n,Ke,"height")}function f(){me=l(me,Ue,ut,"width")}function C(){E===!0?(W("add"),X()):u("Auto Resize disabled")}function S(){u("Disable outgoing messages"),v=!1}function L(){u("Remove event listener: Message"),nt(window,"message",b)}function Ce(){y!==null&&y.disconnect()}function Ne(){W("remove"),Ce(),clearInterval(we)}function it(){S(),L(),E===!0&&Ne()}function ht(){var a=document.createElement("div");a.style.clear="both",a.style.display="block",document.body.appendChild(a)}function Ye(){function a(){return{x:window.pageXOffset!==d?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==d?window.pageYOffset:document.documentElement.scrollTop}}function p(ve){var fe=ve.getBoundingClientRect(),Pe=a();return{x:parseInt(fe.left,10)+parseInt(Pe.x,10),y:parseInt(fe.top,10)+parseInt(Pe.y,10)}}function z(ve){function fe(lt){var kt=p(lt);u("Moving to in page link (#"+Pe+") at x: "+kt.x+" y: "+kt.y),ct(kt.y,kt.x,"scrollToOffset")}var Pe=ve.split("#")[1]||ve,Te=decodeURIComponent(Pe),Qe=document.getElementById(Te)||document.getElementsByName(Te)[0];d!==Qe?fe(Qe):(u("In page link (#"+Pe+") not found in iFrame, so sending to parent"),ct(0,0,"inPageLink","#"+Pe))}function oe(){location.hash!==""&&location.hash!=="#"&&z(location.href)}function de(){function ve(fe){function Pe(Te){Te.preventDefault(),z(this.getAttribute("href"))}fe.getAttribute("href")!=="#"&&ze(fe,"click",Pe)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),ve)}function Ae(){ze(window,"hashchange",oe)}function Se(){setTimeout(oe,x)}function Fe(){Array.prototype.forEach&&document.querySelectorAll?(u("Setting up location.hash handlers"),de(),Ae(),Se()):F("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}return ie.enable?Fe():u("In page linking not enabled"),{findTarget:z}}function qe(){u("Enable public methods"),Ee.parentIFrame={autoResize:function(p){return p===!0&&E===!1?(E=!0,C()):p===!1&&E===!0&&(E=!1,Ne()),E},close:function(){ct(0,0,"close"),it()},getId:function(){return P},getPageInfo:function(p){typeof p=="function"?(We=p,ct(0,0,"pageInfo")):(We=function(){},ct(0,0,"pageInfoStop"))},moveToAnchor:function(p){ie.findTarget(p)},reset:function(){Ot("parentIFrame.reset")},scrollTo:function(p,z){ct(z,p,"scrollTo")},scrollToOffset:function(p,z){ct(z,p,"scrollToOffset")},sendMessage:function(p,z){ct(0,0,"message",JSON.stringify(p),z)},setHeightCalculationMethod:function(p){R=p,w()},setWidthCalculationMethod:function(p){me=p,f()},setTargetOrigin:function(p){u("Set targetOrigin: "+p),H=p},size:function(p,z){var oe=""+(p||"")+(z?","+z:"");gt("size","parentIFrame.size("+oe+")",p,z)}}}function le(){G!==0&&(u("setInterval: "+G+"ms"),we=setInterval(function(){gt("interval","setInterval: "+G)},Math.abs(G)))}function ee(){function a(Te){function Qe(lt){lt.complete===!1&&(u("Attach listeners to "+lt.src),lt.addEventListener("load",de,!1),lt.addEventListener("error",Ae,!1),ve.push(lt))}Te.type==="attributes"&&Te.attributeName==="src"?Qe(Te.target):Te.type==="childList"&&Array.prototype.forEach.call(Te.target.querySelectorAll("img"),Qe)}function p(Te){ve.splice(ve.indexOf(Te),1)}function z(Te){u("Remove listeners from "+Te.src),Te.removeEventListener("load",de,!1),Te.removeEventListener("error",Ae,!1),p(Te)}function oe(Te,Qe,lt){z(Te.target),gt(Qe,lt+": "+Te.target.src,d,d)}function de(Te){oe(Te,"imageLoad","Image loaded")}function Ae(Te){oe(Te,"imageLoadFailed","Image load failed")}function Se(Te){gt("mutationObserver","mutationObserver: "+Te[0].target+" "+Te[0].type),Te.forEach(a)}function Fe(){var Te=document.querySelector("body"),Qe={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return Pe=new fe(Se),u("Create body MutationObserver"),Pe.observe(Te,Qe),Pe}var ve=[],fe=window.MutationObserver||window.WebKitMutationObserver,Pe=Fe();return{disconnect:function(){"disconnect"in Pe&&(u("Disconnect body MutationObserver"),Pe.disconnect(),ve.forEach(z))}}}function X(){var a=0>G;window.MutationObserver||window.WebKitMutationObserver?a?le():y=ee():(u("MutationObserver not supported in this browser!"),le())}function te(a,p){function z(de){var Ae=/^\d+(px)?$/i;if(Ae.test(de))return parseInt(de,U);var Se=p.style.left,Fe=p.runtimeStyle.left;return p.runtimeStyle.left=p.currentStyle.left,p.style.left=de||0,de=p.style.pixelLeft,p.style.left=Se,p.runtimeStyle.left=Fe,de}var oe=0;return p=p||document.body,"defaultView"in document&&"getComputedStyle"in document.defaultView?(oe=document.defaultView.getComputedStyle(p,null),oe=oe!==null?oe[a]:0):oe=z(p.currentStyle[a]),parseInt(oe,U)}function ue(a){a>ge/2&&(ge=2*a,u("Event throttle increased to "+ge+"ms"))}function Me(a,p){for(var z=p.length,oe=0,de=0,Ae=Ze(a),Se=m(),Fe=0;Fe<z;Fe++)oe=p[Fe].getBoundingClientRect()[a]+te("margin"+Ae,p[Fe]),oe>de&&(de=oe);return Se=m()-Se,u("Parsed "+z+" HTML elements"),u("Element position calculated in "+Se+"ms"),ue(Se),de}function ke(a){return[a.bodyOffset(),a.bodyScroll(),a.documentElementOffset(),a.documentElementScroll()]}function Ie(a,p){function z(){return F("No tagged elements ("+p+") found on page"),document.querySelectorAll("body *")}var oe=document.querySelectorAll("["+p+"]");return oe.length===0&&z(),Me(a,oe)}function Be(){return document.querySelectorAll("body *")}var Ke={bodyOffset:function(){return document.body.offsetHeight+te("marginTop")+te("marginBottom")},offset:function(){return Ke.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return Re.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,ke(Ke))},min:function(){return Math.min.apply(null,ke(Ke))},grow:function(){return Ke.max()},lowestElement:function(){return Math.max(Ke.bodyOffset(),Me("bottom",Be()))},taggedElement:function(){return Ie("bottom","data-iframe-height")}},ut={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return Re.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(ut.bodyScroll(),ut.documentElementScroll())},max:function(){return Math.max.apply(null,ke(ut))},min:function(){return Math.min.apply(null,ke(ut))},rightMostElement:function(){return Me("right",Be())},taggedElement:function(){return Ie("right","data-iframe-width")}};function mt(a,p,z,oe){function de(){M=Pe,pe=Te,ct(M,pe,a)}function Ae(){function Qe(lt,kt){var Ut=Math.abs(lt-kt)<=Y;return!Ut}return Pe=d!==z?z:Ke[R](),Te=d!==oe?oe:ut[me](),Qe(M,Pe)||g&&Qe(pe,Te)}function Se(){return!(a in{init:1,interval:1,size:1})}function Fe(){return R in D||g&&me in D}function ve(){u("No change in size detected")}function fe(){Se()&&Fe()?Ot(p):a in{interval:1}||ve()}var Pe,Te;Ae()||a==="init"?(xt(),de()):fe()}var Mt=at(mt);function gt(a,p,z,oe){function de(){a in{reset:1,resetPage:1,init:1}||u("Trigger event: "+p)}function Ae(){return N&&a in O}Ae()?u("Trigger event cancelled: "+a):(de(),Mt(a,p,z,oe))}function xt(){N||(N=!0,u("Trigger event lock on")),clearTimeout(B),B=setTimeout(function(){N=!1,u("Trigger event lock off"),u("--")},x)}function st(a){M=Ke[R](),pe=ut[me](),ct(M,pe,a)}function Ot(a){var p=R;R=n,u("Reset trigger event: "+a),xt(),st("reset"),R=p}function ct(a,p,z,oe,de){function Ae(){d===de?de=H:u("Message targetOrigin: "+de)}function Se(){var Fe=a+":"+p,ve=P+":"+Fe+":"+z+(d!==oe?":"+oe:"");u("Sending message to host page ("+ve+")"),A.postMessage(De+ve,de)}v===!0&&(Ae(),Se())}function b(a){var p={init:function(){function Pe(){V=a.data,A=a.source,Z(),j=!1,setTimeout(function(){r=!1},x)}document.readyState==="interactive"||document.readyState==="complete"?Pe():(u("Waiting for page ready"),ze(window,"readystatechange",p.initFromParent))},reset:function(){r?u("Page reset ignored by init"):(u("Page size reset by host page"),st("resetPage"))},resize:function(){gt("resizeParent","Parent window requested size check")},moveToAnchor:function(){ie.findTarget(de())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var Pe=de();u("PageInfoFromParent called from parent: "+Pe),We(JSON.parse(Pe)),u(" --")},message:function(){var Pe=de();u("MessageCallback called from parent: "+Pe),xe(JSON.parse(Pe)),u(" --")}};function z(){return De===(""+a.data).substr(0,re)}function oe(){return a.data.split("]")[1].split(":")[0]}function de(){return a.data.substr(a.data.indexOf(":")+1)}function Ae(){return!o.exports&&"iFrameResize"in window}function Se(){return a.data.split(":")[2]in{true:1,false:1}}function Fe(){var fe=oe();fe in p?p[fe]():!Ae()&&!Se()&&F("Unexpected message ("+a.data+")")}function ve(){j===!1?Fe():Se()?p.init():u('Ignored message of type "'+oe()+'". Received before initialization.')}z()&&ve()}function I(){document.readyState!=="loading"&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}ze(window,"message",b),I()})()},28:(o,d)=>{var E,U,ne;(function(q){if(typeof window>"u")return;var $=0,y=!1,T=!1,g="message",O=g.length,x="[iFrameSizer]",j=x.length,M=null,n=window.requestAnimationFrame,R={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},r={},V=null,ie={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){v("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}};function G(u,F,Z){"addEventListener"in window?u.addEventListener(F,Z,!1):"attachEvent"in window&&u.attachEvent("on"+F,Z)}function we(u,F,Z){"removeEventListener"in window?u.removeEventListener(F,Z,!1):"detachEvent"in window&&u.detachEvent("on"+F,Z)}function _e(){var u=["moz","webkit","o","ms"],F;for(F=0;F<u.length&&!n;F+=1)n=window[u[F]+"RequestAnimationFrame"];n||D("setup","RequestAnimationFrame not supported")}function De(u){var F="Host page: "+u;return window.top!==window.self&&(window.parentIFrame&&window.parentIFrame.getId?F=window.parentIFrame.getId()+": "+u:F="Nested host page: "+u),F}function re(u){return x+"["+De(u)+"]"}function P(u){return r[u]?r[u].log:y}function D(u,F){A("log",u,F,P(u))}function h(u,F){A("info",u,F,P(u))}function v(u,F){A("warn",u,F,!0)}function A(u,F,Z,K){K===!0&&typeof window.console=="object"&&console[u](re(F),Z)}function H(u){function F(){function te(){me(ee),ge(X),Ne("resizedCallback",ee)}K("Height"),K("Width"),Ee(te,ee,"init")}function Z(){var te=le.substr(j).split(":");return{iframe:r[te[0]]&&r[te[0]].iframe,id:te[0],height:te[1],width:te[2],type:te[3]}}function K(te){var ue=Number(r[X]["max"+te]),Me=Number(r[X]["min"+te]),ke=te.toLowerCase(),Ie=Number(ee[ke]);D(X,"Checking "+ke+" is in range "+Me+"-"+ue),Ie<Me&&(Ie=Me,D(X,"Set "+ke+" to min value")),Ie>ue&&(Ie=ue,D(X,"Set "+ke+" to max value")),ee[ke]=""+Ie}function ae(){function te(){function ke(){var Be=0,Ke=!1;for(D(X,"Checking connection is from allowed list of origins: "+Me);Be<Me.length;Be++)if(Me[Be]===ue){Ke=!0;break}return Ke}function Ie(){var Be=r[X]&&r[X].remoteHost;return D(X,"Checking connection is from: "+Be),ue===Be}return Me.constructor===Array?ke():Ie()}var ue=u.origin,Me=r[X]&&r[X].checkOrigin;if(Me&&""+ue!="null"&&!te())throw new Error("Unexpected message received from: "+ue+" for "+ee.iframe.id+". Message was: "+u.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function be(){return x===(""+le).substr(0,j)&&le.substr(j).split(":")[0]in r}function je(){var te=ee.type in{true:1,false:1,undefined:1};return te&&D(X,"Ignoring init message from meta parent page"),te}function ce(te){return le.substr(le.indexOf(":")+O+te)}function Ve(te){D(X,"MessageCallback passed: {iframe: "+ee.iframe.id+", message: "+te+"}"),Ne("messageCallback",{iframe:ee.iframe,message:JSON.parse(te)}),D(X,"--")}function _(){var te=document.body.getBoundingClientRect(),ue=ee.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:ue.height,iframeWidth:ue.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(ue.top-te.top,10),offsetLeft:parseInt(ue.left-te.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset})}function W(te,ue){function Me(){xe("Send Page Info","pageInfo:"+_(),te,ue)}Re(Me,32)}function l(){function te(Ie,Be){function Ke(){r[ke]?W(r[ke].iframe,ke):ue()}["scroll","resize"].forEach(function(ut){D(ke,Ie+ut+" listener for sendPageInfo"),Be(window,ut,Ke)})}function ue(){te("Remove ",we)}function Me(){te("Add ",G)}var ke=X;Me(),r[ke]&&(r[ke].stopPageInfo=ue)}function w(){r[X]&&r[X].stopPageInfo&&(r[X].stopPageInfo(),delete r[X].stopPageInfo)}function f(){var te=!0;return ee.iframe===null&&(v(X,"IFrame ("+ee.id+") not found"),te=!1),te}function C(te){var ue=te.getBoundingClientRect();return B(X),{x:Math.floor(Number(ue.left)+Number(M.x)),y:Math.floor(Number(ue.top)+Number(M.y))}}function S(te){function ue(){M=Be,L(),D(X,"--")}function Me(){return{x:Number(ee.width)+Ie.x,y:Number(ee.height)+Ie.y}}function ke(){window.parentIFrame?window.parentIFrame["scrollTo"+(te?"Offset":"")](Be.x,Be.y):v(X,"Unable to scroll to requested position, window.parentIFrame not found")}var Ie=te?C(ee.iframe):{x:0,y:0},Be=Me();D(X,"Reposition requested from iFrame (offset x:"+Ie.x+" y:"+Ie.y+")"),window.top!==window.self?ke():ue()}function L(){Ne("scrollCallback",M)!==!1?ge(X):pe()}function Ce(te){function ue(){var Ke=C(Be);D(X,"Moving to in page link (#"+ke+") at x: "+Ke.x+" y: "+Ke.y),M={x:Ke.x,y:Ke.y},L(),D(X,"--")}function Me(){window.parentIFrame?window.parentIFrame.moveToAnchor(ke):D(X,"In page link #"+ke+" not found and window.parentIFrame not found")}var ke=te.split("#")[1]||"",Ie=decodeURIComponent(ke),Be=document.getElementById(Ie)||document.getElementsByName(Ie)[0];Be?ue():window.top!==window.self?Me():D(X,"In page link #"+ke+" not found")}function Ne(te,ue){return Y(X,te,ue)}function it(){switch(r[X]&&r[X].firstRun&&qe(),ee.type){case"close":r[X].closeRequestCallback?Y(X,"closeRequestCallback",r[X].iframe):N(ee.iframe);break;case"message":Ve(ce(6));break;case"scrollTo":S(!1);break;case"scrollToOffset":S(!0);break;case"pageInfo":W(r[X]&&r[X].iframe,X),l();break;case"pageInfoStop":w();break;case"inPageLink":Ce(ce(9));break;case"reset":Ue(ee);break;case"init":F(),Ne("initCallback",ee.iframe);break;default:F()}}function ht(te){var ue=!0;return r[te]||(ue=!1,v(ee.type+" No settings for "+te+". Message was: "+le)),ue}function Ye(){for(var te in r)xe("iFrame requested init",Oe(te),document.getElementById(te),te)}function qe(){r[X]&&(r[X].firstRun=!1)}var le=u.data,ee={},X=null;le==="[iFrameResizerChild]Ready"?Ye():be()?(ee=Z(),X=ee.id,r[X]&&(r[X].loaded=!0),!je()&&ht(X)&&(D(X,"Received: "+le),f()&&ae()&&it())):h(X,"Ignored: "+le)}function Y(u,F,Z){var K=null,ae=null;if(r[u])if(K=r[u][F],typeof K=="function")ae=K(Z);else throw new TypeError(F+" on iFrame["+u+"] is not a function");return ae}function N(u){var F=u.id;D(F,"Removing iFrame: "+F),u.parentNode&&u.parentNode.removeChild(u),Y(F,"closedCallback",F),D(F,"--"),delete r[F]}function B(u){M===null&&(M={x:window.pageXOffset!==q?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==q?window.pageYOffset:document.documentElement.scrollTop},D(u,"Get page position: "+M.x+","+M.y))}function ge(u){M!==null&&(window.scrollTo(M.x,M.y),D(u,"Set page position: "+M.x+","+M.y),pe())}function pe(){M=null}function Ue(u){function F(){me(u),xe("reset","reset",u.iframe,u.id)}D(u.id,"Size reset requested by "+(u.type==="init"?"host page":"iFrame")),B(u.id),Ee(F,u,"reset")}function me(u){function F(be){u.iframe.style[be]=u[be]+"px",D(u.id,"IFrame ("+ae+") "+be+" set to "+u[be]+"px")}function Z(be){!T&&u[be]==="0"&&(T=!0,D(ae,"Hidden iFrame detected, creating visibility listener"),Je())}function K(be){F(be),Z(be)}var ae=u.iframe.id;r[ae]&&(r[ae].sizeHeight&&K("height"),r[ae].sizeWidth&&K("width"))}function Ee(u,F,Z){Z!==F.type&&n?(D(F.id,"Requesting animation frame"),n(u)):u()}function xe(u,F,Z,K,ae){function be(){var W=r[K]&&r[K].targetOrigin;D(K,"["+u+"] Sending msg to iframe["+K+"] ("+F+") targetOrigin: "+W),Z.contentWindow.postMessage(x+F,W)}function je(){v(K,"["+u+"] IFrame("+K+") not found")}function ce(){Z&&"contentWindow"in Z&&Z.contentWindow!==null?be():je()}function Ve(){function W(){r[K]&&!r[K].loaded&&!_&&(_=!0,v(K,"IFrame has not responded within "+r[K].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ingored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}ae&&r[K]&&r[K].warningTimeout&&(r[K].msgTimeout=setTimeout(W,r[K].warningTimeout))}var _=!1;K=K||Z.id,r[K]&&(ce(),Ve())}function Oe(u){return u+":"+r[u].bodyMarginV1+":"+r[u].sizeWidth+":"+r[u].log+":"+r[u].interval+":"+r[u].enablePublicMethods+":"+r[u].autoResize+":"+r[u].bodyMargin+":"+r[u].heightCalculationMethod+":"+r[u].bodyBackground+":"+r[u].bodyPadding+":"+r[u].tolerance+":"+r[u].inPageLinks+":"+r[u].resizeFrom+":"+r[u].widthCalculationMethod}function We(u,F){function Z(){function L(Ne){r[S][Ne]!==1/0&&r[S][Ne]!==0&&(u.style[Ne]=r[S][Ne]+"px",D(S,"Set "+Ne+" = "+r[S][Ne]+"px"))}function Ce(Ne){if(r[S]["min"+Ne]>r[S]["max"+Ne])throw new Error("Value for min"+Ne+" can not be greater than max"+Ne)}Ce("Height"),Ce("Width"),L("maxHeight"),L("minHeight"),L("maxWidth"),L("minWidth")}function K(){var L=F&&F.id||ie.id+$++;return document.getElementById(L)!==null&&(L=L+$++),L}function ae(L){return L===""&&(u.id=L=K(),y=(F||{}).log,D(L,"Added missing iframe ID: "+L+" ("+u.src+")")),L}function be(){switch(D(S,"IFrame scrolling "+(r[S]&&r[S].scrolling?"enabled":"disabled")+" for "+S),u.style.overflow=(r[S]&&r[S].scrolling)===!1?"hidden":"auto",r[S]&&r[S].scrolling){case!0:u.scrolling="yes";break;case!1:u.scrolling="no";break;default:u.scrolling=r[S]?r[S].scrolling:"no"}}function je(){(typeof(r[S]&&r[S].bodyMargin)=="number"||(r[S]&&r[S].bodyMargin)==="0")&&(r[S].bodyMarginV1=r[S].bodyMargin,r[S].bodyMargin=""+r[S].bodyMargin+"px")}function ce(){var L=r[S]&&r[S].firstRun,Ce=r[S]&&r[S].heightCalculationMethod in R;!L&&Ce&&Ue({iframe:u,height:0,width:0,type:"init"})}function Ve(){Function.prototype.bind&&r[S]&&(r[S].iframe.iFrameResizer={close:N.bind(null,r[S].iframe),resize:xe.bind(null,"Window resize","resize",r[S].iframe),moveToAnchor:function(L){xe("Move to anchor","moveToAnchor:"+L,r[S].iframe,S)},sendMessage:function(L){L=JSON.stringify(L),xe("Send Message","message:"+L,r[S].iframe,S)}})}function _(L){function Ce(){xe("iFrame.onload",L,u,q,!0),ce()}G(u,"load",Ce),xe("init",L,u,q,!0)}function W(L){if(typeof L!="object")throw new TypeError("Options is not an object")}function l(L){for(var Ce in ie)ie.hasOwnProperty(Ce)&&(r[S][Ce]=L.hasOwnProperty(Ce)?L[Ce]:ie[Ce])}function w(L){return L===""||L==="file://"?"*":L}function f(L){L=L||{},r[S]={firstRun:!0,iframe:u,remoteHost:u.src.split("/").slice(0,3).join("/")},W(L),l(L),r[S]&&(r[S].targetOrigin=r[S].checkOrigin===!0?w(r[S].remoteHost):"*")}function C(){return S in r&&"iFrameResizer"in u}var S=ae(u.id);C()?v(S,"Ignored iFrame, already setup."):(f(F),be(),Z(),je(),_(Oe(S)),Ve())}function Re(u,F){V===null&&(V=setTimeout(function(){V=null,u()},F))}function Je(){function u(){function ae(je){function ce(_){return(r[je]&&r[je].iframe.style[_])==="0px"}function Ve(_){return _.offsetParent!==null}r[je]&&Ve(r[je].iframe)&&(ce("height")||ce("width"))&&xe("Visibility change","resize",r[je].iframe,je)}for(var be in r)ae(be)}function F(ae){D("window","Mutation observed: "+ae[0].target+" "+ae[0].type),Re(u,16)}function Z(){var ae=document.querySelector("body"),be={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},je=new K(F);je.observe(ae,be)}var K=window.MutationObserver||window.WebKitMutationObserver;K&&Z()}function ze(u){function F(){Ze("Window "+u,"resize")}D("window","Trigger event: "+u),Re(F,16)}function nt(){function u(){Ze("Tab Visable","resize")}document.visibilityState!=="hidden"&&(D("document","Trigger event: Visiblity change"),Re(u,16))}function Ze(u,F){function Z(ae){return r[ae]&&r[ae].resizeFrom==="parent"&&r[ae].autoResize&&!r[ae].firstRun}for(var K in r)Z(K)&&xe(u,F,document.getElementById(K),K)}function at(){G(window,"message",H),G(window,"resize",function(){ze("resize")}),G(document,"visibilitychange",nt),G(document,"-webkit-visibilitychange",nt),G(window,"focusin",function(){ze("focus")}),G(window,"focus",function(){ze("focus")})}function m(){function u(K,ae){function be(){if(ae.tagName){if(ae.tagName.toUpperCase()!=="IFRAME")throw new TypeError("Expected <IFRAME> tag, found <"+ae.tagName+">")}else throw new TypeError("Object is not a valid DOM element")}ae&&(be(),We(ae,K),Z.push(ae))}function F(K){K&&K.enablePublicMethods&&v("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}var Z;return _e(),at(),function(ae,be){switch(Z=[],F(ae),typeof be){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(be||"iframe"),u.bind(q,ae));break;case"object":u(ae,be);break;default:throw new TypeError("Unexpected data type ("+typeof be+")")}return Z}}function Q(u){u.fn?u.fn.iFrameResize||(u.fn.iFrameResize=function(Z){function K(ae,be){We(be,Z)}return this.filter("iframe").each(K).end()}):h("","Unable to bind to jQuery, it is not fully loaded.")}window.jQuery&&Q(window.jQuery),U=[],E=m,ne=typeof E=="function"?E.apply(d,U):E,ne!==q&&(o.exports=ne)})()},683:(o,d,E)=>{d.iframeResizer=E(28),d.iframeResizerContentWindow=E(402)},457:o=>{var d=function(){var E=Math.floor(Math.random()*1000001),U={};function ne(g,O,x,j){function M(r){for(var V=0;V<r.length;V++)if(r[V].win===g)return!0;return!1}var n=!1;if(O==="*"){for(var R in U)if(U.hasOwnProperty(R)&&R!=="*"&&typeof U[R][x]=="object"&&(n=M(U[R][x]),n))break}else U["*"]&&U["*"][x]&&(n=M(U["*"][x])),!n&&U[O]&&U[O][x]&&(n=M(U[O][x]));if(n)throw"A channel is already bound to the same window which overlaps with origin '"+O+"' and has scope '"+x+"'";typeof U[O]!="object"&&(U[O]={}),typeof U[O][x]!="object"&&(U[O][x]=[]),U[O][x].push({win:g,handler:j})}function q(g,O,x){for(var j=U[O][x],M=0;M<j.length;M++)j[M].win===g&&j.splice(M,1);U[O][x].length===0&&delete U[O][x]}function $(g){return Array.isArray?Array.isArray(g):g.constructor.toString().indexOf("Array")!=-1}var y={},T=function(g){try{var O=JSON.parse(g.data);if(typeof O!="object"||O===null)throw"malformed"}catch{return}var x=g.source,j=g.origin,M,n,R;if(typeof O.method=="string"){var r=O.method.split("::");r.length==2?(M=r[0],R=r[1]):R=O.method}if(typeof O.id<"u"&&(n=O.id),typeof R=="string"){var V=!1;if(U[j]&&U[j][M]){for(var ie=0;ie<U[j][M].length;ie++)if(U[j][M][ie].win===x){U[j][M][ie].handler(j,R,O),V=!0;break}}if(!V&&U["*"]&&U["*"][M]){for(var ie=0;ie<U["*"][M].length;ie++)if(U["*"][M][ie].win===x){U["*"][M][ie].handler(j,R,O);break}}}else typeof n<"u"&&y[n]&&y[n](j,R,O)};return window.addEventListener?window.addEventListener("message",T,!1):window.attachEvent&&window.attachEvent("onmessage",T),{build:function(g){var O=function(h){if(g.debugOutput&&window.console&&window.console.log){try{typeof h!="string"&&(h=JSON.stringify(h))}catch{}console.log("["+M+"] "+h)}};if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if(typeof g!="object")throw"Channel build invoked without a proper object argument";if(!g.window||!g.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===g.window)throw"target window is same as present window -- not allowed";var x=!1;if(typeof g.origin=="string"){var j;g.origin==="*"?x=!0:(j=g.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))!==null&&(g.origin=j[0].toLowerCase(),x=!0)}if(!x)throw"Channel.build() called with an invalid origin";if(typeof g.scope<"u"){if(typeof g.scope!="string")throw"scope, when specified, must be a string";if(g.scope.split("::").length>1)throw"scope may not contain double colons: '::'"}var M=function(){for(var h="",v="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",A=0;A<5;A++)h+=v.charAt(Math.floor(Math.random()*v.length));return h}(),n={},R={},r={},V=!1,ie=[],G=function(h,v,A){var H=!1,Y=!1;return{origin:v,invoke:function(N,B){if(!r[h])throw"attempting to invoke a callback of a nonexistent transaction: "+h;for(var ge=!1,pe=0;pe<A.length;pe++)if(N===A[pe]){ge=!0;break}if(!ge)throw"request supports no such callback '"+N+"'";re({id:h,callback:N,params:B})},error:function(N,B){if(Y=!0,!r[h])throw"error called for nonexistent message: "+h;delete r[h],re({id:h,error:N,message:B})},complete:function(N){if(Y=!0,!r[h])throw"complete called for nonexistent message: "+h;delete r[h],re({id:h,result:N})},delayReturn:function(N){return typeof N=="boolean"&&(H=N===!0),H},completed:function(){return Y}}},we=function(h,v,A){return window.setTimeout(function(){if(R[h]){var H="timeout ("+v+"ms) exceeded on method '"+A+"'";(0,R[h].error)("timeout_error",H),delete R[h],delete y[h]}},v)},_e=function(h,v,A){if(typeof g.gotMessageObserver=="function")try{g.gotMessageObserver(h,A)}catch(Oe){O("gotMessageObserver() raised an exception: "+Oe.toString())}if(A.id&&v){if(n[v]){var H=G(A.id,h,A.callbacks?A.callbacks:[]);r[A.id]={};try{if(A.callbacks&&$(A.callbacks)&&A.callbacks.length>0)for(var Y=0;Y<A.callbacks.length;Y++){for(var N=A.callbacks[Y],B=A.params,ge=N.split("/"),pe=0;pe<ge.length-1;pe++){var Ue=ge[pe];typeof B[Ue]!="object"&&(B[Ue]={}),B=B[Ue]}B[ge[ge.length-1]]=function(){var Oe=N;return function(We){return H.invoke(Oe,We)}}()}var me=n[v](H,A.params);!H.delayReturn()&&!H.completed()&&H.complete(me)}catch(Oe){var Ee="runtime_error",xe=null;if(typeof Oe=="string"?xe=Oe:typeof Oe=="object"&&(Oe&&$(Oe)&&Oe.length==2?(Ee=Oe[0],xe=Oe[1]):typeof Oe.error=="string"&&(Ee=Oe.error,Oe.message?typeof Oe.message=="string"?xe=Oe.message:Oe=Oe.message:xe="")),xe===null)try{xe=JSON.stringify(Oe),typeof xe>"u"&&(xe=Oe.toString())}catch{xe=Oe.toString()}H.error(Ee,xe)}}}else A.id&&A.callback?!R[A.id]||!R[A.id].callbacks||!R[A.id].callbacks[A.callback]?O("ignoring invalid callback, id:"+A.id+" ("+A.callback+")"):R[A.id].callbacks[A.callback](A.params):A.id?R[A.id]?(A.error?(0,R[A.id].error)(A.error,A.message):A.result!==void 0?(0,R[A.id].success)(A.result):(0,R[A.id].success)(),delete R[A.id],delete y[A.id]):O("ignoring invalid response: "+A.id):v&&n[v]&&n[v]({origin:h},A.params)};ne(g.window,g.origin,typeof g.scope=="string"?g.scope:"",_e);var De=function(h){return typeof g.scope=="string"&&g.scope.length&&(h=[g.scope,h].join("::")),h},re=function(h,v){if(!h)throw"postMessage called with null message";var A=V?"post  ":"queue ";if(O(A+" message: "+JSON.stringify(h)),!v&&!V)ie.push(h);else{if(typeof g.postMessageObserver=="function")try{g.postMessageObserver(g.origin,h)}catch(H){O("postMessageObserver() raised an exception: "+H.toString())}g.window.postMessage(JSON.stringify(h),g.origin)}},P=function(h,v){if(O("ready msg received"),V)throw"received ready message while in ready state.  help!";for(v==="ping"?M+="-R":M+="-L",D.unbind("__ready"),V=!0,O("ready msg accepted."),v==="ping"&&D.notify({method:"__ready",params:"pong"});ie.length;)re(ie.pop());typeof g.onReady=="function"&&g.onReady(D)},D={unbind:function(h){if(n[h]){if(!delete n[h])throw"can't delete method: "+h;return!0}return!1},bind:function(h,v){if(!h||typeof h!="string")throw"'method' argument to bind must be string";if(!v||typeof v!="function")throw"callback missing from bind params";if(n[h])throw"method '"+h+"' is already bound!";return n[h]=v,this},call:function(h){if(!h)throw"missing arguments to call function";if(!h.method||typeof h.method!="string")throw"'method' argument to call must be string";if(!h.success||typeof h.success!="function")throw"'success' callback missing from call";var v={},A=[],H=[],Y=function(B,ge){if(H.indexOf(ge)>=0)throw"params cannot be a recursive data structure";if(H.push(ge),typeof ge=="object"){for(var pe in ge)if(ge.hasOwnProperty(pe)){var Ue=B+(B.length?"/":"")+pe;typeof ge[pe]=="function"?(v[Ue]=ge[pe],A.push(Ue),delete ge[pe]):typeof ge[pe]=="object"&&ge[pe]!==null&&Y(Ue,ge[pe])}}};Y("",h.params);var N={id:E,method:De(h.method),params:h.params};A.length&&(N.callbacks=A),h.timeout&&we(E,h.timeout,De(h.method)),R[E]={callbacks:v,error:h.error,success:h.success},y[E]=_e,E++,re(N)},notify:function(h){if(!h)throw"missing arguments to notify function";if(!h.method||typeof h.method!="string")throw"'method' argument to notify must be string";re({method:De(h.method),params:h.params})},destroy:function(){q(g.window,g.origin,typeof g.scope=="string"?g.scope:""),window.removeEventListener?window.removeEventListener("message",_e,!1):window.detachEvent&&window.detachEvent("onmessage",_e),V=!1,n={},r={},R={},g.origin=null,ie=[],O("channel destroyed"),M=""}};return D.bind("__ready",P),setTimeout(function(){re({method:De("__ready"),params:"ping"},!0)},0),D}}}();o.exports=d},705:(o,d,E)=>{var U=E(639),ne=U.Symbol;o.exports=ne},239:(o,d,E)=>{var U=E(705),ne=E(607),q=E(333),$="[object Null]",y="[object Undefined]",T=U?U.toStringTag:void 0;function g(O){return O==null?O===void 0?y:$:T&&T in Object(O)?ne(O):q(O)}o.exports=g},957:(o,d,E)=>{var U=typeof E.g=="object"&&E.g&&E.g.Object===Object&&E.g;o.exports=U},924:(o,d,E)=>{var U=E(569),ne=U(Object.getPrototypeOf,Object);o.exports=ne},607:(o,d,E)=>{var U=E(705),ne=Object.prototype,q=ne.hasOwnProperty,$=ne.toString,y=U?U.toStringTag:void 0;function T(g){var O=q.call(g,y),x=g[y];try{g[y]=void 0;var j=!0}catch{}var M=$.call(g);return j&&(O?g[y]=x:delete g[y]),M}o.exports=T},333:o=>{var d=Object.prototype,E=d.toString;function U(ne){return E.call(ne)}o.exports=U},569:o=>{function d(E,U){return function(ne){return E(U(ne))}}o.exports=d},639:(o,d,E)=>{var U=E(957),ne=typeof self=="object"&&self&&self.Object===Object&&self,q=U||ne||Function("return this")();o.exports=q},469:o=>{var d=Array.isArray;o.exports=d},5:o=>{function d(E){return E!=null&&typeof E=="object"}o.exports=d},630:(o,d,E)=>{var U=E(239),ne=E(924),q=E(5),$="[object Object]",y=Function.prototype,T=Object.prototype,g=y.toString,O=T.hasOwnProperty,x=g.call(Object);function j(M){if(!q(M)||U(M)!=$)return!1;var n=ne(M);if(n===null)return!0;var R=O.call(n,"constructor")&&n.constructor;return typeof R=="function"&&R instanceof R&&g.call(R)==x}o.exports=j},37:(o,d,E)=>{var U=E(239),ne=E(469),q=E(5),$="[object String]";function y(T){return typeof T=="string"||!ne(T)&&q(T)&&U(T)==$}o.exports=y},353:o=>{function d(E){return E===void 0}o.exports=d}},t={};function i(o){var d=t[o];if(d!==void 0)return d.exports;var E=t[o]={exports:{}};return e[o].call(E.exports,E,E.exports,i),E.exports}i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var s=i(541);k.Addon=s})()})(Wt);(()=>{var k={669:(i,s,o)=>{var d=o(218),E=O(d),U=function(){function R(r,V){for(var ie=0;ie<V.length;ie++){var G=V[ie];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(r,G.key,G)}}return function(r,V,ie){return V&&R(r.prototype,V),ie&&R(r,ie),r}}(),ne=o(457),q=O(ne),$=o(729),y=O($),T=o(702),g=o(303);function O(R){return R&&R.__esModule?R:{default:R}}function x(R,r){if(!(R instanceof r))throw new TypeError("Cannot call a class as a function")}function j(R,r){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:R}function M(R,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);R.prototype=Object.create(r&&r.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(R,r):R.__proto__=r)}var n=function(R){M(r,R);function r(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};x(this,r);var ie=j(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));if(ie.options=V,!V.iframe)throw new Error("Iframe not defined");return(0,g.iframeResizer)({checkOrigin:!0,heightCalculationMethod:window.ieVersion<=10?"max":"lowestElement",resizeFrom:"child",resizedCallback:function(we){ie.emit("iframeResized",we)}},V.iframe),ie.channel=q.default.build({window:V.iframe.contentWindow,origin:V.origin||"*",scope:V.id||V.iframe.contentWindow.location.origin,postMessageObserver:function(we,_e){ie.emit("postMessage",we,_e)},gotMessageObserver:function(we,_e){ie.emit("gotMessage",we,_e)}}),["saveData","request","addTransaction","editTransaction","addInstitution","addInvestment","editInstitution","editAsset","editLiability","deleteInstitution","deleteAsset","deleteLiability","downloadDocument","upgradePremium","getSharings","switchUser"].forEach(function(G){ie.channel.bind(G,function(we,_e){var De=G,re=_e;we.delayReturn(!0);var P=function(h,v){return h?we.error(h):we.complete(v)};ie.emit(De,re||P,re?P:void 0)})}),ie.channel.call({method:"init",params:V.options,success:function(we){ie.emit("init",we)}}),ie}return U(r,[{key:"trigger",value:function(ie,G){var we=this,_e={eventName:ie};return G&&(_e.eventData=G),new T.Promise(function(De,re){we.channel.call({method:"_event",params:_e,success:De,error:re})})}},{key:"update",value:function(ie){var G=this;return new T.Promise(function(we,_e){if(!(0,E.default)(ie))throw new Error("Data must be an object");G.channel.call({method:"update",params:ie,success:we,error:_e})})}},{key:"reload",value:function(){var ie=this;return new T.Promise(function(G,we){ie.channel.call({method:"reload",success:G,error:we})})}},{key:"destroy",value:function(){this.channel.destroy()}}]),r}(y.default);i.exports=n},702:function(i,s,o){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(d,E){i.exports=E()})(this,function(){function d(_){var W=typeof _;return _!==null&&(W==="object"||W==="function")}function E(_){return typeof _=="function"}var U=void 0;Array.isArray?U=Array.isArray:U=function(_){return Object.prototype.toString.call(_)==="[object Array]"};var ne=U,q=0,$=void 0,y=void 0,T=function(W,l){_e[q]=W,_e[q+1]=l,q+=2,q===2&&(y?y(De):P())};function g(_){y=_}function O(_){T=_}var x=typeof window<"u"?window:void 0,j=x||{},M=j.MutationObserver||j.WebKitMutationObserver,n=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",R=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function r(){return function(){return process.nextTick(De)}}function V(){return typeof $<"u"?function(){$(De)}:we()}function ie(){var _=0,W=new M(De),l=document.createTextNode("");return W.observe(l,{characterData:!0}),function(){l.data=_=++_%2}}function G(){var _=new MessageChannel;return _.port1.onmessage=De,function(){return _.port2.postMessage(0)}}function we(){var _=setTimeout;return function(){return _(De,1)}}var _e=new Array(1e3);function De(){for(var _=0;_<q;_+=2){var W=_e[_],l=_e[_+1];W(l),_e[_]=void 0,_e[_+1]=void 0}q=0}function re(){try{var _=Function("return this")().require("vertx");return $=_.runOnLoop||_.runOnContext,V()}catch{return we()}}var P=void 0;n?P=r():M?P=ie():R?P=G():x===void 0?P=re():P=we();function D(_,W){var l=this,w=new this.constructor(A);w[v]===void 0&&Q(w);var f=l._state;if(f){var C=arguments[f-1];T(function(){return nt(f,w,C,l._result)})}else Je(l,w,_,W);return w}function h(_){var W=this;if(_&&typeof _=="object"&&_.constructor===W)return _;var l=new W(A);return xe(l,_),l}var v=Math.random().toString(36).substring(2);function A(){}var H=void 0,Y=1,N=2;function B(){return new TypeError("You cannot resolve a promise with itself")}function ge(){return new TypeError("A promises callback cannot return that same promise.")}function pe(_,W,l,w){try{_.call(W,l,w)}catch(f){return f}}function Ue(_,W,l){T(function(w){var f=!1,C=pe(l,W,function(S){f||(f=!0,W!==S?xe(w,S):We(w,S))},function(S){f||(f=!0,Re(w,S))},"Settle: "+(w._label||" unknown promise"));!f&&C&&(f=!0,Re(w,C))},_)}function me(_,W){W._state===Y?We(_,W._result):W._state===N?Re(_,W._result):Je(W,void 0,function(l){return xe(_,l)},function(l){return Re(_,l)})}function Ee(_,W,l){W.constructor===_.constructor&&l===D&&W.constructor.resolve===h?me(_,W):l===void 0?We(_,W):E(l)?Ue(_,W,l):We(_,W)}function xe(_,W){if(_===W)Re(_,B());else if(d(W)){var l=void 0;try{l=W.then}catch(w){Re(_,w);return}Ee(_,W,l)}else We(_,W)}function Oe(_){_._onerror&&_._onerror(_._result),ze(_)}function We(_,W){_._state===H&&(_._result=W,_._state=Y,_._subscribers.length!==0&&T(ze,_))}function Re(_,W){_._state===H&&(_._state=N,_._result=W,T(Oe,_))}function Je(_,W,l,w){var f=_._subscribers,C=f.length;_._onerror=null,f[C]=W,f[C+Y]=l,f[C+N]=w,C===0&&_._state&&T(ze,_)}function ze(_){var W=_._subscribers,l=_._state;if(W.length!==0){for(var w=void 0,f=void 0,C=_._result,S=0;S<W.length;S+=3)w=W[S],f=W[S+l],w?nt(l,w,f,C):f(C);_._subscribers.length=0}}function nt(_,W,l,w){var f=E(l),C=void 0,S=void 0,L=!0;if(f){try{C=l(w)}catch(Ce){L=!1,S=Ce}if(W===C){Re(W,ge());return}}else C=w;W._state!==H||(f&&L?xe(W,C):L===!1?Re(W,S):_===Y?We(W,C):_===N&&Re(W,C))}function Ze(_,W){try{W(function(w){xe(_,w)},function(w){Re(_,w)})}catch(l){Re(_,l)}}var at=0;function m(){return at++}function Q(_){_[v]=at++,_._state=void 0,_._result=void 0,_._subscribers=[]}function u(){return new Error("Array Methods must be provided an Array")}var F=function(){function _(W,l){this._instanceConstructor=W,this.promise=new W(A),this.promise[v]||Q(this.promise),ne(l)?(this.length=l.length,this._remaining=l.length,this._result=new Array(this.length),this.length===0?We(this.promise,this._result):(this.length=this.length||0,this._enumerate(l),this._remaining===0&&We(this.promise,this._result))):Re(this.promise,u())}return _.prototype._enumerate=function(l){for(var w=0;this._state===H&&w<l.length;w++)this._eachEntry(l[w],w)},_.prototype._eachEntry=function(l,w){var f=this._instanceConstructor,C=f.resolve;if(C===h){var S=void 0,L=void 0,Ce=!1;try{S=l.then}catch(it){Ce=!0,L=it}if(S===D&&l._state!==H)this._settledAt(l._state,w,l._result);else if(typeof S!="function")this._remaining--,this._result[w]=l;else if(f===ce){var Ne=new f(A);Ce?Re(Ne,L):Ee(Ne,l,S),this._willSettleAt(Ne,w)}else this._willSettleAt(new f(function(it){return it(l)}),w)}else this._willSettleAt(C(l),w)},_.prototype._settledAt=function(l,w,f){var C=this.promise;C._state===H&&(this._remaining--,l===N?Re(C,f):this._result[w]=f),this._remaining===0&&We(C,this._result)},_.prototype._willSettleAt=function(l,w){var f=this;Je(l,void 0,function(C){return f._settledAt(Y,w,C)},function(C){return f._settledAt(N,w,C)})},_}();function Z(_){return new F(this,_).promise}function K(_){var W=this;return ne(_)?new W(function(l,w){for(var f=_.length,C=0;C<f;C++)W.resolve(_[C]).then(l,w)}):new W(function(l,w){return w(new TypeError("You must pass an array to race."))})}function ae(_){var W=this,l=new W(A);return Re(l,_),l}function be(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function je(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var ce=function(){function _(W){this[v]=m(),this._result=this._state=void 0,this._subscribers=[],A!==W&&(typeof W!="function"&&be(),this instanceof _?Ze(this,W):je())}return _.prototype.catch=function(l){return this.then(null,l)},_.prototype.finally=function(l){var w=this,f=w.constructor;return E(l)?w.then(function(C){return f.resolve(l()).then(function(){return C})},function(C){return f.resolve(l()).then(function(){throw C})}):w.then(l,l)},_}();ce.prototype.then=D,ce.all=Z,ce.race=K,ce.resolve=h,ce.reject=ae,ce._setScheduler=g,ce._setAsap=O,ce._asap=T;function Ve(){var _=void 0;if(typeof o.g<"u")_=o.g;else if(typeof self<"u")_=self;else try{_=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var W=_.Promise;if(W){var l=null;try{l=Object.prototype.toString.call(W.resolve())}catch{}if(l==="[object Promise]"&&!W.cast)return}_.Promise=ce}return ce.polyfill=Ve,ce.Promise=ce,ce})},729:i=>{var s=Object.prototype.hasOwnProperty,o="~";function d(){}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(o=!1));function E($,y,T){this.fn=$,this.context=y,this.once=T||!1}function U($,y,T,g,O){if(typeof T!="function")throw new TypeError("The listener must be a function");var x=new E(T,g||$,O),j=o?o+y:y;return $._events[j]?$._events[j].fn?$._events[j]=[$._events[j],x]:$._events[j].push(x):($._events[j]=x,$._eventsCount++),$}function ne($,y){--$._eventsCount===0?$._events=new d:delete $._events[y]}function q(){this._events=new d,this._eventsCount=0}q.prototype.eventNames=function(){var y=[],T,g;if(this._eventsCount===0)return y;for(g in T=this._events)s.call(T,g)&&y.push(o?g.slice(1):g);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(T)):y},q.prototype.listeners=function(y){var T=o?o+y:y,g=this._events[T];if(!g)return[];if(g.fn)return[g.fn];for(var O=0,x=g.length,j=new Array(x);O<x;O++)j[O]=g[O].fn;return j},q.prototype.listenerCount=function(y){var T=o?o+y:y,g=this._events[T];return g?g.fn?1:g.length:0},q.prototype.emit=function(y,T,g,O,x,j){var M=o?o+y:y;if(!this._events[M])return!1;var n=this._events[M],R=arguments.length,r,V;if(n.fn){switch(n.once&&this.removeListener(y,n.fn,void 0,!0),R){case 1:return n.fn.call(n.context),!0;case 2:return n.fn.call(n.context,T),!0;case 3:return n.fn.call(n.context,T,g),!0;case 4:return n.fn.call(n.context,T,g,O),!0;case 5:return n.fn.call(n.context,T,g,O,x),!0;case 6:return n.fn.call(n.context,T,g,O,x,j),!0}for(V=1,r=new Array(R-1);V<R;V++)r[V-1]=arguments[V];n.fn.apply(n.context,r)}else{var ie=n.length,G;for(V=0;V<ie;V++)switch(n[V].once&&this.removeListener(y,n[V].fn,void 0,!0),R){case 1:n[V].fn.call(n[V].context);break;case 2:n[V].fn.call(n[V].context,T);break;case 3:n[V].fn.call(n[V].context,T,g);break;case 4:n[V].fn.call(n[V].context,T,g,O);break;default:if(!r)for(G=1,r=new Array(R-1);G<R;G++)r[G-1]=arguments[G];n[V].fn.apply(n[V].context,r)}}return!0},q.prototype.on=function(y,T,g){return U(this,y,T,g,!1)},q.prototype.once=function(y,T,g){return U(this,y,T,g,!0)},q.prototype.removeListener=function(y,T,g,O){var x=o?o+y:y;if(!this._events[x])return this;if(!T)return ne(this,x),this;var j=this._events[x];if(j.fn)j.fn===T&&(!O||j.once)&&(!g||j.context===g)&&ne(this,x);else{for(var M=0,n=[],R=j.length;M<R;M++)(j[M].fn!==T||O&&!j[M].once||g&&j[M].context!==g)&&n.push(j[M]);n.length?this._events[x]=n.length===1?n[0]:n:ne(this,x)}return this},q.prototype.removeAllListeners=function(y){var T;return y?(T=o?o+y:y,this._events[T]&&ne(this,T)):(this._events=new d,this._eventsCount=0),this},q.prototype.off=q.prototype.removeListener,q.prototype.addListener=q.prototype.on,q.prefixed=o,q.EventEmitter=q,i.exports=q},303:(i,s,o)=>{i.exports=o(683)},402:i=>{(function(s){if(typeof window>"u")return;var o=!0,d=10,E="",U=0,ne="",q=null,$="",y=!1,T={resize:1,click:1},g=128,O=!0,x=1,j="bodyOffset",M=j,n=!0,R="",r={},V=32,ie=null,G=!1,we="[iFrameSizer]",_e=we.length,De="",re={max:1,min:1,bodyScroll:1,documentElementScroll:1},P="child",D=!0,h=window.parent,v="*",A=0,H=!1,Y=null,N=16,B=1,ge="scroll",pe=ge,Ue=window,me=function(){Q("MessageCallback function not defined")},Ee=function(){},xe=function(){},Oe={height:function(){return Q("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return Q("Custom width calculation function not defined"),document.body.scrollWidth}},We={};function Re(b,I,a){"addEventListener"in window?b.addEventListener(I,a,!1):"attachEvent"in window&&b.attachEvent("on"+I,a)}function Je(b,I,a){"removeEventListener"in window?b.removeEventListener(I,a,!1):"detachEvent"in window&&b.detachEvent("on"+I,a)}function ze(b){return b.charAt(0).toUpperCase()+b.slice(1)}function nt(b){var I,a,p,z=null,oe=0,de=function(){oe=Ze(),z=null,p=b.apply(I,a),z||(I=a=null)};return function(){var Ae=Ze();oe||(oe=Ae);var Se=N-(Ae-oe);return I=this,a=arguments,Se<=0||Se>N?(z&&(clearTimeout(z),z=null),oe=Ae,p=b.apply(I,a),z||(I=a=null)):z||(z=setTimeout(de,Se)),p}}var Ze=Date.now||function(){return new Date().getTime()};function at(b){return we+"["+De+"] "+b}function m(b){G&&typeof window.console=="object"&&console.log(at(b))}function Q(b){typeof window.console=="object"&&console.warn(at(b))}function u(){F(),m("Initialising iFrame ("+location.href+")"),Z(),be(),ae("background",E),ae("padding",$),Ne(),W(),l(),je(),ht(),w(),r=it(),mt("init","Init message from host page"),Ee()}function F(){function b(a){return a==="true"}var I=R.substr(_e).split(":");De=I[0],U=s!==I[1]?Number(I[1]):U,y=s!==I[2]?b(I[2]):y,G=s!==I[3]?b(I[3]):G,V=s!==I[4]?Number(I[4]):V,o=s!==I[6]?b(I[6]):o,ne=I[7],M=s!==I[8]?I[8]:M,E=I[9],$=I[10],A=s!==I[11]?Number(I[11]):A,r.enable=s!==I[12]?b(I[12]):!1,P=s!==I[13]?I[13]:P,pe=s!==I[14]?I[14]:pe}function Z(){function b(){var a=window.iFrameResizer;m("Reading data from page: "+JSON.stringify(a)),me="messageCallback"in a?a.messageCallback:me,Ee="readyCallback"in a?a.readyCallback:Ee,v="targetOrigin"in a?a.targetOrigin:v,M="heightCalculationMethod"in a?a.heightCalculationMethod:M,pe="widthCalculationMethod"in a?a.widthCalculationMethod:pe}function I(a,p){return typeof a=="function"&&(m("Setup custom "+p+"CalcMethod"),Oe[p]=a,a="custom"),a}"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(b(),M=I(M,"height"),pe=I(pe,"width")),m("TargetOrigin for parent set to: "+v)}function K(b,I){return I.indexOf("-")!==-1&&(Q("Negative CSS value ignored for "+b),I=""),I}function ae(b,I){s!==I&&I!==""&&I!=="null"&&(document.body.style[b]=I,m("Body "+b+' set to "'+I+'"'))}function be(){s===ne&&(ne=U+"px"),ae("margin",K("margin",ne))}function je(){document.documentElement.style.height="",document.body.style.height="",m('HTML & body height set to "auto"')}function ce(b){var I={add:function(a){function p(){mt(b.eventName,b.eventType)}We[a]=p,Re(window,a,p)},remove:function(a){var p=We[a];delete We[a],Je(window,a,p)}};b.eventNames&&Array.prototype.map?(b.eventName=b.eventNames[0],b.eventNames.map(I[b.method])):I[b.method](b.eventName),m(ze(b.method)+" event listener: "+b.eventType)}function Ve(b){ce({method:b,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),ce({method:b,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),ce({method:b,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),ce({method:b,eventType:"Input",eventName:"input"}),ce({method:b,eventType:"Mouse Up",eventName:"mouseup"}),ce({method:b,eventType:"Mouse Down",eventName:"mousedown"}),ce({method:b,eventType:"Orientation Change",eventName:"orientationchange"}),ce({method:b,eventType:"Print",eventName:["afterprint","beforeprint"]}),ce({method:b,eventType:"Ready State Change",eventName:"readystatechange"}),ce({method:b,eventType:"Touch Start",eventName:"touchstart"}),ce({method:b,eventType:"Touch End",eventName:"touchend"}),ce({method:b,eventType:"Touch Cancel",eventName:"touchcancel"}),ce({method:b,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),ce({method:b,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),ce({method:b,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),P==="child"&&ce({method:b,eventType:"IFrame Resized",eventName:"resize"})}function _(b,I,a,p){return I!==b&&(b in a||(Q(b+" is not a valid option for "+p+"CalculationMethod."),b=I),m(p+' calculation method set to "'+b+'"')),b}function W(){M=_(M,j,Ie,"height")}function l(){pe=_(pe,ge,Be,"width")}function w(){o===!0?(Ve("add"),le()):m("Auto Resize disabled")}function f(){m("Disable outgoing messages"),D=!1}function C(){m("Remove event listener: Message"),Je(window,"message",Ot)}function S(){q!==null&&q.disconnect()}function L(){Ve("remove"),S(),clearInterval(ie)}function Ce(){f(),C(),o===!0&&L()}function Ne(){var b=document.createElement("div");b.style.clear="both",b.style.display="block",document.body.appendChild(b)}function it(){function b(){return{x:window.pageXOffset!==s?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==s?window.pageYOffset:document.documentElement.scrollTop}}function I(Se){var Fe=Se.getBoundingClientRect(),ve=b();return{x:parseInt(Fe.left,10)+parseInt(ve.x,10),y:parseInt(Fe.top,10)+parseInt(ve.y,10)}}function a(Se){function Fe(Te){var Qe=I(Te);m("Moving to in page link (#"+ve+") at x: "+Qe.x+" y: "+Qe.y),st(Qe.y,Qe.x,"scrollToOffset")}var ve=Se.split("#")[1]||Se,fe=decodeURIComponent(ve),Pe=document.getElementById(fe)||document.getElementsByName(fe)[0];s!==Pe?Fe(Pe):(m("In page link (#"+ve+") not found in iFrame, so sending to parent"),st(0,0,"inPageLink","#"+ve))}function p(){location.hash!==""&&location.hash!=="#"&&a(location.href)}function z(){function Se(Fe){function ve(fe){fe.preventDefault(),a(this.getAttribute("href"))}Fe.getAttribute("href")!=="#"&&Re(Fe,"click",ve)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),Se)}function oe(){Re(window,"hashchange",p)}function de(){setTimeout(p,g)}function Ae(){Array.prototype.forEach&&document.querySelectorAll?(m("Setting up location.hash handlers"),z(),oe(),de()):Q("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}return r.enable?Ae():m("In page linking not enabled"),{findTarget:a}}function ht(){m("Enable public methods"),Ue.parentIFrame={autoResize:function(I){return I===!0&&o===!1?(o=!0,w()):I===!1&&o===!0&&(o=!1,L()),o},close:function(){st(0,0,"close"),Ce()},getId:function(){return De},getPageInfo:function(I){typeof I=="function"?(xe=I,st(0,0,"pageInfo")):(xe=function(){},st(0,0,"pageInfoStop"))},moveToAnchor:function(I){r.findTarget(I)},reset:function(){xt("parentIFrame.reset")},scrollTo:function(I,a){st(a,I,"scrollTo")},scrollToOffset:function(I,a){st(a,I,"scrollToOffset")},sendMessage:function(I,a){st(0,0,"message",JSON.stringify(I),a)},setHeightCalculationMethod:function(I){M=I,W()},setWidthCalculationMethod:function(I){pe=I,l()},setTargetOrigin:function(I){m("Set targetOrigin: "+I),v=I},size:function(I,a){var p=""+(I||"")+(a?","+a:"");mt("size","parentIFrame.size("+p+")",I,a)}}}function Ye(){V!==0&&(m("setInterval: "+V+"ms"),ie=setInterval(function(){mt("interval","setInterval: "+V)},Math.abs(V)))}function qe(){function b(fe){function Pe(Te){Te.complete===!1&&(m("Attach listeners to "+Te.src),Te.addEventListener("load",z,!1),Te.addEventListener("error",oe,!1),Se.push(Te))}fe.type==="attributes"&&fe.attributeName==="src"?Pe(fe.target):fe.type==="childList"&&Array.prototype.forEach.call(fe.target.querySelectorAll("img"),Pe)}function I(fe){Se.splice(Se.indexOf(fe),1)}function a(fe){m("Remove listeners from "+fe.src),fe.removeEventListener("load",z,!1),fe.removeEventListener("error",oe,!1),I(fe)}function p(fe,Pe,Te){a(fe.target),mt(Pe,Te+": "+fe.target.src,s,s)}function z(fe){p(fe,"imageLoad","Image loaded")}function oe(fe){p(fe,"imageLoadFailed","Image load failed")}function de(fe){mt("mutationObserver","mutationObserver: "+fe[0].target+" "+fe[0].type),fe.forEach(b)}function Ae(){var fe=document.querySelector("body"),Pe={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return ve=new Fe(de),m("Create body MutationObserver"),ve.observe(fe,Pe),ve}var Se=[],Fe=window.MutationObserver||window.WebKitMutationObserver,ve=Ae();return{disconnect:function(){"disconnect"in ve&&(m("Disconnect body MutationObserver"),ve.disconnect(),Se.forEach(a))}}}function le(){var b=0>V;window.MutationObserver||window.WebKitMutationObserver?b?Ye():q=qe():(m("MutationObserver not supported in this browser!"),Ye())}function ee(b,I){function a(z){var oe=/^\d+(px)?$/i;if(oe.test(z))return parseInt(z,d);var de=I.style.left,Ae=I.runtimeStyle.left;return I.runtimeStyle.left=I.currentStyle.left,I.style.left=z||0,z=I.style.pixelLeft,I.style.left=de,I.runtimeStyle.left=Ae,z}var p=0;return I=I||document.body,"defaultView"in document&&"getComputedStyle"in document.defaultView?(p=document.defaultView.getComputedStyle(I,null),p=p!==null?p[b]:0):p=a(I.currentStyle[b]),parseInt(p,d)}function X(b){b>N/2&&(N=2*b,m("Event throttle increased to "+N+"ms"))}function te(b,I){for(var a=I.length,p=0,z=0,oe=ze(b),de=Ze(),Ae=0;Ae<a;Ae++)p=I[Ae].getBoundingClientRect()[b]+ee("margin"+oe,I[Ae]),p>z&&(z=p);return de=Ze()-de,m("Parsed "+a+" HTML elements"),m("Element position calculated in "+de+"ms"),X(de),z}function ue(b){return[b.bodyOffset(),b.bodyScroll(),b.documentElementOffset(),b.documentElementScroll()]}function Me(b,I){function a(){return Q("No tagged elements ("+I+") found on page"),document.querySelectorAll("body *")}var p=document.querySelectorAll("["+I+"]");return p.length===0&&a(),te(b,p)}function ke(){return document.querySelectorAll("body *")}var Ie={bodyOffset:function(){return document.body.offsetHeight+ee("marginTop")+ee("marginBottom")},offset:function(){return Ie.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return Oe.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,ue(Ie))},min:function(){return Math.min.apply(null,ue(Ie))},grow:function(){return Ie.max()},lowestElement:function(){return Math.max(Ie.bodyOffset(),te("bottom",ke()))},taggedElement:function(){return Me("bottom","data-iframe-height")}},Be={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return Oe.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(Be.bodyScroll(),Be.documentElementScroll())},max:function(){return Math.max.apply(null,ue(Be))},min:function(){return Math.min.apply(null,ue(Be))},rightMostElement:function(){return te("right",ke())},taggedElement:function(){return Me("right","data-iframe-width")}};function Ke(b,I,a,p){function z(){x=ve,B=fe,st(x,B,b)}function oe(){function Pe(Te,Qe){var lt=Math.abs(Te-Qe)<=A;return!lt}return ve=s!==a?a:Ie[M](),fe=s!==p?p:Be[pe](),Pe(x,ve)||y&&Pe(B,fe)}function de(){return!(b in{init:1,interval:1,size:1})}function Ae(){return M in re||y&&pe in re}function Se(){m("No change in size detected")}function Fe(){de()&&Ae()?xt(I):b in{interval:1}||Se()}var ve,fe;oe()||b==="init"?(Mt(),z()):Fe()}var ut=nt(Ke);function mt(b,I,a,p){function z(){b in{reset:1,resetPage:1,init:1}||m("Trigger event: "+I)}function oe(){return H&&b in T}oe()?m("Trigger event cancelled: "+b):(z(),ut(b,I,a,p))}function Mt(){H||(H=!0,m("Trigger event lock on")),clearTimeout(Y),Y=setTimeout(function(){H=!1,m("Trigger event lock off"),m("--")},g)}function gt(b){x=Ie[M](),B=Be[pe](),st(x,B,b)}function xt(b){var I=M;M=j,m("Reset trigger event: "+b),Mt(),gt("reset"),M=I}function st(b,I,a,p,z){function oe(){s===z?z=v:m("Message targetOrigin: "+z)}function de(){var Ae=b+":"+I,Se=De+":"+Ae+":"+a+(s!==p?":"+p:"");m("Sending message to host page ("+Se+")"),h.postMessage(we+Se,z)}D===!0&&(oe(),de())}function Ot(b){var I={init:function(){function ve(){R=b.data,h=b.source,u(),O=!1,setTimeout(function(){n=!1},g)}document.readyState==="interactive"||document.readyState==="complete"?ve():(m("Waiting for page ready"),Re(window,"readystatechange",I.initFromParent))},reset:function(){n?m("Page reset ignored by init"):(m("Page size reset by host page"),gt("resetPage"))},resize:function(){mt("resizeParent","Parent window requested size check")},moveToAnchor:function(){r.findTarget(z())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var ve=z();m("PageInfoFromParent called from parent: "+ve),xe(JSON.parse(ve)),m(" --")},message:function(){var ve=z();m("MessageCallback called from parent: "+ve),me(JSON.parse(ve)),m(" --")}};function a(){return we===(""+b.data).substr(0,_e)}function p(){return b.data.split("]")[1].split(":")[0]}function z(){return b.data.substr(b.data.indexOf(":")+1)}function oe(){return!i.exports&&"iFrameResize"in window}function de(){return b.data.split(":")[2]in{true:1,false:1}}function Ae(){var Fe=p();Fe in I?I[Fe]():!oe()&&!de()&&Q("Unexpected message ("+b.data+")")}function Se(){O===!1?Ae():de()?I.init():m('Ignored message of type "'+p()+'". Received before initialization.')}a()&&Se()}function ct(){document.readyState!=="loading"&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}Re(window,"message",Ot),ct()})()},28:(i,s)=>{var o,d,E;(function(U){if(typeof window>"u")return;var ne=0,q=!1,$=!1,y="message",T=y.length,g="[iFrameSizer]",O=g.length,x=null,j=window.requestAnimationFrame,M={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},n={},R=null,r={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){D("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}};function V(m,Q,u){"addEventListener"in window?m.addEventListener(Q,u,!1):"attachEvent"in window&&m.attachEvent("on"+Q,u)}function ie(m,Q,u){"removeEventListener"in window?m.removeEventListener(Q,u,!1):"detachEvent"in window&&m.detachEvent("on"+Q,u)}function G(){var m=["moz","webkit","o","ms"],Q;for(Q=0;Q<m.length&&!j;Q+=1)j=window[m[Q]+"RequestAnimationFrame"];j||re("setup","RequestAnimationFrame not supported")}function we(m){var Q="Host page: "+m;return window.top!==window.self&&(window.parentIFrame&&window.parentIFrame.getId?Q=window.parentIFrame.getId()+": "+m:Q="Nested host page: "+m),Q}function _e(m){return g+"["+we(m)+"]"}function De(m){return n[m]?n[m].log:q}function re(m,Q){h("log",m,Q,De(m))}function P(m,Q){h("info",m,Q,De(m))}function D(m,Q){h("warn",m,Q,!0)}function h(m,Q,u,F){F===!0&&typeof window.console=="object"&&console[m](_e(Q),u)}function v(m){function Q(){function ee(){pe(qe),N(le),L("resizedCallback",qe)}F("Height"),F("Width"),Ue(ee,qe,"init")}function u(){var ee=Ye.substr(O).split(":");return{iframe:n[ee[0]]&&n[ee[0]].iframe,id:ee[0],height:ee[1],width:ee[2],type:ee[3]}}function F(ee){var X=Number(n[le]["max"+ee]),te=Number(n[le]["min"+ee]),ue=ee.toLowerCase(),Me=Number(qe[ue]);re(le,"Checking "+ue+" is in range "+te+"-"+X),Me<te&&(Me=te,re(le,"Set "+ue+" to min value")),Me>X&&(Me=X,re(le,"Set "+ue+" to max value")),qe[ue]=""+Me}function Z(){function ee(){function ue(){var ke=0,Ie=!1;for(re(le,"Checking connection is from allowed list of origins: "+te);ke<te.length;ke++)if(te[ke]===X){Ie=!0;break}return Ie}function Me(){var ke=n[le]&&n[le].remoteHost;return re(le,"Checking connection is from: "+ke),X===ke}return te.constructor===Array?ue():Me()}var X=m.origin,te=n[le]&&n[le].checkOrigin;if(te&&""+X!="null"&&!ee())throw new Error("Unexpected message received from: "+X+" for "+qe.iframe.id+". Message was: "+m.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function K(){return g===(""+Ye).substr(0,O)&&Ye.substr(O).split(":")[0]in n}function ae(){var ee=qe.type in{true:1,false:1,undefined:1};return ee&&re(le,"Ignoring init message from meta parent page"),ee}function be(ee){return Ye.substr(Ye.indexOf(":")+T+ee)}function je(ee){re(le,"MessageCallback passed: {iframe: "+qe.iframe.id+", message: "+ee+"}"),L("messageCallback",{iframe:qe.iframe,message:JSON.parse(ee)}),re(le,"--")}function ce(){var ee=document.body.getBoundingClientRect(),X=qe.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:X.height,iframeWidth:X.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(X.top-ee.top,10),offsetLeft:parseInt(X.left-ee.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset})}function Ve(ee,X){function te(){me("Send Page Info","pageInfo:"+ce(),ee,X)}Oe(te,32)}function _(){function ee(Me,ke){function Ie(){n[ue]?Ve(n[ue].iframe,ue):X()}["scroll","resize"].forEach(function(Be){re(ue,Me+Be+" listener for sendPageInfo"),ke(window,Be,Ie)})}function X(){ee("Remove ",ie)}function te(){ee("Add ",V)}var ue=le;te(),n[ue]&&(n[ue].stopPageInfo=X)}function W(){n[le]&&n[le].stopPageInfo&&(n[le].stopPageInfo(),delete n[le].stopPageInfo)}function l(){var ee=!0;return qe.iframe===null&&(D(le,"IFrame ("+qe.id+") not found"),ee=!1),ee}function w(ee){var X=ee.getBoundingClientRect();return Y(le),{x:Math.floor(Number(X.left)+Number(x.x)),y:Math.floor(Number(X.top)+Number(x.y))}}function f(ee){function X(){x=ke,C(),re(le,"--")}function te(){return{x:Number(qe.width)+Me.x,y:Number(qe.height)+Me.y}}function ue(){window.parentIFrame?window.parentIFrame["scrollTo"+(ee?"Offset":"")](ke.x,ke.y):D(le,"Unable to scroll to requested position, window.parentIFrame not found")}var Me=ee?w(qe.iframe):{x:0,y:0},ke=te();re(le,"Reposition requested from iFrame (offset x:"+Me.x+" y:"+Me.y+")"),window.top!==window.self?ue():X()}function C(){L("scrollCallback",x)!==!1?N(le):B()}function S(ee){function X(){var Ie=w(ke);re(le,"Moving to in page link (#"+ue+") at x: "+Ie.x+" y: "+Ie.y),x={x:Ie.x,y:Ie.y},C(),re(le,"--")}function te(){window.parentIFrame?window.parentIFrame.moveToAnchor(ue):re(le,"In page link #"+ue+" not found and window.parentIFrame not found")}var ue=ee.split("#")[1]||"",Me=decodeURIComponent(ue),ke=document.getElementById(Me)||document.getElementsByName(Me)[0];ke?X():window.top!==window.self?te():re(le,"In page link #"+ue+" not found")}function L(ee,X){return A(le,ee,X)}function Ce(){switch(n[le]&&n[le].firstRun&&ht(),qe.type){case"close":n[le].closeRequestCallback?A(le,"closeRequestCallback",n[le].iframe):H(qe.iframe);break;case"message":je(be(6));break;case"scrollTo":f(!1);break;case"scrollToOffset":f(!0);break;case"pageInfo":Ve(n[le]&&n[le].iframe,le),_();break;case"pageInfoStop":W();break;case"inPageLink":S(be(9));break;case"reset":ge(qe);break;case"init":Q(),L("initCallback",qe.iframe);break;default:Q()}}function Ne(ee){var X=!0;return n[ee]||(X=!1,D(qe.type+" No settings for "+ee+". Message was: "+Ye)),X}function it(){for(var ee in n)me("iFrame requested init",Ee(ee),document.getElementById(ee),ee)}function ht(){n[le]&&(n[le].firstRun=!1)}var Ye=m.data,qe={},le=null;Ye==="[iFrameResizerChild]Ready"?it():K()?(qe=u(),le=qe.id,n[le]&&(n[le].loaded=!0),!ae()&&Ne(le)&&(re(le,"Received: "+Ye),l()&&Z()&&Ce())):P(le,"Ignored: "+Ye)}function A(m,Q,u){var F=null,Z=null;if(n[m])if(F=n[m][Q],typeof F=="function")Z=F(u);else throw new TypeError(Q+" on iFrame["+m+"] is not a function");return Z}function H(m){var Q=m.id;re(Q,"Removing iFrame: "+Q),m.parentNode&&m.parentNode.removeChild(m),A(Q,"closedCallback",Q),re(Q,"--"),delete n[Q]}function Y(m){x===null&&(x={x:window.pageXOffset!==U?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==U?window.pageYOffset:document.documentElement.scrollTop},re(m,"Get page position: "+x.x+","+x.y))}function N(m){x!==null&&(window.scrollTo(x.x,x.y),re(m,"Set page position: "+x.x+","+x.y),B())}function B(){x=null}function ge(m){function Q(){pe(m),me("reset","reset",m.iframe,m.id)}re(m.id,"Size reset requested by "+(m.type==="init"?"host page":"iFrame")),Y(m.id),Ue(Q,m,"reset")}function pe(m){function Q(K){m.iframe.style[K]=m[K]+"px",re(m.id,"IFrame ("+Z+") "+K+" set to "+m[K]+"px")}function u(K){!$&&m[K]==="0"&&($=!0,re(Z,"Hidden iFrame detected, creating visibility listener"),We())}function F(K){Q(K),u(K)}var Z=m.iframe.id;n[Z]&&(n[Z].sizeHeight&&F("height"),n[Z].sizeWidth&&F("width"))}function Ue(m,Q,u){u!==Q.type&&j?(re(Q.id,"Requesting animation frame"),j(m)):m()}function me(m,Q,u,F,Z){function K(){var Ve=n[F]&&n[F].targetOrigin;re(F,"["+m+"] Sending msg to iframe["+F+"] ("+Q+") targetOrigin: "+Ve),u.contentWindow.postMessage(g+Q,Ve)}function ae(){D(F,"["+m+"] IFrame("+F+") not found")}function be(){u&&"contentWindow"in u&&u.contentWindow!==null?K():ae()}function je(){function Ve(){n[F]&&!n[F].loaded&&!ce&&(ce=!0,D(F,"IFrame has not responded within "+n[F].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ingored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}Z&&n[F]&&n[F].warningTimeout&&(n[F].msgTimeout=setTimeout(Ve,n[F].warningTimeout))}var ce=!1;F=F||u.id,n[F]&&(be(),je())}function Ee(m){return m+":"+n[m].bodyMarginV1+":"+n[m].sizeWidth+":"+n[m].log+":"+n[m].interval+":"+n[m].enablePublicMethods+":"+n[m].autoResize+":"+n[m].bodyMargin+":"+n[m].heightCalculationMethod+":"+n[m].bodyBackground+":"+n[m].bodyPadding+":"+n[m].tolerance+":"+n[m].inPageLinks+":"+n[m].resizeFrom+":"+n[m].widthCalculationMethod}function xe(m,Q){function u(){function C(L){n[f][L]!==1/0&&n[f][L]!==0&&(m.style[L]=n[f][L]+"px",re(f,"Set "+L+" = "+n[f][L]+"px"))}function S(L){if(n[f]["min"+L]>n[f]["max"+L])throw new Error("Value for min"+L+" can not be greater than max"+L)}S("Height"),S("Width"),C("maxHeight"),C("minHeight"),C("maxWidth"),C("minWidth")}function F(){var C=Q&&Q.id||r.id+ne++;return document.getElementById(C)!==null&&(C=C+ne++),C}function Z(C){return C===""&&(m.id=C=F(),q=(Q||{}).log,re(C,"Added missing iframe ID: "+C+" ("+m.src+")")),C}function K(){switch(re(f,"IFrame scrolling "+(n[f]&&n[f].scrolling?"enabled":"disabled")+" for "+f),m.style.overflow=(n[f]&&n[f].scrolling)===!1?"hidden":"auto",n[f]&&n[f].scrolling){case!0:m.scrolling="yes";break;case!1:m.scrolling="no";break;default:m.scrolling=n[f]?n[f].scrolling:"no"}}function ae(){(typeof(n[f]&&n[f].bodyMargin)=="number"||(n[f]&&n[f].bodyMargin)==="0")&&(n[f].bodyMarginV1=n[f].bodyMargin,n[f].bodyMargin=""+n[f].bodyMargin+"px")}function be(){var C=n[f]&&n[f].firstRun,S=n[f]&&n[f].heightCalculationMethod in M;!C&&S&&ge({iframe:m,height:0,width:0,type:"init"})}function je(){Function.prototype.bind&&n[f]&&(n[f].iframe.iFrameResizer={close:H.bind(null,n[f].iframe),resize:me.bind(null,"Window resize","resize",n[f].iframe),moveToAnchor:function(C){me("Move to anchor","moveToAnchor:"+C,n[f].iframe,f)},sendMessage:function(C){C=JSON.stringify(C),me("Send Message","message:"+C,n[f].iframe,f)}})}function ce(C){function S(){me("iFrame.onload",C,m,U,!0),be()}V(m,"load",S),me("init",C,m,U,!0)}function Ve(C){if(typeof C!="object")throw new TypeError("Options is not an object")}function _(C){for(var S in r)r.hasOwnProperty(S)&&(n[f][S]=C.hasOwnProperty(S)?C[S]:r[S])}function W(C){return C===""||C==="file://"?"*":C}function l(C){C=C||{},n[f]={firstRun:!0,iframe:m,remoteHost:m.src.split("/").slice(0,3).join("/")},Ve(C),_(C),n[f]&&(n[f].targetOrigin=n[f].checkOrigin===!0?W(n[f].remoteHost):"*")}function w(){return f in n&&"iFrameResizer"in m}var f=Z(m.id);w()?D(f,"Ignored iFrame, already setup."):(l(Q),K(),u(),ae(),ce(Ee(f)),je())}function Oe(m,Q){R===null&&(R=setTimeout(function(){R=null,m()},Q))}function We(){function m(){function Z(ae){function be(ce){return(n[ae]&&n[ae].iframe.style[ce])==="0px"}function je(ce){return ce.offsetParent!==null}n[ae]&&je(n[ae].iframe)&&(be("height")||be("width"))&&me("Visibility change","resize",n[ae].iframe,ae)}for(var K in n)Z(K)}function Q(Z){re("window","Mutation observed: "+Z[0].target+" "+Z[0].type),Oe(m,16)}function u(){var Z=document.querySelector("body"),K={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},ae=new F(Q);ae.observe(Z,K)}var F=window.MutationObserver||window.WebKitMutationObserver;F&&u()}function Re(m){function Q(){ze("Window "+m,"resize")}re("window","Trigger event: "+m),Oe(Q,16)}function Je(){function m(){ze("Tab Visable","resize")}document.visibilityState!=="hidden"&&(re("document","Trigger event: Visiblity change"),Oe(m,16))}function ze(m,Q){function u(Z){return n[Z]&&n[Z].resizeFrom==="parent"&&n[Z].autoResize&&!n[Z].firstRun}for(var F in n)u(F)&&me(m,Q,document.getElementById(F),F)}function nt(){V(window,"message",v),V(window,"resize",function(){Re("resize")}),V(document,"visibilitychange",Je),V(document,"-webkit-visibilitychange",Je),V(window,"focusin",function(){Re("focus")}),V(window,"focus",function(){Re("focus")})}function Ze(){function m(F,Z){function K(){if(Z.tagName){if(Z.tagName.toUpperCase()!=="IFRAME")throw new TypeError("Expected <IFRAME> tag, found <"+Z.tagName+">")}else throw new TypeError("Object is not a valid DOM element")}Z&&(K(),xe(Z,F),u.push(Z))}function Q(F){F&&F.enablePublicMethods&&D("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}var u;return G(),nt(),function(Z,K){switch(u=[],Q(Z),typeof K){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(K||"iframe"),m.bind(U,Z));break;case"object":m(Z,K);break;default:throw new TypeError("Unexpected data type ("+typeof K+")")}return u}}function at(m){m.fn?m.fn.iFrameResize||(m.fn.iFrameResize=function(u){function F(Z,K){xe(K,u)}return this.filter("iframe").each(F).end()}):P("","Unable to bind to jQuery, it is not fully loaded.")}window.jQuery&&at(window.jQuery),d=[],o=Ze,E=typeof o=="function"?o.apply(s,d):o,E!==U&&(i.exports=E)})()},683:(i,s,o)=>{s.iframeResizer=o(28),s.iframeResizerContentWindow=o(402)},457:i=>{var s=function(){var o=Math.floor(Math.random()*1000001),d={};function E(y,T,g,O){function x(n){for(var R=0;R<n.length;R++)if(n[R].win===y)return!0;return!1}var j=!1;if(T==="*"){for(var M in d)if(d.hasOwnProperty(M)&&M!=="*"&&typeof d[M][g]=="object"&&(j=x(d[M][g]),j))break}else d["*"]&&d["*"][g]&&(j=x(d["*"][g])),!j&&d[T]&&d[T][g]&&(j=x(d[T][g]));if(j)throw"A channel is already bound to the same window which overlaps with origin '"+T+"' and has scope '"+g+"'";typeof d[T]!="object"&&(d[T]={}),typeof d[T][g]!="object"&&(d[T][g]=[]),d[T][g].push({win:y,handler:O})}function U(y,T,g){for(var O=d[T][g],x=0;x<O.length;x++)O[x].win===y&&O.splice(x,1);d[T][g].length===0&&delete d[T][g]}function ne(y){return Array.isArray?Array.isArray(y):y.constructor.toString().indexOf("Array")!=-1}var q={},$=function(y){try{var T=JSON.parse(y.data);if(typeof T!="object"||T===null)throw"malformed"}catch{return}var g=y.source,O=y.origin,x,j,M;if(typeof T.method=="string"){var n=T.method.split("::");n.length==2?(x=n[0],M=n[1]):M=T.method}if(typeof T.id<"u"&&(j=T.id),typeof M=="string"){var R=!1;if(d[O]&&d[O][x]){for(var r=0;r<d[O][x].length;r++)if(d[O][x][r].win===g){d[O][x][r].handler(O,M,T),R=!0;break}}if(!R&&d["*"]&&d["*"][x]){for(var r=0;r<d["*"][x].length;r++)if(d["*"][x][r].win===g){d["*"][x][r].handler(O,M,T);break}}}else typeof j<"u"&&q[j]&&q[j](O,M,T)};return window.addEventListener?window.addEventListener("message",$,!1):window.attachEvent&&window.attachEvent("onmessage",$),{build:function(y){var T=function(P){if(y.debugOutput&&window.console&&window.console.log){try{typeof P!="string"&&(P=JSON.stringify(P))}catch{}console.log("["+x+"] "+P)}};if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if(typeof y!="object")throw"Channel build invoked without a proper object argument";if(!y.window||!y.window.postMessage)throw"Channel.build() called without a valid window argument";if(window===y.window)throw"target window is same as present window -- not allowed";var g=!1;if(typeof y.origin=="string"){var O;y.origin==="*"?g=!0:(O=y.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))!==null&&(y.origin=O[0].toLowerCase(),g=!0)}if(!g)throw"Channel.build() called with an invalid origin";if(typeof y.scope<"u"){if(typeof y.scope!="string")throw"scope, when specified, must be a string";if(y.scope.split("::").length>1)throw"scope may not contain double colons: '::'"}var x=function(){for(var P="",D="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",h=0;h<5;h++)P+=D.charAt(Math.floor(Math.random()*D.length));return P}(),j={},M={},n={},R=!1,r=[],V=function(P,D,h){var v=!1,A=!1;return{origin:D,invoke:function(H,Y){if(!n[P])throw"attempting to invoke a callback of a nonexistent transaction: "+P;for(var N=!1,B=0;B<h.length;B++)if(H===h[B]){N=!0;break}if(!N)throw"request supports no such callback '"+H+"'";_e({id:P,callback:H,params:Y})},error:function(H,Y){if(A=!0,!n[P])throw"error called for nonexistent message: "+P;delete n[P],_e({id:P,error:H,message:Y})},complete:function(H){if(A=!0,!n[P])throw"complete called for nonexistent message: "+P;delete n[P],_e({id:P,result:H})},delayReturn:function(H){return typeof H=="boolean"&&(v=H===!0),v},completed:function(){return A}}},ie=function(P,D,h){return window.setTimeout(function(){if(M[P]){var v="timeout ("+D+"ms) exceeded on method '"+h+"'";(0,M[P].error)("timeout_error",v),delete M[P],delete q[P]}},D)},G=function(P,D,h){if(typeof y.gotMessageObserver=="function")try{y.gotMessageObserver(P,h)}catch(Ee){T("gotMessageObserver() raised an exception: "+Ee.toString())}if(h.id&&D){if(j[D]){var v=V(h.id,P,h.callbacks?h.callbacks:[]);n[h.id]={};try{if(h.callbacks&&ne(h.callbacks)&&h.callbacks.length>0)for(var A=0;A<h.callbacks.length;A++){for(var H=h.callbacks[A],Y=h.params,N=H.split("/"),B=0;B<N.length-1;B++){var ge=N[B];typeof Y[ge]!="object"&&(Y[ge]={}),Y=Y[ge]}Y[N[N.length-1]]=function(){var Ee=H;return function(xe){return v.invoke(Ee,xe)}}()}var pe=j[D](v,h.params);!v.delayReturn()&&!v.completed()&&v.complete(pe)}catch(Ee){var Ue="runtime_error",me=null;if(typeof Ee=="string"?me=Ee:typeof Ee=="object"&&(Ee&&ne(Ee)&&Ee.length==2?(Ue=Ee[0],me=Ee[1]):typeof Ee.error=="string"&&(Ue=Ee.error,Ee.message?typeof Ee.message=="string"?me=Ee.message:Ee=Ee.message:me="")),me===null)try{me=JSON.stringify(Ee),typeof me>"u"&&(me=Ee.toString())}catch{me=Ee.toString()}v.error(Ue,me)}}}else h.id&&h.callback?!M[h.id]||!M[h.id].callbacks||!M[h.id].callbacks[h.callback]?T("ignoring invalid callback, id:"+h.id+" ("+h.callback+")"):M[h.id].callbacks[h.callback](h.params):h.id?M[h.id]?(h.error?(0,M[h.id].error)(h.error,h.message):h.result!==void 0?(0,M[h.id].success)(h.result):(0,M[h.id].success)(),delete M[h.id],delete q[h.id]):T("ignoring invalid response: "+h.id):D&&j[D]&&j[D]({origin:P},h.params)};E(y.window,y.origin,typeof y.scope=="string"?y.scope:"",G);var we=function(P){return typeof y.scope=="string"&&y.scope.length&&(P=[y.scope,P].join("::")),P},_e=function(P,D){if(!P)throw"postMessage called with null message";var h=R?"post  ":"queue ";if(T(h+" message: "+JSON.stringify(P)),!D&&!R)r.push(P);else{if(typeof y.postMessageObserver=="function")try{y.postMessageObserver(y.origin,P)}catch(v){T("postMessageObserver() raised an exception: "+v.toString())}y.window.postMessage(JSON.stringify(P),y.origin)}},De=function(P,D){if(T("ready msg received"),R)throw"received ready message while in ready state.  help!";for(D==="ping"?x+="-R":x+="-L",re.unbind("__ready"),R=!0,T("ready msg accepted."),D==="ping"&&re.notify({method:"__ready",params:"pong"});r.length;)_e(r.pop());typeof y.onReady=="function"&&y.onReady(re)},re={unbind:function(P){if(j[P]){if(!delete j[P])throw"can't delete method: "+P;return!0}return!1},bind:function(P,D){if(!P||typeof P!="string")throw"'method' argument to bind must be string";if(!D||typeof D!="function")throw"callback missing from bind params";if(j[P])throw"method '"+P+"' is already bound!";return j[P]=D,this},call:function(P){if(!P)throw"missing arguments to call function";if(!P.method||typeof P.method!="string")throw"'method' argument to call must be string";if(!P.success||typeof P.success!="function")throw"'success' callback missing from call";var D={},h=[],v=[],A=function(Y,N){if(v.indexOf(N)>=0)throw"params cannot be a recursive data structure";if(v.push(N),typeof N=="object"){for(var B in N)if(N.hasOwnProperty(B)){var ge=Y+(Y.length?"/":"")+B;typeof N[B]=="function"?(D[ge]=N[B],h.push(ge),delete N[B]):typeof N[B]=="object"&&N[B]!==null&&A(ge,N[B])}}};A("",P.params);var H={id:o,method:we(P.method),params:P.params};h.length&&(H.callbacks=h),P.timeout&&ie(o,P.timeout,we(P.method)),M[o]={callbacks:D,error:P.error,success:P.success},q[o]=G,o++,_e(H)},notify:function(P){if(!P)throw"missing arguments to notify function";if(!P.method||typeof P.method!="string")throw"'method' argument to notify must be string";_e({method:we(P.method),params:P.params})},destroy:function(){U(y.window,y.origin,typeof y.scope=="string"?y.scope:""),window.removeEventListener?window.removeEventListener("message",G,!1):window.detachEvent&&window.detachEvent("onmessage",G),R=!1,j={},n={},M={},y.origin=null,r=[],T("channel destroyed"),x=""}};return re.bind("__ready",De),setTimeout(function(){_e({method:we("__ready"),params:"ping"},!0)},0),re}}}();i.exports=s},218:i=>{function s(o){var d=typeof o;return o!=null&&(d=="object"||d=="function")}i.exports=s}},e={};function t(i){var s=e[i];if(s!==void 0)return s.exports;var o=e[i]={exports:{}};return k[i].call(o.exports,o,o.exports,t),o.exports}t.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),t(669)})();var Qt=Wt.Addon;class Zt{constructor(){this.addon=new Qt,this.addon.on("init",e=>{this.addon.options=e})}fetch_user(){try{return this.addon.api.getUser()}catch(e){throw e}}fetch_currencies(){try{return this.addon.request({method:"GET",endpoint:"currencies"})}catch(e){throw e}}fetch_institutions(){try{return this.addon.api.getInstitutions(this.get_options_query(this.addon.options))}catch(e){throw e}}fetch_positions(){try{return this.addon.api.getPositions(this.get_options_query(this.addon.options))}catch(e){throw e}}fetch_transactions(){try{let e=new Date("2000-01-01").toISOString().split("T")[0],t=new Date().toISOString().split("T")[0],i={from:e,to:t,deleted:!1};return this.addon.api.getTransactions(i)}catch(e){throw e}}fetch_historical_data(e){try{return this.addon.request({method:"GET",endpoint:`securities/${e}/history`})}catch(t){throw t}}fetch_stock_prices(e,t){return fetch("https://data.wealthica.com/api/streams",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e,symbols:t})}).then(o=>o.json()).catch(o=>{throw o})}async delete_transaction(e){const t={deleted:!0};return await this.addon.api.updateTransaction(e,t)}get_options_query(e){return{from:e.dateRangeFilter&&e.dateRangeFilter[0],to:e.dateRangeFilter&&e.dateRangeFilter[1],groups:e.groupsFilter,institutions:e.institutionsFilter,investments:e.investmentsFilter==="all"?null:e.investmentsFilter}}}function en(k){return null}function tn(k){k=Array.isArray(k)?k:[k],k.forEach(e=>{localStorage.removeItem(e)})}const pt=!1,St=[{name:"INVESTOR - CELI",account_number:"22981483",order:1,type:null,no_holdings:!1,exluded:!1},{name:"INVESTOR - RESP",account_number:"21921430",order:2,type:null,no_holdings:!1,exluded:!1},{name:"NESBITT - NON-ENRG",account_number:"31015145",order:3,type:null,no_holdings:!1,exluded:!0},{name:"NESBITT - BELSKI",account_number:"31107566",order:4,type:null,no_holdings:!1,exluded:pt},{name:"NESBITT - FONDS",account_number:"31107567",order:5,type:null,no_holdings:!1,exluded:pt},{name:"NESBITT - ACTIONS (REER)",account_number:"31107798",order:6,type:null,no_holdings:!1,exluded:pt},{name:"NESBITT - ACTIONS (CELI)",account_number:"78124230",order:7,type:null,no_holdings:!1,exluded:pt},{name:"CGI - ACTIONS (REER)",account_number:"197287703264",order:8,type:null,no_holdings:!0,exluded:pt},{name:"CGI - ACTIONS (NON-ENRG)",account_number:"197287499339",order:8,type:"NRG",no_holdings:!0,exluded:pt},{name:"FTQ - REER",account_number:"107935800-01R",order:9,type:"RRSP",no_holdings:!0,exluded:pt},{name:"BMO - INVEST",account_number:"XXXX6679",order:10,type:"CASH",no_holdings:!0,exluded:pt}];function nn(k,e){const t=St.find(i=>i.account_number===k);return t?t.type||e.toUpperCase():""}function rn(k){var e=St.find(t=>t.account_number===k);return e?e.exluded:!0}function on(k){var e=St.find(t=>t.account_number===k);return e?e.order:999}function an(k){var e=St.find(t=>t.account_number===k);return e?e.no_holdings:!1}const Bt={dev:!0,prod:!1,log_all:!0},sn=[{id:"user",enabled:!1},{id:"currencies",enabled:!1},{id:"institutions",enabled:!1},{id:"positions",enabled:!1},{id:"transactions",enabled:!1},{id:"accounts",enabled:!1},{id:"holdings",enabled:!1},{id:"totals",enabled:!1},{id:"currency",enabled:!1}];function ln(){return Jt()&&Bt.prod}function It(k,e,t){var i;ln()&&((i=sn.find(s=>s.id===k))!=null&&i.enabled||Bt.log_all)&&(t?console.log(k,`<${t}>`,e):console.log(k,e))}const yt={unknown:"unknown",memory:"memory",store:"store",fetched:"fetched",loading:"loading",refreshed:"refreshed"},Le={user:"user",currencies:"currencies",institutions:"institutions",positions:"positions",transactions:"transactions",accounts:"accounts",holdings:"holdings",holdings_totals:"holdings_totals",transactions_list:"transactions_list",statements:"statements",x_usd:"x_usd"};class un{constructor(){dt(this,"user",null);dt(this,"currencies",null);dt(this,"institutions",null);dt(this,"positions",null);dt(this,"transactions",null);dt(this,"accounts",null);dt(this,"holdings",null);dt(this,"holdings_totals",null);dt(this,"transactions_list",null);dt(this,"statements",null);dt(this,"x_usd",null);this.wealthica=new Zt}async load(e){let t=yt.unknown;this[e]?this[e]instanceof Promise?(t=yt.loading,await this[e]):t=yt.memory:(this[e]=en())?t=yt.store:(t=yt.fetched,this[e]=this.retrieve_data(e),this[e]=await this[e],this[e],void 0),t!=yt.loading&&It(e,this[e],t)}retrieve_data(e){switch(e){case"user":return this.wealthica.fetch_user();case"currencies":return this.wealthica.fetch_currencies();case"institutions":return this.wealthica.fetch_institutions();case"positions":return this.wealthica.fetch_positions();case"accounts":return this.retrieve_accounts_data();case"holdings":return this.retrieve_holdings_data();case"holdings_totals":return this.retrieve_holdings_totals();case"transactions":return this.retrieve_transactions();case"transactions_list":return this.retrieve_transactions_list();case"statements":return this.retrieve_statements();case"x_usd":return this.retrieve_x_usd_data();default:throw`No such data to fetch (${e})`}}clear_data(e){e=Array.isArray(e)?e:[e],e.forEach(t=>{this[t]=null,tn(t)})}async retrieve_accounts_data(){return await this.load(Le.institutions),this.institutions.flatMap(t=>{const i=new Map;return t.investments.forEach(s=>{let o=this.get_account_number(s);if(!s.ignored&&!rn(o)){let d=i.get(o)??{institution:{name:t.name,type:t.type},number:o,name:s.name,type:nn(o,s.type),order:on(o),value_CAD:0,no_holdings:an(o),expanded:o=="22981483",subaccounts:[]};d.value_CAD+=s.currency_value*this.xrate(s.currency),d.subaccounts.push({id:s._id,name:s.name,currency:s.currency,value:s.currency_value,no_holdings:d.no_holdings,expanded:!0}),i.set(o,d)}}),Array.from(i.values())}).sort((t,i)=>t.order-i.order)}get_account_number(e){return(e.account_number?e.account_number:e.id).toUpperCase()}async retrieve_holdings_totals(){let e={accounts:{},portfolio:{}};return await Promise.all([this.load(Le.accounts),this.load(Le.holdings)]),this.accounts.forEach(t=>{t.subaccounts.forEach(i=>{e.accounts[t.number]=e.accounts[t.number]||{},e.accounts[t.number][i.id]=this.calc_subaccount_holdings_totals(i)}),e.accounts[t.number]={...e.accounts[t.number]||{},...this.calc_account_holdings_totals(t,e)}}),this.calc_portfolio_holdings_totals(e),e}calc_subaccount_holdings_totals(e){let t={book_value:0,close_amount:0,gain_daily_amount:0,gain_daily_percent:0,gain_period_percent:0,gain_period_amount:0,gain_overall_amount:0,gain_overall_percent:0,market_value:0,market_value_CAD:0,market_value_USD:0,market_total_CAD:0,weight_account:0};if(!e.no_holdings)t=this.holdings.filter(i=>i.subaccount_id==e.id).reduce((i,s)=>(i.book_value+=s.values.book_value,i.close_amount+=s.values.close_amount,i.gain_daily_amount+=s.values.gain_daily_amount,i.gain_period_amount+=s.values.gain_period_amount,i.gain_overall_amount+=s.values.gain_overall_amount,i.market_value+=s.values.market_value,i.market_value_USD+=s.currency=="usd"?s.values.market_value:0,i.market_value_CAD+=s.currency!="usd"?s.values.market_value:0,i.market_total_CAD+=s.values.market_value_CAD,i.weight_account+=s.values.weight_account,i),t),t.gain_daily_percent=t.market_value/(t.market_value-t.gain_daily_amount)-1,t.gain_period_percent=t.market_value/(t.market_value-t.gain_period_amount)-1,t.gain_overall_percent=t.market_value/(t.market_value-t.gain_overall_amount)-1;else{const i=e.currency=="usd";t.market_value_CAD=i?0:e.value,t.market_value_USD=i?e.value:0,t.market_total_CAD=i?cad(e.value):e.value}return t}calc_account_holdings_totals(e,t){let i={book_value_CAD:0,close_amount_CAD:0,gain_daily_amount_CAD:0,gain_daily_percent:0,gain_period_amount_CAD:0,gain_period_percent:0,gain_overall_amount_CAD:0,gain_overall_percent:0,market_value_USD:0,market_value_CAD:0,market_total_CAD:0,weight_portfolio:0,weight_account:0};return e.subaccounts.forEach(s=>{const o=s.currency=="usd";let d=t.accounts[e.number][s.id];i.book_value_CAD+=o?this.cad(d.book_value):d.book_value,i.close_amount_CAD+=o?this.cad(d.close_amount):d.close_amount,i.gain_daily_amount_CAD+=o?this.cad(d.gain_daily_amount):d.gain_daily_amount,i.gain_period_amount_CAD+=o?this.cad(d.gain_period_amount):d.gain_period_amount,i.gain_overall_amount_CAD+=o?this.cad(d.gain_overall_amount):d.gain_overall_amount,i.market_value_CAD+=d.market_value_CAD,i.market_value_USD+=d.market_value_USD,i.market_total_CAD+=d.market_total_CAD,i.weight_account+=d.weight_account}),i.gain_daily_percent=i.market_total_CAD/(i.market_total_CAD-i.gain_daily_amount_CAD)-1,i.gain_period_percent=i.market_total_CAD/(i.market_total_CAD-i.gain_period_amount_CAD)-1,i.gain_overall_percent=i.market_total_CAD/(i.market_total_CAD-i.gain_overall_amount_CAD)-1,i}calc_portfolio_holdings_totals(e){e.portfolio={book_value_CAD:0,close_amount_CAD:0,gain_daily_amount_CAD:0,gain_daily_percent:0,gain_period_amount_CAD:0,gain_period_percent:0,gain_overall_amount_CAD:0,gain_overall_percent:0,market_value_USD:0,market_value_CAD:0,market_total_CAD:0,weight_portfolio:0},Object.keys(e.accounts).map(i=>{let s=e.accounts[i];e.portfolio.book_value_CAD+=s.book_value_CAD,e.portfolio.close_amount_CAD+=s.close_amount_CAD,e.portfolio.gain_daily_amount_CAD+=s.gain_daily_amount_CAD,e.portfolio.gain_period_amount_CAD+=s.gain_period_amount_CAD,e.portfolio.gain_overall_amount_CAD+=s.gain_overall_amount_CAD,e.portfolio.market_value_CAD+=s.market_value_CAD,e.portfolio.market_value_USD+=s.market_value_USD,e.portfolio.market_total_CAD+=s.market_total_CAD,e.portfolio.gain_daily_percent=e.portfolio.market_total_CAD/(e.portfolio.market_total_CAD-e.portfolio.gain_daily_amount_CAD)-1,e.portfolio.gain_period_percent=e.portfolio.market_total_CAD/(e.portfolio.market_total_CAD-e.portfolio.gain_period_amount_CAD)-1,e.portfolio.gain_overall_percent=e.portfolio.market_total_CAD/(e.portfolio.market_total_CAD-e.portfolio.gain_overall_amount_CAD)-1}),Object.keys(e.accounts).map(i=>{e.accounts[i].weight_portfolio=e.accounts[i].market_total_CAD/e.portfolio.market_total_CAD,e.portfolio.weight_portfolio+=e.accounts[i].weight_portfolio})}async retrieve_holdings_data(){await Promise.all([this.load(Le.positions),this.load(Le.x_usd)]);let e=[];return this.positions.forEach(t=>{t.investments.forEach(i=>{let s=this.create_holding(t,i);e.push(s)})}),await Promise.all(e.map(async t=>{t.history=await t.history})),await this.update_holdings_stock_prices(e),e}create_holding(e,t){return{account_number:t.investment.split(":")[0],subaccount_id:t.investment,market:t.currency.substring(0,2).toUpperCase(),symbol:e.security.symbol,symbol_mrkt:t.currency.substring(0,2).toUpperCase()+":"+e.security.symbol,name:e.security.name,currency:t.currency,xrate:t.currency==="usd"?1/this.x_usd.rate:1,quantity:t.quantity,cash:e.security.symbol=="REALCASH",history:this.wealthica.fetch_historical_data(e.security._id),values:{book_price:t.book_value/t.quantity,book_value:t.book_value,close_date:null,close_price:0,close_amount:0,daily_change:0,daily_date:null,gain_daily_amount:0,gain_daily_percent:0,gain_period_amount:0,gain_period_percent:0,gain_overall_amount:t.quantity*e.security.last_price-t.book_value,gain_overall_percent:(t.quantity*e.security.last_price-t.book_value)/t.book_value,market_date:e.security.last_date,market_price:e.security.last_price,market_value:t.quantity*e.security.last_price,market_price_CAD:e.security.last_price*(t.currency==="usd"?1/this.x_usd.rate:1),market_value_CAD:t.quantity*e.security.last_price*(t.currency==="usd"?1/this.x_usd.rate:1)}}}initialized_holdings_totals(){return{book_value:0,close_amount:0,gain_daily_amount:0,gain_daily_percent:0,gain_period_percent:0,gain_period_amount:0,gain_overall_amount:0,gain_overall_percent:0,market_value:0,market_value_CAD:0,market_value_USD:0,weight_account:0}}async update_holdings_stock_prices(e){await this.load(Le.user);let t=e.map(s=>s.symbol_mrkt);(await this.wealthica.fetch_stock_prices(this.user.email,t)).securities.forEach(s=>{let o=`${s.market}:${s.symbol.split(":")[1]}`;e.filter(d=>d.symbol_mrkt===o).forEach(d=>{d.values.close_price=s.price-s.change,d.values.close_amount=d.quantity*(s.price-s.change),d.values.daily_change=s.change,d.values.daily_date=s.update_date,d.values.gain_daily_amount=d.quantity*s.change,d.values.gain_daily_percent=(s.price-s.change)/(s.price-s.change-s.change)-1,d.values.gain_period_amount=0,d.values.gain_period_percent=0,d.values.gain_overall_amount=d.quantity*s.price-d.values.book_value,d.values.gain_overall_percent=(d.quantity*s.price-d.values.book_value)/d.values.book_value,d.values.market_price=s.price,d.values.market_value=d.quantity*s.price,d.values.market_date=s.quote_date,d.values.market_price_CAD=s.price*(d.currency==="usd"?1/this.x_usd.rate:1),d.values.market_value_CAD=d.quantity*s.price*(d.currency==="usd"?1/this.x_usd.rate:1)})}),this.calc_holdings_weigth(e)}calc_holdings_weigth(e){[...new Set(e.map(i=>i.account_number))].forEach(i=>{let s=e.filter(d=>d.account_number===i),o=s.reduce((d,E)=>d+E.values.market_value_CAD,0);s.forEach(d=>{d.values.weight_account=d.values.market_value_CAD/o})})}async refresh_holdings_stock_prices(){await this.update_holdings_stock_prices(this.holdings),Le.holdings,this.holdings,It(Le.holdings,this.holdings,yt.refreshed)}async retrieve_transactions(){let e=await this.wealthica.fetch_transactions();return e.forEach(t=>{t.subaccount_id=t.investment,t.amount=t.currency_amount,t.price=Math.abs(t.currency_amount/t.quantity),t.total_amount=t.currency_amount-(t.fee||0)}),e}async retrieve_transactions_list(){await this.load(Le.transactions);let e={};this.transactions.filter(t=>t.hasOwnProperty("investment")).sort((t,i)=>new Date(t.settlement_date)-new Date(i.settlement_date)).forEach((t,i)=>{const s=t.subaccount_id,o=new Date(t.settlement_date),d=`${o.getUTCFullYear()}-${("0"+(o.getUTCMonth()+1)).slice(-2)}`;e[s]=e[s]||{transactions:{},total:{total_amount:0,total_amount_CAD:0,fees:0,fees_CAD:0}},e[s].transactions[d]=e[s].transactions[d]||[],e[s].total.total_amount+=t.total_amount,e[s].total.total_amount_CAD+=t.total_amount*this.xrate(t.investment.split(":").pop()),e[s].total.fees+=t.fee||0,e[s].total.fees_CAD+=(t.fee||0)*this.xrate(t.investment.split(":").pop()),e[s].transactions[d].push({transaction:{...t,index:i},total:e[s].total.total_amount})});for(let t in e)e[t].transactions=Object.entries(e[t].transactions).sort(([i],[s])=>s.localeCompare(i)).reduce((i,[s,o])=>(i[s]=o.sort((d,E)=>E.transaction.index-d.transaction.index),i),{});return e}delete_transaction(e){this.wealthica.delete_transaction(e)}async retrieve_statements(){await this.load(Le.transactions);let e={};return this.transactions.filter(t=>t.hasOwnProperty("investment")).sort((t,i)=>new Date(t.settlement_date)-new Date(i.settlement_date)).forEach((t,i)=>{const s=t.subaccount_id;new Date(t.settlement_date);let o=this.get_subaccount_statement(s,e);t.type=="deposit"?(o.total.deposit+=t.amount,o.total.investment+=t.amount):t.type=="withdrawal"?(o.total.withdrawal+=t.amount,o.total.investment+=t.amount):t.type=="transfer_in"?(o.total.transfer_in+=t.amount,o.total.investment+=t.amount):t.type=="transfer_out"?(o.total.transfer_out+=t.amount,o.total.investment+=t.amount):t.type=="transfer"?(o.total.transfer+=t.amount,o.total.investment+=t.amount):(t.type=="xxxxxx"||t.type=="xxxxxx")&&(o.total.xxxxxx+=t.amount,o.total.investment+=t.amount)}),e}get_subaccount_statement(e,t){return t[e]=t[e]||{total:{deposit:0,withdrawal:0,transfer:0,transfer_in:0,transfer_out:0,investment:0,gain_realized:0,gain_unrealized:0,interest:0,dividend:0,fees:0,amount:0},holdings:[]},t[e]}get_holding_statement(e,t){let i=t.holdings.find(s=>s.symbol===e);return i||(i={symbol:e,quantity:0,cost_value:0,cost_price:0,fees:0,dividend:0,interest:0,gain_realized:0,gain_unrealized:0,amount:0,transactions:[]},t.holdings.push(i)),i}async retrieve_x_usd_data(){await this.load(Le.currencies);let e=this.currencies.find(t=>t._id==="usd");return e?{id:e._id,rate:e.exchange_rate,date:e.update_date}:null}cad(e){return e/this.x_usd.rate}usd(e){return e*this.x_usd.rate}xrate(e){return e!="cad"?1/this.x_usd.rate:1}}const bt=(k,e)=>{const t=k.__vccOpts||k;for(const[i,s]of e)t[i]=s;return t},cn={name:"tab_dashboard"},dn={class:"tab-container"},fn=c("div",{class:"tab-logo-container"},[c("img",{src:"https://portfoliotech.github.io/investify/static/img/tab-dashboard-icon.png",alt:"Under Construction",class:"tab-logo-centered"})],-1),hn=[fn];function gn(k,e,t,i,s,o){return se(),he("div",dn,hn)}const Dt=bt(cn,[["render",gn]]),_n={props:{span:{type:Number,default:1},value:{type:String,default:""},background:{type:Boolean,default:!1}}},mn=["colspan"],pn={class:"header-centered"};function vn(k,e,t,i,s,o){return se(),he("th",{colspan:t.span},[c("div",pn,[c("div",{class:tt(["header-value",[{background:t.background}]])},et(t.value),3)])],8,mn)}const vt=bt(_n,[["render",vn]]),yn={props:{span:{type:Number,default:5},institution:{type:String,default:""},name:{type:String,default:""},number:{type:String,default:""},type:{type:String,default:""},currency:{type:String,default:""},show_expand:{type:Boolean,default:!0},expanded:{type:Boolean,default:!0}},emits:["toggle"],methods:{toggle(){this.$emit("toggle")}},computed:{institution_icon(){if(this.institution=="--")switch(this.currency){case"cad":return"https://portfoliotech.github.io/investify/static/img/cad.png";case"usd":return"https://portfoliotech.github.io/investify/static/img/usd.png";default:return"https://portfoliotech.github.io/investify/static/expanded.png"}else return"https://app.wealthica.com/images/institutions/"+this.institution+".png"}}},wn=["colspan"],bn={class:"account-data-wraper"},kn={class:"account-identifier"},Tn=["src"],Cn={class:"account-name"},En={key:0,class:"toggle-arrow"},xn={class:"account-details"},On={class:"account-number"},An={class:"account-type"};function Mn(k,e,t,i,s,o){return se(),he("td",{class:"account-cell",colspan:t.span},[c("div",bn,[c("div",kn,[c("div",null,[c("img",{src:o.institution_icon,class:"institution-icon"},null,8,Tn)]),c("div",Cn,et(t.name),1),t.show_expand?(se(),he("div",En,[c("img",{src:"https://app.wealthica.com/img/arrow_down.f6ca09b2.svg",width:"13",height:"8",class:tt({expand:t.expanded}),onClick:e[0]||(e[0]=Gt((...d)=>o.toggle&&o.toggle(...d),["stop"]))},null,2)])):He("",!0)]),c("div",xn,[c("div",On,et(t.number),1),c("div",An,et(t.type),1)])])],8,wn)}const Et=bt(yn,[["render",Mn]]),Sn={props:{market:{type:String,default:""},symbol:{type:String,default:""},name:{type:String,default:""}},methods:{default_logo_path(k){k.target.src="https://portfoliotech.github.io/investify/static/img/default_logo.png"}},computed:{company_symbol(){return this.symbol=="REALCASH"?"CASH":this.symbol},company_name(){return this.symbol=="REALCASH"?"CASH BALANCE":this.name},logo_path(){return this.symbol=="REALCASH"?"https://portfoliotech.github.io/investify/static/img/cash.png":"https://data.wealthica.com/api/securities/"+this.market.substr(0,2)+":"+this.symbol+"/logo"}}},Fn=["title"],Pn={class:"company-data-wraper"},In={class:""},Dn=["src"],Rn={class:"company-data"},Ln={class:"company-symbol"},zn={class:"company-name"};function Nn(k,e,t,i,s,o){return se(),he("td",{class:"company-cell",title:o.company_name},[c("div",Pn,[c("div",In,[c("img",{src:o.logo_path,onError:e[0]||(e[0]=(...d)=>o.default_logo_path&&o.default_logo_path(...d)),alt:"company_symbol",class:"company-logo"},null,40,Dn)]),c("div",Rn,[c("div",Ln,et(o.company_symbol),1),c("div",zn,et(o.company_name),1)])])],8,Fn)}const Rt=bt(Sn,[["render",Nn]]),jn={props:{value:{default:null},formatter:{type:Function,default:null},align:{type:String,validator:function(k){return["left","center","right"].includes(k)},default:"left"},bold:{type:Boolean,default:!1},colored:{type:Boolean,default:!1},highlighted:{type:Boolean,default:!1},arrow:{type:Boolean,default:!1},span:{type:Number,default:1},tooltip:{default:null},visible:{type:Boolean,default:!0},show_zero:{type:Boolean,default:!0},show_null:{type:Boolean,default:!0}},computed:{formatted_value(){return!this.show_null&&!this.value||typeof this.value=="number"&&!this.show_zero&&this.value==0?"":this.formatter?this.formatter(this.value):this.value},font_color(){return this.colored&&typeof this.value=="number"?this.value>0?"green":this.value<0?"red":"black":"black"},show_arrow(){return this.arrow&&typeof this.value=="number"&&this.value!=0}}},$n=["colspan","title"],Wn=c("path",{"data-v-ae951afa":"",d:"M5.79 15.013H3.778V7.806H.813L4.808.398l4.004 7.408H5.791v7.207z",fill:"currentColor"},null,-1),Bn=[Wn];function Hn(k,e,t,i,s,o){return se(),he("td",{class:tt(["cell-custom",[t.align]]),colspan:t.span,title:t.tooltip},[t.visible?(se(),he("div",{key:0,class:tt(["cell-content",[t.align]])},[c("span",{class:tt(["cell-value text-color",[o.font_color,{highlighted:t.highlighted,bold:t.bold}]])},et(o.formatted_value),3),o.show_arrow?(se(),he("svg",{key:0,viewBox:"0 0 9 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:tt(["arrow-icon",[o.font_color]])},Bn,2)):He("",!0)],2)):He("",!0)],10,$n)}const ot=bt(jn,[["render",Hn]]),_t={number:new Intl.NumberFormat("en-US"),money:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),price:new Intl.NumberFormat("en-US",{minimumFractionDigits:4,maximumFractionDigits:4}),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2}),xrate:new Intl.NumberFormat("en-US",{minimumFractionDigits:4,maximumFractionDigits:4}),date:new Intl.DateTimeFormat("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",timeZone:"UTC"}),long_date:new Intl.DateTimeFormat("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",timeZone:"UTC"}),long_datetime:new Intl.DateTimeFormat("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"UTC"}),month_year:new Intl.DateTimeFormat("default",{month:"long",year:"numeric"})},$e={number(k){return _t.number.format(k)},money(k){return _t.money.format(k)},money_plus(k){return(k>0?"+":"")+_t.money.format(k)},price(k){return _t.price.format(k)},percent(k){return _t.percent.format(k)},date(k){let e=new Date(k);return isNaN(e.getTime())?"Invalid":_t.date.format(e)},long_date(k){let e=new Date(k);return isNaN(e.getTime())?"Invalid":_t.long_date.format(e)},long_datetime(k){let e=new Date(k);return isNaN(e.getTime())?"Invalid":_t.long_datetime.format(e)},month_year(k){let e=new Date(`${k}-01T12:00`);return isNaN(e.getTime())?"Invalid":_t.month_year.format(e)},xrate_cad(k){return`1 USD = ${_t.xrate.format(k)} CAD`},tip_daily_change(k,e){return $e.money_plus(k)+" on "+$e.long_datetime(e)},tip_xrate(k,e){return k==="usd"?`1 USD = ${$e.xrate_cad(e)} CAD`:null}},Un={components:{custom_cell:ot},props:{...ot.props,formatter:{type:Function,default:$e.number},align:{default:"right"}}},Pt=Object.assign(Un,{__name:"number",setup(k){return(e,t)=>(se(),wt(ot,At(e.$props,{formatter:k.formatter,align:k.align}),null,16,["formatter","align"]))}}),qn={components:{custom_cell:ot},props:{...ot.props,formatter:{type:Function,default:$e.money},align:{default:"right"}}},ye=Object.assign(qn,{__name:"money",setup(k){return(e,t)=>(se(),wt(ot,At(e.$props,{formatter:k.formatter,align:k.align}),null,16,["formatter","align"]))}}),Vn={components:{custom_cell:ot},props:{...ot.props,align:{default:"right"}}},rt=Object.assign(Vn,{__name:"percent",setup(k){return(e,t)=>(se(),wt(ot,At(e.$props,{formatter:Xe($e).percent,align:k.align}),null,16,["formatter","align"]))}}),Jn={key:0,id:"portfolio"},Gn={class:"portfolio"},Yn={id:"tr_accounts_header_1",class:"line_height_1_2"},Kn=c("th",{colspan:"5"},null,-1),Xn=c("th",{colspan:"7"},null,-1),Qn=c("tr",{id:"tr_accounts_header_2",class:"show-separator-line"},[c("th",{colspan:"5",class:"justify-left"},"Accounts"),c("th",null,"Gain $"),c("th",null,"Gain %"),c("th",null,"Gain $"),c("th",null,"Gain %"),c("th",{colspan:"2"},"CAD"),c("th",{colspan:"2"},"USD"),c("th",{colspan:"2"},"Total CAD"),c("th",null,"Portfolio")],-1),Zn={key:0,class:"spacer"},ei={key:1,id:"holdings_header_1",class:"line_height_1_2"},ti=c("th",null,null,-1),ni=c("th",null,null,-1),ii=c("th",null,null,-1),ri=c("th",null,null,-1),oi={key:2,id:"holdings_header_2",class:"show-separator-line"},ai=c("th",{class:"justify-left"},"Company",-1),si=c("th",null,null,-1),li=c("th",{class:"justify-center"},"Qty",-1),ui=c("th",null,"Price",-1),ci=c("th",null,"Value",-1),di=c("th",null,"Gain $",-1),fi=c("th",null,"Gain %",-1),hi=c("th",null,"Gain $",-1),gi=c("th",null,"Gain %",-1),_i=c("th",null,"low",-1),mi=c("th",null,"high",-1),pi=c("th",null,"Price",-1),vi=c("th",null,"Value",-1),yi=c("th",null,"Price",-1),wi=c("th",null,"Value",-1),bi=c("th",null,"Weigth",-1),ki=[ai,si,li,ui,ci,di,fi,hi,gi,_i,mi,pi,vi,yi,wi,bi],Ti={id:"holdings",class:"holdings"},Ci=c("td",{class:"fill-space"},null,-1),Ei={id:"cash",class:"holdings"},xi=c("td",{class:"fill-space"},null,-1),Oi=c("td",{colspan:"10"},null,-1),Ai=c("td",null,null,-1),Mi={key:5,id:"holdings_totals",class:"show-total-line"},Si=c("td",{colspan:"4",class:"justify-left"},"Total",-1),Fi=c("td",null,null,-1),Pi=c("td",null,null,-1),Ii=c("td",null,null,-1),Di=c("td",null,null,-1),Ri={key:1,id:"accounts_footer_spacing",class:"accounts-footer"},Li=c("td",{colspan:"16"},null,-1),zi=[Li],Ni={id:"portfolio_totals",class:"show-total-line"},ji=c("td",{colspan:"5",class:"justify-left"},"Total",-1),$i={id:"footer"},Wi=c("div",{style:{height:"20px"}},null,-1),Bi={style:{display:"flex","justify-content":"space-between"}},Hi=["title"],Ui={inject:["data_store","state"],data(){return{accounts:null,holdings:null,holdings_totals:null,x_usd:null}},created(){this.load_data()},methods:{load_data(){this.state.loading=!0,this.data_store.load(Le.x_usd).then(()=>{this.x_usd=this.data_store[Le.x_usd]}),Promise.all([this.data_store.load(Le.accounts),this.data_store.load(Le.holdings),this.data_store.load(Le.holdings_totals)]).then(()=>{this.accounts=this.data_store[Le.accounts],this.holdings=this.data_store[Le.holdings],this.holdings_totals=this.data_store[Le.holdings_totals],this.state.loading=!1})},refresh_all(){this.state.loading=!0,this.data_store.clear_data(Object.keys(Le)),this.load_data()},refresh_stock_prices(){this.state.loading=!0,this.data_store.refresh_holdings_stock_prices().then(()=>{this.state.loading=!1})}},computed:{currency_info(){if(this.x_usd){let k=this.x_usd.id.toUpperCase(),e=(1/this.x_usd.rate).toFixed(4),t=this.x_usd.rate.toFixed(4);return`1 ${k} = ${e} CAD, 1 CAD = ${t} ${k}`}else return"undefined"},currency_date(){return this.x_usd?$e.long_datetime(this.x_usd.date):"undefined"}}},Lt=Object.assign(Ui,{__name:"portfolio",setup(k){return(e,t)=>(se(),he(Ge,null,[e.accounts&&e.accounts.length?(se(),he("div",Jn,[c("table",Gn,[c("thead",null,[c("tr",Yn,[Kn,J(vt,{span:2,value:"Daily CAD",background:!0}),J(vt,{span:2,value:"Overall CAD",background:!0}),Xn]),Qn]),e.accounts?(se(!0),he(Ge,{key:0},ft(e.accounts,i=>(se(),he("tbody",{key:i.account_number},[c("tr",{id:"accounts",class:tt(["accounts",[{expanded:i.expanded}]])},[J(Et,{institution:i.institution.type,name:i.name,number:i.number,type:i.type,show_expand:!i.no_holdings,expanded:i.expanded,onToggle:s=>i.expanded=!i.expanded},null,8,["institution","name","number","type","show_expand","expanded","onToggle"]),J(ye,{value:e.holdings_totals.accounts[i.number].gain_daily_amount_CAD,colored:!0,highlighted:!0},null,8,["value"]),J(rt,{value:e.holdings_totals.accounts[i.number].gain_daily_percent,colored:!0,arrow:!0},null,8,["value"]),J(ye,{value:e.holdings_totals.accounts[i.number].gain_overall_amount_CAD,colored:!0,highlighted:!0},null,8,["value"]),J(rt,{value:e.holdings_totals.accounts[i.number].gain_overall_percent,colored:!0,arrow:!0},null,8,["value"]),J(ye,{span:2,value:e.holdings_totals.accounts[i.number].market_value_CAD},null,8,["value"]),J(ye,{span:2,value:e.holdings_totals.accounts[i.number].market_value_USD},null,8,["value"]),J(ye,{span:2,value:e.holdings_totals.accounts[i.number].market_total_CAD,colored:!0},null,8,["value"]),J(rt,{value:e.holdings_totals.accounts[i.number].weight_portfolio},null,8,["value"])],2),i.expanded&&i.subaccounts&&i.subaccounts.length?(se(!0),he(Ge,{key:0},ft(i.subaccounts,s=>(se(),he(Ge,{key:s.id},[c("tr",{id:"subaccounts",class:tt(["subaccounts",[{expanded:s.expanded}]])},[J(Et,{institution:"--",name:s.name,currency:s.currency,expanded:s.expanded,onToggle:o=>s.expanded=!s.expanded},null,8,["name","currency","expanded","onToggle"]),J(ye,{value:e.holdings_totals.accounts[i.number][s.id].gain_daily_amount,colored:!0,highlighted:!0,visible:!s.expanded},null,8,["value","visible"]),J(rt,{value:e.holdings_totals.accounts[i.number][s.id].gain_daily_percent,colored:!0,arrow:!0,visible:!s.expanded},null,8,["value","visible"]),J(ye,{value:e.holdings_totals.accounts[i.number][s.id].gain_overall_amount,colored:!0,highlighted:!0,visible:!s.expanded},null,8,["value","visible"]),J(rt,{value:e.holdings_totals.accounts[i.number][s.id].gain_overall_percent,colored:!0,arrow:!0,visible:!s.expanded},null,8,["value","visible"]),J(ye,{span:2,value:e.holdings_totals.accounts[i.number][s.id].market_value_CAD,visible:!s.expanded},null,8,["value","visible"]),J(ye,{span:2,value:e.holdings_totals.accounts[i.number][s.id].market_value_USD,visible:!s.expanded},null,8,["value","visible"]),J(ye,{span:2,value:e.holdings_totals.accounts[i.number][s.id].market_total_CAD,colored:!0,visible:!s.expanded},null,8,["value","visible"]),J(rt,{value:e.holdings_totals.accounts[i.number][s.id].weight_account,visible:!s.expanded},null,8,["value","visible"])],2),s.expanded?(se(),he("tr",Zn)):He("",!0),s.expanded?(se(),he("tr",ei,[ti,ni,ii,J(vt,{span:2,value:"Book",background:!0}),J(vt,{span:2,value:"Daily",background:!0}),J(vt,{span:2,value:"Overall",background:!0}),J(vt,{span:2,value:"52 weeks",background:!0}),J(vt,{span:2,value:"Market",background:!0}),J(vt,{span:2,value:"Market CAD",background:!0}),ri])):He("",!0),s.expanded?(se(),he("tr",oi,ki)):He("",!0),s.expanded?(se(!0),he(Ge,{key:3},ft(e.holdings.filter(o=>o.subaccount_id==s.id&&!o.cash),o=>(se(),he("tr",Ti,[J(Rt,{market:o.market,symbol:o.symbol,name:o.name},null,8,["market","symbol","name"]),Ci,J(Pt,{value:o.quantity,align:"center"},null,8,["value"]),J(ye,{value:o.values.book_price,tooltip:Xe($e).price(o.values.book_price)},null,8,["value","tooltip"]),J(ye,{value:o.values.book_value},null,8,["value"]),J(ye,{value:o.values.gain_daily_amount,colored:!0,highlighted:!0,tooltip:Xe($e).tip_daily_change(o.values.daily_change,o.values.market_date)},null,8,["value","tooltip"]),J(rt,{value:o.values.gain_daily_percent,colored:!0,arrow:!0,tooltip:Xe($e).tip_daily_change(o.values.daily_change,o.values.market_date)},null,8,["value","tooltip"]),J(ye,{value:o.values.gain_overall_amount,colored:!0,highlighted:!0},null,8,["value"]),J(rt,{value:o.values.gain_overall_percent,colored:!0,arrow:!0},null,8,["value"]),J(ye,{value:o.history.low.value,tooltip:Xe($e).long_date(o.history.low.date)},null,8,["value","tooltip"]),J(ye,{value:o.history.high.value,tooltip:Xe($e).long_date(o.history.high.date)},null,8,["value","tooltip"]),J(ye,{value:o.values.market_price,tooltip:Xe($e).long_datetime(o.values.market_date)},null,8,["value","tooltip"]),J(ye,{value:o.values.market_value},null,8,["value"]),J(ye,{value:o.values.market_price_CAD,colored:!0,tooltip:Xe($e).tip_xrate(o.currency,o.xrate)},null,8,["value","tooltip"]),J(ye,{value:o.values.market_value_CAD,colored:!0,tooltip:Xe($e).tip_xrate(o.currency,o.xrate)},null,8,["value","tooltip"]),J(rt,{value:o.values.weight_account},null,8,["value"])]))),256)):He("",!0),s.expanded?(se(!0),he(Ge,{key:4},ft(e.holdings.filter(o=>o.subaccount_id==s.id&&o.cash),o=>(se(),he("tr",Ei,[J(Rt,{market:o.market,symbol:o.symbol,name:o.name},null,8,["market","symbol","name"]),xi,Oi,J(ye,{value:o.values.market_value},null,8,["value"]),Ai,J(ye,{value:o.values.market_value_CAD,colored:!0},null,8,["value"]),J(rt,{value:o.values.weight_account},null,8,["value"])]))),256)):He("",!0),s.expanded?(se(),he("tr",Mi,[Si,J(ye,{value:e.holdings_totals.accounts[i.number][s.id].book_value},null,8,["value"]),J(ye,{value:e.holdings_totals.accounts[i.number][s.id].gain_daily_amount,colored:!0,highlighted:!0},null,8,["value"]),J(rt,{value:e.holdings_totals.accounts[i.number][s.id].gain_daily_percent,colored:!0,arrow:!0},null,8,["value"]),J(ye,{value:e.holdings_totals.accounts[i.number][s.id].gain_overall_amount,colored:!0,highlighted:!0},null,8,["value"]),J(rt,{value:e.holdings_totals.accounts[i.number][s.id].gain_overall_percent,colored:!0,arrow:!0},null,8,["value"]),Fi,Pi,Ii,J(ye,{value:e.holdings_totals.accounts[i.number][s.id].market_value},null,8,["value"]),Di,J(ye,{value:e.holdings_totals.accounts[i.number][s.id].market_total_CAD,colored:!0},null,8,["value"]),J(rt,{value:e.holdings_totals.accounts[i.number][s.id].weight_account,colored:!1},null,8,["value"])])):He("",!0)],64))),128)):He("",!0),i.expanded?(se(),he("tr",Ri,zi)):He("",!0)]))),128)):He("",!0),c("tfoot",null,[c("tr",Ni,[ji,J(ye,{value:e.holdings_totals.portfolio.gain_daily_amount_CAD,colored:!0,highlighted:!0},null,8,["value"]),J(rt,{value:e.holdings_totals.portfolio.gain_daily_percent,colored:!0,arrow:!0},null,8,["value"]),J(ye,{value:e.holdings_totals.portfolio.gain_overall_amount_CAD,colored:!0,highlighted:!0},null,8,["value"]),J(rt,{value:e.holdings_totals.portfolio.gain_overall_percent,colored:!0,arrow:!0},null,8,["value"]),J(ye,{span:2,value:e.holdings_totals.portfolio.market_value_CAD},null,8,["value"]),J(ye,{span:2,value:e.holdings_totals.portfolio.market_value_USD},null,8,["value"]),J(ye,{span:2,value:e.holdings_totals.portfolio.market_total_CAD,colored:!0},null,8,["value"]),J(rt,{value:e.holdings_totals.portfolio.weight_portfolio},null,8,["value"])])])])])):He("",!0),c("div",$i,[Wi,c("div",Bi,[c("div",null,[e.x_usd?(se(),he("div",{key:0,class:"x-rate-info",title:e.currency_date},et(e.currency_info),9,Hi)):He("",!0)]),c("div",null,[c("button",{onClick:t[0]||(t[0]=(...i)=>e.refresh_all&&e.refresh_all(...i))},"Refresh All"),Ft(" "),c("button",{onClick:t[1]||(t[1]=(...i)=>e.refresh_stock_prices&&e.refresh_stock_prices(...i))},"Refresh Prices")])])])],64))}}),qi={name:"tab_performance"},Vi={class:"tab-container"},Ji=c("div",{class:"tab-logo-container"},[c("img",{src:"https://portfoliotech.github.io/investify/static/img/tab-performance-icon.png",alt:"Under Construction",class:"tab-logo-centered"})],-1),Gi=[Ji];function Yi(k,e,t,i,s,o){return se(),he("div",Vi,Gi)}const zt=bt(qi,[["render",Yi]]),Ki={name:"tab_wealth"},Xi={class:"tab-container"},Qi=c("div",{class:"tab-logo-container"},[c("img",{src:"https://portfoliotech.github.io/investify/static/img/tab-wealth-icon.png",alt:"Under Construction",class:"tab-logo-centered"})],-1),Zi=[Qi];function er(k,e,t,i,s,o){return se(),he("div",Xi,Zi)}const Nt=bt(Ki,[["render",er]]),tr={components:{custom_cell:ot},props:{...ot.props,align:{default:"left"}}},Ht=Object.assign(tr,{__name:"date",setup(k){return(e,t)=>(se(),wt(ot,At(e.$props,{formatter:Xe($e).date,align:k.align}),null,16,["formatter","align"]))}}),nr={components:{custom_cell:ot},props:{...ot.props,align:{default:"left"}}},Ct=Object.assign(nr,{__name:"text",setup(k){return(e,t)=>(se(),wt(ot,At(e.$props,{formatter:null,align:k.align}),null,16,["align"]))}}),ir={key:0,id:"transactions_listing"},rr={class:"transactions-listing"},or=c("thead",null,[c("tr",{id:"tr_accounts_header_2",class:"show-separator-line"},[c("th",{colspan:"10"},"Accounts")])],-1),ar={colspan:"10"},sr={class:"statement-wraper"},lr=c("div",{class:"statement-section"},[c("div",null,"Investment"),c("div",null,"Deposit"),c("div",null,"Withdrawal"),c("div",null,"Transfer"),c("div",null,"Transfer In"),c("div",null,"Transfer Out"),c("div",null,"Total")],-1),ur={class:"statement-values"},cr=c("div",null,null,-1),dr=Yt('<div class="statement-section"></div><div class="statement-section"><div>Gain</div><div>Realized</div><div>Dividend</div><div>Interest</div><div>Unrealized</div><div>Total</div></div><div class="statement-values"><div></div><div>3,000.00</div><div>1,000.00</div><div>5,000.00</div><div>6,000.00</div><div>15,000.00</div></div><div class="statement-section"></div><div class="statement-section"><div>Value</div><div>Market</div><div>Total</div></div><div class="statement-values"><div></div><div>27,000.00</div><div>27,000.00</div></div><div class="statement-section"></div>',7),fr=c("div",null,null,-1),hr={colspan:"10"},gr={key:0,id:"transactions_header",class:"transactions-header show-separator-line"},_r=c("th",{class:"justify-left"},"Date",-1),mr=c("th",{class:"justify-left"},"Description",-1),pr=c("th",{class:"justify-left"},"Company",-1),vr=c("th",{class:"justify-left"},"Type",-1),yr=c("th",{class:"justify-center"},"Qte",-1),wr=c("th",{class:"justify-right"},"Price",-1),br=c("th",{class:"justify-right"},"Amount",-1),kr=c("th",{class:"justify-right"},"Fee",-1),Tr=c("th",{class:"justify-right"},"Total",-1),Cr=[_r,mr,pr,vr,yr,wr,br,kr,Tr],Er={class:"transactions-month"},xr={colspan:"9"},Or={id:"transactions",class:"transactions"},Ar={key:1,id:"accounts_footer_spacing",class:"accounts-footer"},Mr=c("td",{colspan:"10"},null,-1),Sr=[Mr],Fr=c("tfoot",null,[c("tr",{id:"totals",class:"show-total-line"},[c("td",{colspan:"10",class:"justify-left"},"Total")])],-1),Pr={id:"footer"},Ir=c("div",{style:{height:"20px"}},null,-1),Dr={style:{display:"flex","justify-content":"space-between"}},Rr=["title"],Lr={inject:["data_store","state"],data(){return{accounts:null,statements:null,transactions:null,x_usd:null}},created(){this.load_data()},methods:{load_data(){this.state.loading=!0,this.data_store.load(Le.x_usd).then(()=>{this.x_usd=this.data_store[Le.x_usd]}),Promise.all([this.data_store.load(Le.accounts),this.data_store.load(Le.statements),this.data_store.load(Le.transactions_list)]).then(()=>{this.accounts=this.data_store[Le.accounts],this.statements=this.data_store[Le.statements],this.transactions=this.data_store[Le.transactions_list],this.state.loading=!1})},refresh_data(){this.state.loading=!0,this.data_store.clear_data(Object.keys(Le)),this.state.loading=!1,this.load_data()},account_amount_cad(k){return k.subaccounts.reduce((e,t)=>{var s,o;let i=((o=(s=this.listing[t.id])==null?void 0:s.total)==null?void 0:o.total_amount)??t.value;return e+(t.currency=="cad"?i:0)},0)},account_amount_usd(k){return k.subaccounts.reduce((e,t)=>{var s,o;let i=((o=(s=this.listing[t.id])==null?void 0:s.total)==null?void 0:o.total_amount)??t.value;return e+(t.currency!="cad"?i:0)},0)},account_total_cad(k){return k.subaccounts.reduce((e,t)=>{var i;return e+(((i=this.listing[t.id])==null?void 0:i.total.total_amount_CAD)??0)},0)},account_fees_cad(k){return k.subaccounts.reduce((e,t)=>{var i;return e-(((i=this.listing[t.id])==null?void 0:i.total.fees_CAD)??0)},0)},listing_amount_cad(k){return k.reduce((e,t)=>e+this.account_amount_cad(t),0)},listing_amount_usd(k){return k.reduce((e,t)=>e+this.account_amount_usd(t),0)},listing_total_cad(k){return k.reduce((e,t)=>e+this.account_total_cad(t),0)},listing_fees_cad(k){return k.reduce((e,t)=>e+this.account_fees_cad(t),0)},security_symbol(k){return k.security&&k.security.symbol?k.security.symbol:""},tooltip_security_name(k){return k.security&&k.security.name?k.security.name:""},tooltip_transaction_date(k){return`trade: ${$e.date(k.date)}
settlement: ${$e.date(k.settlement_date)}`},delete_trns(){[].forEach(e=>{this.data_store.delete_transaction(e),console.log("transaction deleted: "+e)})}},computed:{currency_info(){if(this.x_usd){let k=this.x_usd.id.toUpperCase(),e=(1/this.x_usd.rate).toFixed(4),t=this.x_usd.rate.toFixed(4);return`1 ${k} = ${e} CAD, 1 CAD = ${t} ${k}`}else return"undefined"},currency_date(){return this.x_usd?$e.long_datetime(this.x_usd.date):"undefined"}}},jt=Object.assign(Lr,{__name:"statements",setup(k){return(e,t)=>(se(),he(Ge,null,[e.accounts&&e.accounts.length?(se(),he("div",ir,[c("table",rr,[or,e.accounts?(se(!0),he(Ge,{key:0},ft(e.accounts,i=>(se(),he("tbody",{id:"accounts",key:i.account_number},[c("tr",{id:"account",class:tt(["accounts",[{expanded:i.expanded}]])},[J(Et,{span:10,institution:i.institution.type,name:i.name,number:i.number,type:i.type,expanded:i.expanded,onToggle:s=>i.expanded=!i.expanded},null,8,["institution","name","number","type","expanded","onToggle"])],2),i.expanded&&i.subaccounts&&i.subaccounts.length?(se(!0),he(Ge,{key:0},ft(i.subaccounts,s=>(se(),he(Ge,{key:s.id},[c("tr",{id:"subaccounts",class:tt(["subaccounts",[{expanded:s.expanded}]])},[J(Et,{span:10,institution:"--",name:s.name,currency:s.currency,expanded:s.expanded,onToggle:o=>s.expanded=!s.expanded},null,8,["name","currency","expanded","onToggle"])],2),c("tr",null,[c("td",ar,[c("div",sr,[lr,c("div",ur,[cr,c("div",null,et(Xe($e).money(e.statements[s.id].total.deposit)),1),c("div",null,et(Xe($e).money(e.statements[s.id].total.withdrawal)),1),c("div",null,et(Xe($e).money(e.statements[s.id].total.transfer)),1),c("div",null,et(Xe($e).money(e.statements[s.id].total.transfer_in)),1),c("div",null,et(Xe($e).money(e.statements[s.id].total.transfer_out)),1),c("div",null,et(Xe($e).money(e.statements[s.id].total.investment)),1)]),dr]),fr])]),c("tr",null,[c("td",hr,[c("table",null,[c("thead",null,[s.expanded?(se(),he("tr",gr,Cr)):He("",!0)]),c("tbody",null,[(se(!0),he(Ge,null,ft(e.transactions[s.id].transactions,(o,d)=>(se(),he(Ge,{key:d},[c("tr",Er,[c("td",xr,et(Xe($e).month_year(d)),1)]),(se(!0),he(Ge,null,ft(o,E=>(se(),he("tr",Or,[J(Ht,{value:E.transaction.settlement_date,tooltip:e.tooltip_transaction_date(E.transaction)},null,8,["value","tooltip"]),J(Ct,{value:E.transaction.description,class:"transaction-description",tooltip:E.transaction.description},null,8,["value","tooltip"]),J(Ct,{value:e.security_symbol(E.transaction),tooltip:e.tooltip_security_name(E.transaction)},null,8,["value","tooltip"]),J(Ct,{value:E.transaction.type.toUpperCase()},null,8,["value"]),J(Pt,{value:E.transaction.quantity,align:"center",show_zero:!1,show_null:!1},null,8,["value"]),J(ye,{value:E.transaction.price,formatter:Xe($e).price,show_zero:!1,show_null:!1},null,8,["value","formatter"]),J(ye,{value:E.transaction.total_amount,colored:!0},null,8,["value"]),J(ye,{value:-E.transaction.fee,show_zero:!1,show_null:!1},null,8,["value"]),J(ye,{value:E.total,bold:!0},null,8,["value"])]))),256))],64))),128))])])])])],64))),128)):He("",!0),i.expanded?(se(),he("tr",Ar,Sr)):He("",!0)]))),128)):He("",!0),Fr])])):He("",!0),c("div",Pr,[Ir,c("div",Dr,[c("div",null,[e.x_usd?(se(),he("div",{key:0,class:"x-rate-info",title:e.currency_date},et(e.currency_info),9,Rr)):He("",!0)]),c("div",null,[c("button",{onClick:t[0]||(t[0]=(...i)=>e.delete_trns&&e.delete_trns(...i))},"delete"),Ft(""),c("button",{onClick:t[1]||(t[1]=(...i)=>e.refresh_data&&e.refresh_data(...i))},"Refresh")])])])],64))}}),zr={key:0,id:"transactions_listing"},Nr={class:"transactions-listing"},jr=c("thead",null,[c("tr",{id:"tr_accounts_header_2",class:"show-separator-line"},[c("th",{colspan:"5"},"Accounts"),c("th",{colspan:"1",class:"justify-right"},"Fees CAD"),c("th",{colspan:"1",class:"justify-right"},"CAD"),c("th",{colspan:"1",class:"justify-right"},"USD"),c("th",{colspan:"1",class:"justify-right"},"Total CAD")])],-1),$r={key:0,id:"transactions_header",class:"transactions-header show-separator-line"},Wr=c("th",{class:"justify-left"},"Date",-1),Br=c("th",{class:"justify-left"},"Description",-1),Hr=c("th",{class:"justify-left"},"Company",-1),Ur=c("th",{class:"justify-left"},"Type",-1),qr=c("th",{class:"justify-center"},"Qte",-1),Vr=c("th",{class:"justify-right"},"Price",-1),Jr=c("th",{class:"justify-right"},"Amount",-1),Gr=c("th",{class:"justify-right"},"Fee",-1),Yr=c("th",{class:"justify-right"},"Total",-1),Kr=[Wr,Br,Hr,Ur,qr,Vr,Jr,Gr,Yr],Xr={class:"transactions-month"},Qr={colspan:"9"},Zr={id:"transactions",class:"transactions"},eo={key:1,class:"spacer"},to={key:1,id:"accounts_footer_spacing",class:"accounts-footer"},no=c("td",{colspan:"9"},null,-1),io=[no],ro={id:"portfolio_totals",class:"show-total-line"},oo=c("td",{colspan:"5",class:"justify-left"},"Total",-1),ao={id:"footer"},so=c("div",{style:{height:"20px"}},null,-1),lo={style:{display:"flex","justify-content":"space-between"}},uo=["title"],co={inject:["data_store","state"],data(){return{accounts:null,listing:null,x_usd:null}},created(){this.load_data()},methods:{load_data(){this.state.loading=!0,this.data_store.load(Le.x_usd).then(()=>{this.x_usd=this.data_store[Le.x_usd]}),Promise.all([this.data_store.load(Le.accounts),this.data_store.load(Le.transactions_list)]).then(()=>{this.accounts=this.data_store[Le.accounts],this.listing=this.data_store[Le.transactions_list],this.state.loading=!1})},refresh_data(){this.state.loading=!0,this.data_store.clear_data(Object.keys(Le)),this.state.loading=!1,this.load_data()},account_amount_cad(k){return k.subaccounts.reduce((e,t)=>{var s,o;let i=((o=(s=this.listing[t.id])==null?void 0:s.total)==null?void 0:o.total_amount)??t.value;return e+(t.currency=="cad"?i:0)},0)},account_amount_usd(k){return k.subaccounts.reduce((e,t)=>{var s,o;let i=((o=(s=this.listing[t.id])==null?void 0:s.total)==null?void 0:o.total_amount)??t.value;return e+(t.currency!="cad"?i:0)},0)},account_total_cad(k){return k.subaccounts.reduce((e,t)=>{var i;return e+(((i=this.listing[t.id])==null?void 0:i.total.total_amount_CAD)??0)},0)},account_fees_cad(k){return k.subaccounts.reduce((e,t)=>{var i;return e-(((i=this.listing[t.id])==null?void 0:i.total.fees_CAD)??0)},0)},listing_amount_cad(k){return k.reduce((e,t)=>e+this.account_amount_cad(t),0)},listing_amount_usd(k){return k.reduce((e,t)=>e+this.account_amount_usd(t),0)},listing_total_cad(k){return k.reduce((e,t)=>e+this.account_total_cad(t),0)},listing_fees_cad(k){return k.reduce((e,t)=>e+this.account_fees_cad(t),0)},security_symbol(k){return k.security&&k.security.symbol?k.security.symbol:""},tooltip_security_name(k){return k.security&&k.security.name?k.security.name:""},tooltip_transaction_date(k){return`trade: ${$e.date(k.date)}
settlement: ${$e.date(k.settlement_date)}`},delete_trns(){[].forEach(e=>{this.data_store.delete_transaction(e),console.log("transaction deleted: "+e)})}},computed:{currency_info(){if(this.x_usd){let k=this.x_usd.id.toUpperCase(),e=(1/this.x_usd.rate).toFixed(4),t=this.x_usd.rate.toFixed(4);return`1 ${k} = ${e} CAD, 1 CAD = ${t} ${k}`}else return"undefined"},currency_date(){return this.x_usd?$e.long_datetime(this.x_usd.date):"undefined"}}},$t=Object.assign(co,{__name:"transactions",setup(k){return(e,t)=>(se(),he(Ge,null,[e.accounts&&e.accounts.length?(se(),he("div",zr,[c("table",Nr,[jr,e.accounts?(se(!0),he(Ge,{key:0},ft(e.accounts,i=>(se(),he("tbody",{key:i.account_number},[c("tr",{id:"accounts",class:tt(["accounts",[{expanded:i.expanded}]])},[J(Et,{span:5,institution:i.institution.type,name:i.name,number:i.number,type:i.type,expanded:i.expanded,onToggle:s=>i.expanded=!i.expanded},null,8,["institution","name","number","type","expanded","onToggle"]),J(ye,{value:e.account_fees_cad(i),show_zero:!1},null,8,["value"]),J(ye,{value:e.account_amount_cad(i),show_zero:!0},null,8,["value"]),J(ye,{value:e.account_amount_usd(i),show_zero:!0},null,8,["value"]),J(ye,{value:e.account_total_cad(i),colored:!0,class:"justify-right"},null,8,["value"])],2),i.expanded&&i.subaccounts&&i.subaccounts.length?(se(!0),he(Ge,{key:0},ft(i.subaccounts,s=>(se(),he(Ge,{key:s.id},[c("tr",{id:"subaccounts",class:tt(["subaccounts",[{expanded:s.expanded}]])},[J(Et,{span:8,institution:"--",name:s.name,currency:s.currency,expanded:s.expanded,onToggle:o=>s.expanded=!s.expanded},null,8,["name","currency","expanded","onToggle"]),J(ye,{value:e.listing[s.id].total.total_amount,bold:!0,colored:!0},null,8,["value"])],2),s.expanded?(se(),he(Ge,{key:0},[s.expanded?(se(),he("tr",$r,Kr)):He("",!0),(se(!0),he(Ge,null,ft(e.listing[s.id].transactions,(o,d)=>(se(),he(Ge,{key:d},[c("tr",Xr,[c("td",Qr,et(Xe($e).month_year(d)),1)]),(se(!0),he(Ge,null,ft(o,E=>(se(),he("tr",Zr,[J(Ht,{value:E.transaction.settlement_date,tooltip:e.tooltip_transaction_date(E.transaction)},null,8,["value","tooltip"]),J(Ct,{value:E.transaction.description,class:"transaction-description",tooltip:E.transaction.description},null,8,["value","tooltip"]),J(Ct,{value:e.security_symbol(E.transaction),tooltip:e.tooltip_security_name(E.transaction)},null,8,["value","tooltip"]),J(Ct,{value:E.transaction.type.toUpperCase()},null,8,["value"]),J(Pt,{value:E.transaction.quantity,align:"center",show_zero:!1,show_null:!1},null,8,["value"]),J(ye,{value:E.transaction.price,formatter:Xe($e).price,show_zero:!1,show_null:!1},null,8,["value","formatter"]),J(ye,{value:E.transaction.total_amount,colored:!0},null,8,["value"]),J(ye,{value:-E.transaction.fee,show_zero:!1,show_null:!1},null,8,["value"]),J(ye,{value:E.total,bold:!0},null,8,["value"])]))),256))],64))),128)),s.expanded?(se(),he("tr",eo)):He("",!0)],64)):He("",!0)],64))),128)):He("",!0),i.expanded?(se(),he("tr",to,io)):He("",!0)]))),128)):He("",!0),c("tfoot",null,[c("tr",ro,[oo,J(ye,{value:e.listing_fees_cad(e.accounts),show_zero:!1},null,8,["value"]),J(ye,{value:e.listing_amount_cad(e.accounts),show_zero:!1},null,8,["value"]),J(ye,{value:e.listing_amount_usd(e.accounts),show_zero:!1},null,8,["value"]),J(ye,{value:e.listing_total_cad(e.accounts),colored:!0,class:"justify-right"},null,8,["value"])])])])])):He("",!0),c("div",ao,[so,c("div",lo,[c("div",null,[e.x_usd?(se(),he("div",{key:0,class:"x-rate-info",title:e.currency_date},et(e.currency_info),9,uo)):He("",!0)]),c("div",null,[c("button",{onClick:t[0]||(t[0]=(...i)=>e.delete_trns&&e.delete_trns(...i))},"delete"),Ft(""),c("button",{onClick:t[1]||(t[1]=(...i)=>e.refresh_data&&e.refresh_data(...i))},"Refresh")])])])],64))}}),fo={class:"tabs-container"},ho={class:"tabs"},go=c("img",{src:"https://portfoliotech.github.io/investify/static/img/tab-dashboard-icon.png",alt:"",class:"tab-img"},null,-1),_o=c("span",null,"Dashboard",-1),mo=[go,_o],po=c("img",{src:"https://portfoliotech.github.io/investify/static/img/tab-portfolio-icon.png",alt:"",class:"tab-img"},null,-1),vo=c("span",null,"Portfolio",-1),yo=[po,vo],wo=c("img",{src:"https://portfoliotech.github.io/investify/static/img/tab-performance-icon.png",alt:"",class:"tab-img"},null,-1),bo=c("span",null,"Performance",-1),ko=[wo,bo],To=c("img",{src:"https://portfoliotech.github.io/investify/static/img/tab-wealth-icon.png",alt:"",class:"tab-img"},null,-1),Co=c("span",null,"Wealth",-1),Eo=[To,Co],xo=c("img",{src:"https://portfoliotech.github.io/investify/static/img/tab-statements-icon.png",alt:"",class:"tab-img"},null,-1),Oo=c("span",null,"Statements",-1),Ao=[xo,Oo],Mo=c("img",{src:"https://portfoliotech.github.io/investify/static/img/tab-transactions-icon.png",alt:"",class:"tab-img"},null,-1),So=c("span",null,"Transactions",-1),Fo=[Mo,So],Po={class:"state"},Io={key:0,src:"https://portfoliotech.github.io/investify/static/img/loading.gif",alt:"Loading...",class:"loading-gif"},Do=c("div",{class:"top-space"},null,-1),Ro={name:"App",components:{Dashboard:Dt,Portfolio:Lt,Performance:zt,Wealth:Nt,Statements:jt,Transactions:$t},data(){return{state:{loading:!0},active_tab:"Statements",tabs:{Dashboard:Tt(Dt),Portfolio:Tt(Lt),Performance:Tt(zt),Wealth:Tt(Nt),Statements:Tt(jt),Transactions:Tt($t)}}},provide(){return{data_store:new un,state:this.state}},computed:{get_active_tab(){return this.tabs[this.active_tab]}}},No=Object.assign(Ro,{setup(k){return(e,t)=>(se(),he("div",null,[c("div",fo,[c("div",ho,[c("div",{onClick:t[0]||(t[0]=i=>e.active_tab="Dashboard"),class:tt(["tab",{"tab-active":e.active_tab==="Dashboard"}])},mo,2),c("div",{onClick:t[1]||(t[1]=i=>e.active_tab="Portfolio"),class:tt(["tab",{"tab-active":e.active_tab==="Portfolio"}])},yo,2),c("div",{onClick:t[2]||(t[2]=i=>e.active_tab="Performance"),class:tt(["tab",{"tab-active":e.active_tab==="Performance"}])},ko,2),c("div",{onClick:t[3]||(t[3]=i=>e.active_tab="Wealth"),class:tt(["tab",{"tab-active":e.active_tab==="Wealth"}])},Eo,2),c("div",{onClick:t[4]||(t[4]=i=>e.active_tab="Statements"),class:tt(["tab",{"tab-active":e.active_tab==="Statements"}])},Ao,2),c("div",{onClick:t[5]||(t[5]=i=>e.active_tab="Transactions"),class:tt(["tab",{"tab-active":e.active_tab==="Transactions"}])},Fo,2)]),c("div",Po,[e.state.loading?(se(),he("img",Io)):He("",!0)])]),Do,c("div",null,[(se(),wt(Xt,null,[(se(),wt(Kt(e.get_active_tab)))],1024))])]))}});export{No as default};
